<h2><a id="LetMeFly1390_1"></a>【LetMeFly】1390.四因数：因数分解+缓存</h2> <br><p>力扣题目链接：<a href="https://leetcode.cn/problems/four-divisors/" rel="nofollow">https://leetcode.cn/problems/four-divisors/</a></p> <br><p>给你一个整数数组 <code>nums</code>，请你返回该数组中恰有四个因数的这些整数的各因数之和。如果数组中不存在满足题意的整数，则返回 <code>0</code> 。</p> <br><p> </p> <br><p><strong>示例 1：</strong></p> <br><pre><strong>输入：</strong>nums = [21,4,7]<br><strong>输出：</strong>32<br><strong>解释：</strong><br>21 有 4 个因数：1, 3, 7, 21<br>4 有 3 个因数：1, 2, 4<br>7 有 2 个因数：1, 7<br>答案仅为 21 的所有因数的和。<br></pre> <br><p><strong>示例 2:</strong></p> <br><pre><strong>输入:</strong> nums = [21,21]<br><strong>输出:</strong> 64<br></pre> <br><p><strong>示例 3:</strong></p> <br><pre><strong>输入:</strong> nums = [1,2,3,4,5]<br><strong>输出:</strong> 0</pre> <br><p> </p> <br><p><strong>提示：</strong></p> <br><ul><li><code>1 <= nums.length <= 10<sup>4</sup></code></li><li><code>1 <= nums[i] <= 10<sup>5</sup></code></li></ul> <br><h3><a id="_45"></a>解题方法：因数分解</h3> <br><p>如何求一个数<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        n<br>       <br>      <br>      <br>       n<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span>有多少个因数？</p> <br><blockquote> <br> <p>用变量<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         i<br>        <br>       <br>       <br>        i<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span>从<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         1<br>        <br>       <br>       <br>        1<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>到<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         ⌊<br>        <br>        <br>         <br>          n<br>         <br>        <br>        <br>         ⌋<br>        <br>       <br>       <br>        \lfloor\sqrt{n}\rfloor<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.0503em; vertical-align: -0.25em;"></span><span class="mopen">⌊</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8003em;"><span class="svg-align" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord" style="padding-left: 0.833em;"><span class="mord mathnormal">n</span></span></span><span class="" style="top: -2.7603em;"><span class="pstrut" style="height: 3em;"></span><span class="hide-tail" style="min-width: 0.853em; height: 1.08em;"><br>            <svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><br>             <path d="M95,702<br>c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14<br>c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54<br>c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10<br>s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429<br>c69,-144,104.5,-217.7,106.5,-221<br>l0 -0<br>c5.3,-9.3,12,-14,20,-14<br>H400000v40H845.2724<br>s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7<br>c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z<br>M834 80h400000v40h-400000z"></path><br>            </svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2397em;"><span class=""></span></span></span></span></span><span class="mclose">⌋</span></span></span></span></span>遍历，如果<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         i<br>        <br>       <br>       <br>        i<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span>能整除<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         n<br>        <br>       <br>       <br>        n<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span>，则因数个数加二。</p> <br> <p>特别的，如果<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         n<br>        <br>       <br>       <br>        n<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span>是完全平方数，则前面运算中<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         <br>          n<br>         <br>        <br>       <br>       <br>        \sqrt{n}<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.04em; vertical-align: -0.2397em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8003em;"><span class="svg-align" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord" style="padding-left: 0.833em;"><span class="mord mathnormal">n</span></span></span><span class="" style="top: -2.7603em;"><span class="pstrut" style="height: 3em;"></span><span class="hide-tail" style="min-width: 0.853em; height: 1.08em;"><br>            <svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><br>             <path d="M95,702<br>c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14<br>c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54<br>c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10<br>s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429<br>c69,-144,104.5,-217.7,106.5,-221<br>l0 -0<br>c5.3,-9.3,12,-14,20,-14<br>H400000v40H845.2724<br>s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7<br>c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z<br>M834 80h400000v40h-400000z"></path><br>            </svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2397em;"><span class=""></span></span></span></span></span></span></span></span></span>多统计了一次，要减去。</p> <br></blockquote> <br><p>由于不同的测试用例可能会出现相同的数，所以可以使用一个“全局”缓存或类中的静态变量来避免重复计算。</p> <br><ul><li>时间复杂度：单个测试用例<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         n<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(n)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>，所有测试用例总体还需加上<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         m<br>        <br>        <br>         log<br>        <br>        <br>         ⁡<br>        <br>        <br>         m<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(m\log m)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mop">lo<span style="margin-right: 0.0139em;">g</span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">m</span><span class="mclose">)</span></span></span></span></span>，其中<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         m<br>        <br>        <br>         =<br>        <br>        <br>         max<br>        <br>        <br>         ⁡<br>        <br>        <br>         (<br>        <br>        <br>         n<br>        <br>        <br>         u<br>        <br>        <br>         m<br>        <br>        <br>         s<br>        <br>        <br>         [<br>        <br>        <br>         i<br>        <br>        <br>         ]<br>        <br>        <br>         )<br>        <br>       <br>       <br>        m=\max(nums[i])<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mop">max</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">])</span></span></span></span></span></li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         m<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(m)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mclose">)</span></span></span></span></span></li></ul> <br><h4><a id="AC_58"></a>AC代码</h4> <br><h5><a id="C_60"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @LastEditTime: 2026-01-04 18:51:38<br> */</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">private</span><span class="token operator">:</span><br>    <span class="token keyword">static</span> unordered_map<span class="token operator"><</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span> cache<span class="token punctuation">;</span><br><br>    <span class="token keyword">int</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>cache<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">return</span> cache<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br><br>        <span class="token keyword">int</span> cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token function">sqrt</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator"><=</span> k<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">%</span> i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                cnt <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span><br>                sum <span class="token operator">+=</span> i <span class="token operator">+</span> n <span class="token operator">/</span> i<span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">*</span> k <span class="token operator">==</span> n<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            cnt<span class="token operator">--</span><span class="token punctuation">,</span> sum <span class="token operator">-=</span> k<span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> cache<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> cnt <span class="token operator">==</span> <span class="token number">4</span> <span class="token operator">?</span> sum <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    <span class="token keyword">int</span> <span class="token function">sumFourDivisors</span><span class="token punctuation">(</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> t <span class="token operator">:</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            ans <span class="token operator">+=</span> <span class="token function">gen</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>unordered_map<span class="token operator"><</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span> Solution<span class="token double-colon punctuation">::</span>cache<span class="token punctuation">;</span><br></code></pre> <br><blockquote> <br> <p>同步发文于<a href="https://letmefly.blog.csdn.net/article/details/156575425" rel="nofollow">CSDN</a>和我的<a href="https://blog.letmefly.xyz/" rel="nofollow">个人博客</a>，原创不易，转载经作者同意后请附上<a href="https://blog.letmefly.xyz/2026/01/04/LeetCode%201390.%E5%9B%9B%E5%9B%A0%E6%95%B0/" rel="nofollow">原文链接</a>哦~</p> <br> <p>千篇源码题解<a href="https://github.com/LetMeFly666/LeetCode">已开源</a></p> <br></blockquote>