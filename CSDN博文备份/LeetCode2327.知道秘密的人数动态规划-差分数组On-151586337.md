<h2><a id="LetMeFly2327On_1"></a>【LetMeFly】2327.知道秘密的人数：动态规划/差分数组O(n)</h2> <br><p>力扣题目链接：<a href="https://leetcode.cn/problems/number-of-people-aware-of-a-secret/" rel="nofollow">https://leetcode.cn/problems/number-of-people-aware-of-a-secret/</a></p> <br><p>在第 <code>1</code> 天，有一个人发现了一个秘密。</p> <br><p>给你一个整数 <code>delay</code> ，表示每个人会在发现秘密后的 <code>delay</code> 天之后，<strong>每天</strong> 给一个新的人 <strong>分享</strong> 秘密。同时给你一个整数 <code>forget</code> ，表示每个人在发现秘密 <code>forget</code> 天之后会 <strong>忘记</strong> 这个秘密。一个人 <strong>不能</strong> 在忘记秘密那一天及之后的日子里分享秘密。</p> <br><p>给你一个整数 <code>n</code> ，请你返回在第 <code>n</code> 天结束时，知道秘密的人数。由于答案可能会很大，请你将结果对 <code>10<sup>9</sup> + 7</code> <strong>取余</strong> 后返回。</p> <br><p> </p> <br><p><strong>示例 1：</strong></p> <br><pre><b>输入：</b>n = 6, delay = 2, forget = 4<br><b>输出：</b>5<br><strong>解释：</strong><br>第 1 天：假设第一个人叫 A 。（一个人知道秘密）<br>第 2 天：A 是唯一一个知道秘密的人。（一个人知道秘密）<br>第 3 天：A 把秘密分享给 B 。（两个人知道秘密）<br>第 4 天：A 把秘密分享给一个新的人 C 。（三个人知道秘密）<br>第 5 天：A 忘记了秘密，B 把秘密分享给一个新的人 D 。（三个人知道秘密）<br>第 6 天：B 把秘密分享给 E，C 把秘密分享给 F 。（五个人知道秘密）<br></pre> <br><p><strong>示例 2：</strong></p> <br><pre><b>输入：</b>n = 4, delay = 1, forget = 3<br><b>输出：</b>6<br><strong>解释：</strong><br>第 1 天：第一个知道秘密的人为 A 。（一个人知道秘密）<br>第 2 天：A 把秘密分享给 B 。（两个人知道秘密）<br>第 3 天：A 和 B 把秘密分享给 2 个新的人 C 和 D 。（四个人知道秘密）<br>第 4 天：A 忘记了秘密，B、C、D 分别分享给 3 个新的人。（六个人知道秘密）<br></pre> <br><p> </p> <br><p><strong>提示：</strong></p> <br><ul><li><code>2 <= n <= 1000</code></li><li><code>1 <= delay < forget <= n</code></li></ul> <br><h3><a id="_48"></a>解题方法一：动态规划</h3> <br><blockquote> <br> <p>(为了方便描述)也可以把这道题看成细菌繁殖，细菌delay天成熟forget天死亡并且期间每天复制自身一份。</p> <br></blockquote> <br><p>令<code>dp[i]</code>代表第<code>i-1</code>天新生细菌的数量，初始值<code>dp[0]=1</code>，其余<code>dp[i]=0</code>。</p> <br><p>从第<code>1</code>天开始遍历到第<code>n</code>天，第<code>i</code>天出生的细菌可以在第<code>[i+delay, i+forget)</code>天分别产下一个新细菌，所以有<code>dp[i+j] += dp[i]</code>，其中<code>i+delay<=j<i+forget</code>。</p> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         n<br>        <br>        <br>         ×<br>        <br>        <br>         (<br>        <br>        <br>         f<br>        <br>        <br>         o<br>        <br>        <br>         r<br>        <br>        <br>         g<br>        <br>        <br>         e<br>        <br>        <br>         t<br>        <br>        <br>         −<br>        <br>        <br>         d<br>        <br>        <br>         e<br>        <br>        <br>         l<br>        <br>        <br>         a<br>        <br>        <br>         y<br>        <br>        <br>         )<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(n\times(forget-delay))<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="mord mathnormal" style="margin-right: 0.0278em;">or</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">y</span><span class="mclose">))</span></span></span></span></span></li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         n<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(n)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></li></ul> <br><h4><a id="AC_59"></a>AC代码</h4> <br><h5><a id="C_61"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-09-09 23:42:14<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-09-09 23:52:39<br> */</span><br><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token function">defined</span><span class="token punctuation">(</span>_WIN32<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">defined</span><span class="token punctuation">(</span>__APPLE__<span class="token punctuation">)</span></span></span><br><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"_[1,2]toVector.h"</span></span><br><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><br><br><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> ll MOD <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    <span class="token keyword">int</span> <span class="token function">peopleAwareOfSecret</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> delay<span class="token punctuation">,</span> <span class="token keyword">int</span> forget<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        vector<span class="token operator"><</span>ll<span class="token operator">></span> <span class="token function">dp</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator"><</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i <span class="token operator">+</span> delay<span class="token punctuation">;</span> j <span class="token operator"><</span> i <span class="token operator">+</span> forget <span class="token operator">&&</span> j <span class="token operator"><</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">%</span> MOD<span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        ll ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator"><</span> forget<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            ans <span class="token operator">=</span> <span class="token punctuation">(</span>ans <span class="token operator">+</span> dp<span class="token punctuation">[</span>n <span class="token operator">-</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">%</span> MOD<span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><h3><a id="_95"></a>解题方法二：查分数组</h3> <br><p>方法一中有一个耗时操作：对于第<code>i</code>天出生的细菌，令<code>i+delay</code>到<code>i+forget-1</code>天的细菌分别加上<code>dp[i]</code>。</p> <br><p>这个耗时操作不正是差分数组可以优化的吗？</p> <br><p>令<code>diff[i]=dp[i]-dp[i-1]</code>，想让<code>dp[i+delay]</code>到<code>dp[i+forget-1]</code>每个加<code>dp[i]</code>只需要令<code>diff[i+delay]+=dp[i]</code>和<code>diff[i+forget]-=dp[i]</code>。</p> <br><p>相应的，<code>dp[i]</code>就等于<code>sum(diff[0..i+1])</code>。</p> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         n<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(n)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         n<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(n)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></li></ul> <br><h4><a id="AC_108"></a>AC代码</h4> <br><h5><a id="C_110"></a>C++</h5> <br><h5><a id="C_112"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-09-09 23:42:14<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-09-11 10:49:54<br> */</span><br><span class="token keyword">using</span> ll <span class="token operator">=</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> ll MOD <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    <span class="token keyword">int</span> <span class="token function">peopleAwareOfSecret</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> delay<span class="token punctuation">,</span> <span class="token keyword">int</span> forget<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        vector<span class="token operator"><</span>ll<span class="token operator">></span> <span class="token function">diff</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        diff<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><br>        diff<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><br>        ll now <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator"><=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            now <span class="token operator">=</span> <span class="token punctuation">(</span>now <span class="token operator">+</span> diff<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">%</span> MOD<span class="token punctuation">;</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> forget <span class="token operator">></span> n<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                ans <span class="token operator">=</span> <span class="token punctuation">(</span>ans <span class="token operator">+</span> now<span class="token punctuation">)</span> <span class="token operator">%</span> MOD<span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> delay <span class="token operator"><=</span> n<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                diff<span class="token punctuation">[</span>i <span class="token operator">+</span> delay<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>diff<span class="token punctuation">[</span>i <span class="token operator">+</span> delay<span class="token punctuation">]</span> <span class="token operator">+</span> now<span class="token punctuation">)</span> <span class="token operator">%</span> MOD<span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> forget <span class="token operator"><=</span> n<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                diff<span class="token punctuation">[</span>i <span class="token operator">+</span> forget<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>diff<span class="token punctuation">[</span>i <span class="token operator">+</span> forget<span class="token punctuation">]</span> <span class="token operator">+</span> MOD <span class="token operator">-</span> now<span class="token punctuation">)</span> <span class="token operator">%</span> MOD<span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><blockquote> <br> <p>同步发文于<a href="https://letmefly.blog.csdn.net/article/details/151586337" rel="nofollow">CSDN</a>和我的<a href="https://blog.letmefly.xyz/" rel="nofollow">个人博客</a>，原创不易，转载经作者同意后请附上<a href="https://blog.letmefly.xyz/2025/09/11/LeetCode%202327.%E7%9F%A5%E9%81%93%E7%A7%98%E5%AF%86%E7%9A%84%E4%BA%BA%E6%95%B0/" rel="nofollow">原文链接</a>哦~</p> <br> <p>千篇源码题解<a href="https://github.com/LetMeFly666/LeetCode">已开源</a></p> <br></blockquote>