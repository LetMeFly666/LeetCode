<h2><a id="LetMeFly3164_II_1"></a>【LetMeFly】3164.优质数对的总数 II：哈希表+因式分解</h2> <br><p>力扣题目链接：<a href="https://leetcode.cn/problems/find-the-number-of-good-pairs-ii/" rel="nofollow">https://leetcode.cn/problems/find-the-number-of-good-pairs-ii/</a></p> <br><p>给你两个整数数组 <code>nums1</code> 和 <code>nums2</code>，长度分别为 <code>n</code> 和 <code>m</code>。同时给你一个<strong>正整数</strong> <code>k</code>。</p> <br><p>如果 <code>nums1[i]</code> 可以被 <code>nums2[j] * k</code> 整除，则称数对 <code>(i, j)</code> 为 <strong>优质数对</strong>（<code>0 <= i <= n - 1</code>, <code>0 <= j <= m - 1</code>）。</p> <br><p>返回<strong> 优质数对 </strong>的总数。</p> <br><p> </p> <br><p><strong class="example">示例 1：</strong></p> <br><div class="example-block"> <br> <p><strong>输入：</strong><span class="example-io">nums1 = [1,3,4], nums2 = [1,3,4], k = 1</span></p> <br></div> <br><p><strong>输出：</strong><span class="example-io">5</span></p> <br><p><strong>解释：</strong></p> <br><p>5个优质数对分别是 <code>(0, 0)</code>, <code>(1, 0)</code>, <code>(1, 1)</code>, <code>(2, 0)</code>, 和 <code>(2, 2)</code>。</p> <br><p><strong class="example">示例 2：</strong></p> <br><div class="example-block"> <br> <p><strong>输入：</strong><span class="example-io">nums1 = [1,2,4,12], nums2 = [2,4], k = 3</span></p> <br></div> <br><p><strong>输出：</strong><span class="example-io">2</span></p> <br><p><strong>解释：</strong></p> <br><p>2个优质数对分别是 <code>(3, 0)</code> 和 <code>(3, 1)</code>。</p> <br><p> </p> <br><p><strong>提示：</strong></p> <br><ul><li><code>1 <= n, m <= 10<sup>5</sup></code></li><li><code>1 <= nums1[i], nums2[j] <= 10<sup>6</sup></code></li><li><code>1 <= k <= 10<sup>3</sup></code></li></ul> <br><h3><a id="_49"></a>解题方法：哈希表+因式分解</h3> <br><p>遍历<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         n <br>        <br>       <br>         u <br>        <br>       <br>         m <br>        <br>       <br>         s <br>        <br>       <br>         1 <br>        <br>       <br>      <br>        nums1 <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mord">1</span></span></span></span></span>数组，对于其中的元素<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         a <br>        <br>       <br>      <br>        a <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></span>，求出<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         ⌊ <br>        <br>        <br>        <br>          a <br>         <br>        <br>          k <br>         <br>        <br>       <br>         ⌋ <br>        <br>       <br>      <br>        \lfloor\frac{a}{k}\rfloor <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.095em; vertical-align: -0.345em;"></span><span class="mopen">⌊</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.6954em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0315em;">k</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">⌋</span></span></span></span></span>的所有因数并存入哈希表中。</p> <br><p>遍历<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         n <br>        <br>       <br>         u <br>        <br>       <br>         m <br>        <br>       <br>         s <br>        <br>       <br>         2 <br>        <br>       <br>      <br>        nums2 <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mord">2</span></span></span></span></span>数组，累加其中元素在哈希表中出现的次数即为答案。</p> <br><p><strong>如何求一个数<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          t <br>         <br>        <br>       <br>         t <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span></span>的所有因数？</strong></p> <br><blockquote> <br> <p>用<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          i <br>         <br>        <br>       <br>         i <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span>从<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          1 <br>         <br>        <br>       <br>         1 <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>到<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>         <br>         <br>           t <br>          <br>         <br>        <br>       <br>         \sqrt{t} <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.04em; vertical-align: -0.1475em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8925em;"><span class="svg-align" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord" style="padding-left: 0.833em;"><span class="mord mathnormal">t</span></span></span><span class="" style="top: -2.8525em;"><span class="pstrut" style="height: 3em;"></span><span class="hide-tail" style="min-width: 0.853em; height: 1.08em;"> <br>            <svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"> <br>             <path d="M95,702<br>c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14<br>c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54<br>c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10<br>s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429<br>c69,-144,104.5,-217.7,106.5,-221<br>l0 -0<br>c5.3,-9.3,12,-14,20,-14<br>H400000v40H845.2724<br>s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7<br>c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z<br>M834 80h400000v40h-400000z"></path> <br>            </svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.1475em;"><span class=""></span></span></span></span></span></span></span></span></span>枚举，若<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          t <br>         <br>        <br>       <br>         t <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span></span>能整除<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          i <br>         <br>        <br>       <br>         i <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span>，则说明<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          i <br>         <br>        <br>       <br>         i <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span>和<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>         <br>          <br>          <br>            t <br>           <br>          <br>         <br>           i <br>          <br>         <br>        <br>       <br>         \frac{\sqrt t}{i} <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.383em; vertical-align: -0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.038em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.4093em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8982em;"><span class="svg-align" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathnormal mtight" style="padding-left: 0.833em;">t</span></span><span class="" style="top: -2.8582em;"><span class="pstrut" style="height: 3em;"></span><span class="hide-tail mtight" style="min-width: 0.853em; height: 1.08em;"> <br>                    <svg width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"> <br>                     <path d="M95,702<br>c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14<br>c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54<br>c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10<br>s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429<br>c69,-144,104.5,-217.7,106.5,-221<br>l0 -0<br>c5.3,-9.3,12,-14,20,-14<br>H400000v40H845.2724<br>s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7<br>c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z<br>M834 80h400000v40h-400000z"></path> <br>                    </svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.1418em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>都是<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          t <br>         <br>        <br>       <br>         t <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span></span>的因数。</p> <br> <p>（这个过程有点类似“求一个数是否为质数”。）</p> <br></blockquote> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          n <br>         <br>         <br>          <br>          <br>            M <br>           <br>          <br>            k <br>           <br>          <br>         <br>        <br>          + <br>         <br>        <br>          m <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(n\sqrt{\frac Mk}+m) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.84em; vertical-align: -0.5913em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.2487em;"><span class="svg-align" style="top: -3.8em;"><span class="pstrut" style="height: 3.8em;"></span><span class="mord" style="padding-left: 1em;"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8723em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0315em;">k</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.109em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span class="" style="top: -3.2087em;"><span class="pstrut" style="height: 3.8em;"></span><span class="hide-tail" style="min-width: 1.02em; height: 1.88em;"> <br>            <svg width="400em" height="1.88em" viewbox="0 0 400000 1944" preserveaspectratio="xMinYMin slice"> <br>             <path d="M983 90<br>l0 -0<br>c4,-6.7,10,-10,18,-10 H400000v40<br>H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7<br>s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744<br>c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30<br>c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722<br>c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5<br>c53.7,-170.3,84.5,-266.8,92.5,-289.5z<br>M1001 80h400000v40h-400000z"></path> <br>            </svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.5913em;"><span class=""></span></span></span></span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">m</span><span class="mclose">)</span></span></span></span></span>，其中<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          M <br>         <br>        <br>          = <br>         <br>        <br>          max <br>         <br>        <br>          ⁡ <br>         <br>        <br>          ( <br>         <br>        <br>          n <br>         <br>        <br>          u <br>         <br>        <br>          m <br>         <br>        <br>          s <br>         <br>        <br>          1 <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         M=\max(nums1) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.109em;">M</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mop">max</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>         <br>          <br>          <br>            M <br>           <br>          <br>            k <br>           <br>          <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(\sqrt{\frac Mk}) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.84em; vertical-align: -0.5913em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.2487em;"><span class="svg-align" style="top: -3.8em;"><span class="pstrut" style="height: 3.8em;"></span><span class="mord" style="padding-left: 1em;"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8723em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0315em;">k</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.109em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span class="" style="top: -3.2087em;"><span class="pstrut" style="height: 3.8em;"></span><span class="hide-tail" style="min-width: 1.02em; height: 1.88em;"> <br>            <svg width="400em" height="1.88em" viewbox="0 0 400000 1944" preserveaspectratio="xMinYMin slice"> <br>             <path d="M983 90<br>l0 -0<br>c4,-6.7,10,-10,18,-10 H400000v40<br>H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7<br>s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744<br>c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30<br>c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722<br>c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5<br>c53.7,-170.3,84.5,-266.8,92.5,-289.5z<br>M1001 80h400000v40h-400000z"></path> <br>            </svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.5913em;"><span class=""></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></li></ul> <br><h4><a id="AC_64"></a>AC代码</h4> <br><h5><a id="C_66"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ll<span class="token punctuation">;</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    ll <span class="token function">numberOfPairs</span><span class="token punctuation">(</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> nums1<span class="token punctuation">,</span> vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> nums2<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        ll ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        unordered_map<span class="token operator"><</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span> ma<span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> t <span class="token operator">:</span> nums1<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">%</span> k<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                <span class="token keyword">continue</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            t <span class="token operator">/=</span> k<span class="token punctuation">;</span><br>            <span class="token keyword">int</span> sqrt_ <span class="token operator">=</span> <span class="token function">sqrt</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator"><=</span> sqrt_<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">%</span> i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                    ma<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span><br>                    ma<span class="token punctuation">[</span>t <span class="token operator">/</span> i<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span><br>                <span class="token punctuation">}</span><br>            <span class="token punctuation">}</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>sqrt_ <span class="token operator">*</span> sqrt_ <span class="token operator">==</span> t<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                ma<span class="token punctuation">[</span>sqrt_<span class="token punctuation">]</span><span class="token operator">--</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> t <span class="token operator">:</span> nums2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            ans <span class="token operator">+=</span> ma<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><h5><a id="Go_99"></a>Go</h5> <br><pre><code class="prism language-go"><span class="token keyword">package</span> main<br><span class="token keyword">import</span> <span class="token string">"math"</span><br><br><span class="token keyword">func</span> <span class="token function">numberOfPairs</span><span class="token punctuation">(</span>nums1 <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> nums2 <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> k <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int64</span> <span class="token punctuation">{<!-- --></span><br>    ma <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><br>    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> t <span class="token operator">:=</span> <span class="token keyword">range</span> nums1 <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">if</span> t <span class="token operator">%</span> k <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">continue</span><br>        <span class="token punctuation">}</span><br>        t <span class="token operator">/=</span> k<br>        sqrt_ <span class="token operator">:=</span> <span class="token function">int</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span><span class="token function">Sqrt</span><span class="token punctuation">(</span><span class="token function">float64</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator"><=</span> sqrt_<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> t <span class="token operator">%</span> i <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{<!-- --></span><br>                ma<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">++</span><br>                ma<span class="token punctuation">[</span>t <span class="token operator">/</span> i<span class="token punctuation">]</span><span class="token operator">++</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">if</span> sqrt_ <span class="token operator">*</span> sqrt_ <span class="token operator">==</span> t <span class="token punctuation">{<!-- --></span><br>            ma<span class="token punctuation">[</span>sqrt_<span class="token punctuation">]</span><span class="token operator">--</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>    ans <span class="token operator">:=</span> <span class="token function">int64</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><br>    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> t <span class="token operator">:=</span> <span class="token keyword">range</span> nums2 <span class="token punctuation">{<!-- --></span><br>        ans <span class="token operator">+=</span> <span class="token function">int64</span><span class="token punctuation">(</span>ma<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">return</span> ans<br><span class="token punctuation">}</span><br></code></pre> <br><h5><a id="Java_131"></a>Java</h5> <br><pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span><span class="token punctuation">;</span><br><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br>    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">numberOfPairs</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums1<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums2<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation"><</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span> ma <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation"><</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> t <span class="token operator">:</span> nums1<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">%</span> k <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                <span class="token keyword">continue</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            t <span class="token operator">/=</span> k<span class="token punctuation">;</span><br>            <span class="token keyword">int</span> sqrt_ <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator"><=</span> sqrt_<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">%</span> i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                    ma<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token operator">::</span><span class="token function">sum</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                    ma<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>t <span class="token operator">/</span> i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token operator">::</span><span class="token function">sum</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                <span class="token punctuation">}</span><br>            <span class="token punctuation">}</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>sqrt_ <span class="token operator">*</span> sqrt_ <span class="token operator">==</span> t<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                ma<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>sqrt_<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token operator">::</span><span class="token function">sum</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">long</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> t <span class="token operator">:</span> nums2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            ans <span class="token operator">+=</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span>ma<span class="token punctuation">.</span><span class="token function">getOrDefault</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br></code></pre> <br><h5><a id="Python_165"></a>Python</h5> <br><pre><code class="prism language-python"><span class="token keyword">from</span> typing <span class="token keyword">import</span> List<br><span class="token keyword">from</span> collections <span class="token keyword">import</span> defaultdict<br><span class="token keyword">from</span> math <span class="token keyword">import</span> sqrt<br><br><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span><br>    <span class="token keyword">def</span> <span class="token function">numberOfPairs</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums1<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums2<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> k<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span><br>        ma <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span><br>        <span class="token keyword">for</span> t <span class="token keyword">in</span> nums1<span class="token punctuation">:</span><br>            <span class="token keyword">if</span> t <span class="token operator">%</span> k<span class="token punctuation">:</span><br>                <span class="token keyword">continue</span><br>            t <span class="token operator">//=</span> k<br>            sqrt_ <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>sqrt<span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span><br>            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> sqrt_ <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span><br>                <span class="token keyword">if</span> t <span class="token operator">%</span> i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span><br>                    ma<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span><br>                    ma<span class="token punctuation">[</span>t <span class="token operator">//</span> i<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span><br>            <span class="token keyword">if</span> sqrt_ <span class="token operator">*</span> sqrt_ <span class="token operator">==</span> t<span class="token punctuation">:</span><br>                ma<span class="token punctuation">[</span>sqrt_<span class="token punctuation">]</span> <span class="token operator">-=</span> <span class="token number">1</span><br>        ans <span class="token operator">=</span> <span class="token number">0</span><br>        <span class="token keyword">for</span> t <span class="token keyword">in</span> nums2<span class="token punctuation">:</span><br>            ans <span class="token operator">+=</span> ma<span class="token punctuation">[</span>t<span class="token punctuation">]</span><br>        <span class="token keyword">return</span> ans<br></code></pre> <br><blockquote> <br> <p>同步发文于CSDN和我的<a href="https://blog.letmefly.xyz/" rel="nofollow">个人博客</a>，原创不易，转载经作者同意后请附上<a href="https://blog.letmefly.xyz/2024/10/11/LeetCode%203164.%E4%BC%98%E8%B4%A8%E6%95%B0%E5%AF%B9%E7%9A%84%E6%80%BB%E6%95%B0II/" rel="nofollow">原文链接</a>哦~</p> <br> <p>Tisfy：<a href="https://letmefly.blog.csdn.net/article/details/142865441" rel="nofollow">https://letmefly.blog.csdn.net/article/details/142865441</a></p> <br></blockquote>