<h2><a id="LetMeFly3013_IIk1___1"></a>【LetMeFly】3013.将数组分成最小总代价的子数组 II：两个堆维护k-1小 + 滑动窗口</h2> <br><p>力扣题目链接：<a href="https://leetcode.cn/problems/divide-an-array-into-subarrays-with-minimum-cost-ii/" rel="nofollow">https://leetcode.cn/problems/divide-an-array-into-subarrays-with-minimum-cost-ii/</a></p> <br><p>给你一个下标从 <strong>0</strong> 开始长度为 <code>n</code> 的整数数组 <code>nums</code> 和两个 <strong>正</strong> 整数 <code>k</code> 和 <code>dist</code> 。</p> <br><p>一个数组的 <strong>代价</strong> 是数组中的 <strong>第一个</strong> 元素。比方说，<code>[1,2,3]</code> 的代价为 <code>1</code> ，<code>[3,4,1]</code> 的代价为 <code>3</code> 。</p> <br><p>你需要将 <code>nums</code> 分割成 <code>k</code> 个 <strong>连续且互不相交</strong> 的子数组，满足 <strong>第二</strong> 个子数组与第 <code>k</code> 个子数组中第一个元素的下标距离 <strong>不超过</strong> <code>dist</code> 。换句话说，如果你将 <code>nums</code> 分割成子数组 <code>nums[0..(i<sub>1</sub> - 1)], nums[i<sub>1</sub>..(i<sub>2</sub> - 1)], ..., nums[i<sub>k-1</sub>..(n - 1)]</code> ，那么它需要满足 <code>i<sub>k-1</sub> - i<sub>1</sub> <= dist</code> 。</p> <br><p>请你返回这些子数组的 <strong>最小</strong> 总代价。</p> <br><p> </p> <br><p><strong class="example">示例 1：</strong></p> <br><pre><b>输入：</b>nums = [1,3,2,6,4,2], k = 3, dist = 3<br><b>输出：</b>5<br><b>解释：</b>将数组分割成 3 个子数组的最优方案是：[1,3] ，[2,6,4] 和 [2] 。这是一个合法分割，因为 i<sub>k-1</sub> - i<sub>1</sub> 等于 5 - 2 = 3 ，等于 dist 。总代价为 nums[0] + nums[2] + nums[5] ，也就是 1 + 2 + 2 = 5 。<br>5 是分割成 3 个子数组的最小总代价。<br></pre> <br><p><strong class="example">示例 2：</strong></p> <br><pre><strong>输入：</strong>nums = [10,1,2,2,2,1], k = 4, dist = 3<br><b>输出：</b>15<br><b>解释：</b>将数组分割成 4 个子数组的最优方案是：[10] ，[1] ，[2] 和 [2,2,1] 。这是一个合法分割，因为 i<sub>k-1</sub> - i<sub>1</sub> 等于 3 - 1 = 2 ，小于 dist 。总代价为 nums[0] + nums[1] + nums[2] + nums[3] ，也就是 10 + 1 + 2 + 2 = 15 。<br>分割 [10] ，[1] ，[2,2,2] 和 [1] 不是一个合法分割，因为 i<sub>k-1</sub> 和 i<sub>1</sub> 的差为 5 - 1 = 4 ，大于 dist 。<br>15 是分割成 4 个子数组的最小总代价。<br></pre> <br><p><strong class="example">示例 3：</strong></p> <br><pre><b>输入：</b>nums = [10,8,18,9], k = 3, dist = 1<br><b>输出：</b>36<br><b>解释：</b>将数组分割成 4 个子数组的最优方案是：[10] ，[8] 和 [18,9] 。这是一个合法分割，因为 i<sub>k-1</sub> - i<sub>1</sub> 等于 2 - 1 = 1 ，等于 dist 。总代价为 nums[0] + nums[1] + nums[2] ，也就是 10 + 8 + 18 = 36 。<br>分割 [10] ，[8,18] 和 [9] 不是一个合法分割，因为 i<sub>k-1</sub> 和 i<sub>1</sub> 的差为 3 - 1 = 2 ，大于 dist 。<br>36 是分割成 3 个子数组的最小总代价。<br></pre> <br><p> </p> <br><p><strong>提示：</strong></p> <br><ul><li><code>3 <= n <= 10<sup>5</sup></code></li><li><code>1 <= nums[i] <= 10<sup>9</sup></code></li><li><code>3 <= k <= n</code></li><li><code>k - 2 <= dist <= n - 2</code></li></ul> <br><h3><a id="___57"></a>解题方法：有序集合 + 滑动窗口</h3> <br><p><span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        n<br>       <br>       <br>        u<br>       <br>       <br>        m<br>       <br>       <br>        s<br>       <br>      <br>      <br>       nums<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>第一个元素必选，剩下<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        k<br>       <br>       <br>        −<br>       <br>       <br>        1<br>       <br>      <br>      <br>       k-1<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord mathnormal" style="margin-right: 0.0315em;">k</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>个元素的起始位置间隔必须<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        ≤<br>       <br>       <br>        d<br>       <br>       <br>        i<br>       <br>       <br>        s<br>       <br>       <br>        t<br>       <br>      <br>      <br>       \leq dist<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7719em; vertical-align: -0.136em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span>。使用一个大小为<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        d<br>       <br>       <br>        i<br>       <br>       <br>        s<br>       <br>       <br>        t<br>       <br>       <br>        +<br>       <br>       <br>        1<br>       <br>      <br>      <br>       dist+1<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>的滑动窗口，每次求这个窗口中<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        k<br>       <br>       <br>        −<br>       <br>       <br>        1<br>       <br>      <br>      <br>       k-1<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord mathnormal" style="margin-right: 0.0315em;">k</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>小元素的和。</p> <br><p>问题变成了滑动窗口向右滑动过程中，窗口中不断新增一个元素、移除一个元素的状态下如何保持计算<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        k<br>       <br>       <br>        −<br>       <br>       <br>        1<br>       <br>      <br>      <br>       k-1<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord mathnormal" style="margin-right: 0.0315em;">k</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>小的元素有哪些：</p> <br><blockquote> <br> <p>我们可以使用两个有序集合，一个叫<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         s<br>        <br>        <br>         t<br>        <br>        <br>         a<br>        <br>        <br>         g<br>        <br>        <br>         e<br>        <br>       <br>       <br>        stage<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span></span></span></span></span>代表(正在舞台上的)<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         k<br>        <br>        <br>         −<br>        <br>        <br>         1<br>        <br>       <br>       <br>        k-1<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord mathnormal" style="margin-right: 0.0315em;">k</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>小元素，一个叫<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         c<br>        <br>        <br>         a<br>        <br>        <br>         n<br>        <br>        <br>         d<br>        <br>        <br>         i<br>        <br>        <br>         d<br>        <br>        <br>         a<br>        <br>        <br>         t<br>        <br>        <br>         e<br>        <br>       <br>       <br>        candidate<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal">an</span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span></span></span></span></span>代表在窗口中但(暂)未被选中的元素。</p> <br> <p>窗口右移过程中，假设要新加入窗口的元素是<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         i<br>        <br>        <br>         n<br>        <br>       <br>       <br>        in<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6595em;"></span><span class="mord mathnormal">in</span></span></span></span></span>，移除窗口的元素是<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         o<br>        <br>        <br>         u<br>        <br>        <br>         t<br>        <br>       <br>       <br>        out<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span></span></span></span></span>，</p> <br> <p>对于<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         o<br>        <br>        <br>         u<br>        <br>        <br>         t<br>        <br>       <br>       <br>        out<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span></span></span></span></span>有：</p> <br> <ul><li>如果<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>      <br>       <br>        <br>         <br>          o<br>         <br>         <br>          u<br>         <br>         <br>          t<br>         <br>        <br>        <br>         out<br>        <br>       <br>      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span></span></span></span></span>在<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>      <br>       <br>        <br>         <br>          c<br>         <br>         <br>          a<br>         <br>         <br>          n<br>         <br>         <br>          d<br>         <br>         <br>          i<br>         <br>         <br>          d<br>         <br>         <br>          a<br>         <br>         <br>          t<br>         <br>         <br>          e<br>         <br>        <br>        <br>         candidate<br>        <br>       <br>      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal">an</span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span></span></span></span></span>候选集合中，那么<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>      <br>       <br>        <br>         <br>          o<br>         <br>         <br>          u<br>         <br>         <br>          t<br>         <br>        <br>        <br>         out<br>        <br>       <br>      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span></span></span></span></span>永无上台之日，直接移出候选</li><li>如果<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>      <br>       <br>        <br>         <br>          o<br>         <br>         <br>          u<br>         <br>         <br>          t<br>         <br>        <br>        <br>         out<br>        <br>       <br>      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span></span></span></span></span>在<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>      <br>       <br>        <br>         <br>          s<br>         <br>         <br>          t<br>         <br>         <br>          a<br>         <br>         <br>          g<br>         <br>         <br>          e<br>         <br>        <br>        <br>         stage<br>        <br>       <br>      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span></span></span></span></span>选中集合中，那么<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>      <br>       <br>        <br>         <br>          o<br>         <br>         <br>          u<br>         <br>         <br>          t<br>         <br>        <br>        <br>         out<br>        <br>       <br>      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span></span></span></span></span>是时候退役了，移出<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>      <br>       <br>        <br>         <br>          s<br>         <br>         <br>          t<br>         <br>         <br>          a<br>         <br>         <br>          g<br>         <br>         <br>          e<br>         <br>        <br>        <br>         stage<br>        <br>       <br>      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span></span></span></span></span>集合，并更新集合中元素之和</li></ul> <br> <p>对于<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         i<br>        <br>        <br>         n<br>        <br>       <br>       <br>        in<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6595em;"></span><span class="mord mathnormal">in</span></span></span></span></span>有：</p> <br> <ul><li>如果<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>      <br>       <br>        <br>         <br>          i<br>         <br>         <br>          n<br>         <br>        <br>        <br>         in<br>        <br>       <br>      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6595em;"></span><span class="mord mathnormal">in</span></span></span></span></span>比<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>      <br>       <br>        <br>         <br>          s<br>         <br>         <br>          t<br>         <br>         <br>          a<br>         <br>         <br>          g<br>         <br>         <br>          e<br>         <br>        <br>        <br>         stage<br>        <br>       <br>      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span></span></span></span></span>中最大元素小，说明更优秀的人来了，移出<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>      <br>       <br>        <br>         <br>          s<br>         <br>         <br>          t<br>         <br>         <br>          a<br>         <br>         <br>          g<br>         <br>         <br>          e<br>         <br>        <br>        <br>         stage<br>        <br>       <br>      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span></span></span></span></span>集合中最大的那个，将<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>      <br>       <br>        <br>         <br>          i<br>         <br>         <br>          n<br>         <br>        <br>        <br>         in<br>        <br>       <br>      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6595em;"></span><span class="mord mathnormal">in</span></span></span></span></span>加入<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>      <br>       <br>        <br>         <br>          s<br>         <br>         <br>          t<br>         <br>         <br>          a<br>         <br>         <br>          g<br>         <br>         <br>          e<br>         <br>        <br>        <br>         stage<br>        <br>       <br>      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span></span></span></span></span>集合，并更新<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>      <br>       <br>        <br>         <br>          s<br>         <br>         <br>          t<br>         <br>         <br>          a<br>         <br>         <br>          g<br>         <br>         <br>          e<br>         <br>        <br>        <br>         stage<br>        <br>       <br>      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span></span></span></span></span>集合中元素之和</li><li>否则，将<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>      <br>       <br>        <br>         <br>          i<br>         <br>         <br>          n<br>         <br>        <br>        <br>         in<br>        <br>       <br>      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6595em;"></span><span class="mord mathnormal">in</span></span></span></span></span>加入候选</li></ul> <br> <p>之后进行<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         s<br>        <br>        <br>         t<br>        <br>        <br>         a<br>        <br>        <br>         g<br>        <br>        <br>         e<br>        <br>       <br>       <br>        stage<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span></span></span></span></span>集合大小的调整：</p> <br> <ul><li>如果<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>      <br>       <br>        <br>         <br>          s<br>         <br>         <br>          t<br>         <br>         <br>          a<br>         <br>         <br>          g<br>         <br>         <br>          e<br>         <br>        <br>        <br>         stage<br>        <br>       <br>      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span></span></span></span></span>集合小于<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>      <br>       <br>        <br>         <br>          k<br>         <br>         <br>          −<br>         <br>         <br>          1<br>         <br>        <br>        <br>         k-1<br>        <br>       <br>      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord mathnormal" style="margin-right: 0.0315em;">k</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>，说明有人退役暂无人顶上，从<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>      <br>       <br>        <br>         <br>          c<br>         <br>         <br>          a<br>         <br>         <br>          n<br>         <br>         <br>          d<br>         <br>         <br>          i<br>         <br>         <br>          d<br>         <br>         <br>          a<br>         <br>         <br>          t<br>         <br>         <br>          e<br>         <br>        <br>        <br>         candidate<br>        <br>       <br>      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal">an</span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span></span></span></span></span>中选最小的那个顶上(移出<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>      <br>       <br>        <br>         <br>          c<br>         <br>         <br>          a<br>         <br>         <br>          n<br>         <br>         <br>          d<br>         <br>         <br>          i<br>         <br>         <br>          d<br>         <br>         <br>          a<br>         <br>         <br>          t<br>         <br>         <br>          e<br>         <br>        <br>        <br>         candidate<br>        <br>       <br>      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal">an</span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span></span></span></span></span>并加入<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>      <br>       <br>        <br>         <br>          s<br>         <br>         <br>          t<br>         <br>         <br>          a<br>         <br>         <br>          g<br>         <br>         <br>          e<br>         <br>        <br>        <br>         stage<br>        <br>       <br>      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span></span></span></span></span>)，并更新<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>      <br>       <br>        <br>         <br>          s<br>         <br>         <br>          t<br>         <br>         <br>          a<br>         <br>         <br>          g<br>         <br>         <br>          e<br>         <br>        <br>        <br>         stage<br>        <br>       <br>      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span></span></span></span></span>集合中元素之和</li><li>如果<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>      <br>       <br>        <br>         <br>          s<br>         <br>         <br>          t<br>         <br>         <br>          a<br>         <br>         <br>          g<br>         <br>         <br>          e<br>         <br>        <br>        <br>         stage<br>        <br>       <br>      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span></span></span></span></span>集合大于<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>      <br>       <br>        <br>         <br>          k<br>         <br>         <br>          +<br>         <br>         <br>          1<br>         <br>        <br>        <br>         k+1<br>        <br>       <br>      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7778em; vertical-align: -0.0833em;"></span><span class="mord mathnormal" style="margin-right: 0.0315em;">k</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>，说明有更优秀的人来了，要把<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>      <br>       <br>        <br>         <br>          s<br>         <br>         <br>          t<br>         <br>         <br>          a<br>         <br>         <br>          g<br>         <br>         <br>          e<br>         <br>        <br>        <br>         stage<br>        <br>       <br>      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span></span></span></span></span>中最大的那个移出并加入到<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>      <br>       <br>        <br>         <br>          c<br>         <br>         <br>          a<br>         <br>         <br>          n<br>         <br>         <br>          d<br>         <br>         <br>          i<br>         <br>         <br>          d<br>         <br>         <br>          a<br>         <br>         <br>          t<br>         <br>         <br>          e<br>         <br>        <br>        <br>         candidate<br>        <br>       <br>      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal">an</span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span></span></span></span></span>，并更新<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>      <br>       <br>        <br>         <br>          s<br>         <br>         <br>          t<br>         <br>         <br>          a<br>         <br>         <br>          g<br>         <br>         <br>          e<br>         <br>        <br>        <br>         stage<br>        <br>       <br>      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span></span></span></span></span>集合中元素之和</li></ul> <br></blockquote> <br><p>整个滑动窗口移动的过程中，所有<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        s<br>       <br>       <br>        t<br>       <br>       <br>        a<br>       <br>       <br>        g<br>       <br>       <br>        e<br>       <br>      <br>      <br>       stage<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8095em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">e</span></span></span></span></span>元素和中最小的那个即为答案。</p> <br><p>为了方便计算，我们开局直接把<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        k<br>       <br>      <br>      <br>       k<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal" style="margin-right: 0.0315em;">k</span></span></span></span></span>减一。</p> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         n<br>        <br>        <br>         log<br>        <br>        <br>         ⁡<br>        <br>        <br>         d<br>        <br>        <br>         i<br>        <br>        <br>         s<br>        <br>        <br>         t<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(n\log dist)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mop">lo<span style="margin-right: 0.0139em;">g</span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></span></li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         d<br>        <br>        <br>         i<br>        <br>        <br>         s<br>        <br>        <br>         t<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(dist)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></span></li></ul> <br><h4><a id="AC_90"></a>AC代码</h4> <br><h5><a id="C_92"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @LastEditTime: 2026-02-03 22:11:11<br> */</span><br><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ll<span class="token punctuation">;</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    ll <span class="token function">minimumCost</span><span class="token punctuation">(</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">,</span> <span class="token keyword">int</span> dist<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        k<span class="token operator">--</span><span class="token punctuation">;</span><br>        multiset<span class="token operator"><</span>ll<span class="token operator">></span> <span class="token function">stage</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> nums<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> dist <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> candidate<span class="token punctuation">;</span><br>        ll ans <span class="token operator">=</span> <span class="token function">accumulate</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nums<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> dist <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0ll</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">while</span> <span class="token punctuation">(</span>stage<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> k<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                <span class="token keyword">int</span> retiree <span class="token operator">=</span> <span class="token operator">*</span>stage<span class="token punctuation">.</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                stage<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token function">prev</span><span class="token punctuation">(</span>stage<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                ans <span class="token operator">-=</span> retiree<span class="token punctuation">;</span><br>                candidate<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>retiree<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br><br>        ll nowAns <span class="token operator">=</span> ans<span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> end <span class="token operator">=</span> dist <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span> end <span class="token operator"><</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> end<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">int</span> in <span class="token operator">=</span> nums<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">,</span> out <span class="token operator">=</span> nums<span class="token punctuation">[</span>end <span class="token operator">-</span> dist <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>            <br>            <span class="token comment">// out</span><br>            multiset<span class="token operator"><</span>ll<span class="token operator">></span><span class="token double-colon punctuation">::</span>iterator it <span class="token operator">=</span> candidate<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> candidate<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                candidate<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span><br>                stage<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>stage<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>out<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                nowAns <span class="token operator">-=</span> out<span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br><br>            <span class="token comment">// in</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>in <span class="token operator"><</span> <span class="token operator">*</span>stage<span class="token punctuation">.</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                stage<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span><br>                nowAns <span class="token operator">+=</span> in<span class="token punctuation">;</span><br>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span><br>                candidate<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br><br>            <span class="token comment">// resize</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>stage<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                <span class="token keyword">int</span> newActor <span class="token operator">=</span> <span class="token operator">*</span>candidate<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                candidate<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>candidate<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                stage<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>newActor<span class="token punctuation">)</span><span class="token punctuation">;</span><br>                nowAns <span class="token operator">+=</span> newActor<span class="token punctuation">;</span><br>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>stage<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> k <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                <span class="token keyword">int</span> retiree <span class="token operator">=</span> <span class="token operator">*</span>stage<span class="token punctuation">.</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                stage<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token function">prev</span><span class="token punctuation">(</span>stage<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                nowAns <span class="token operator">-=</span> retiree<span class="token punctuation">;</span><br>                candidate<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>retiree<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br><br>            ans <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span> nowAns<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token function">defined</span><span class="token punctuation">(</span>_WIN32<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">defined</span><span class="token punctuation">(</span>__APPLE__<span class="token punctuation">)</span></span></span><br><span class="token comment">/*<br>[1,3,2,6,4,2]<br>3<br>3<br><br>5<br>*/</span><br><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>    string s<span class="token punctuation">;</span><br>    <span class="token keyword">int</span> a<span class="token punctuation">,</span> b<span class="token punctuation">;</span><br>    <span class="token keyword">while</span> <span class="token punctuation">(</span>cin <span class="token operator">>></span> s <span class="token operator">>></span> a <span class="token operator">>></span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        Solution sol<span class="token punctuation">;</span><br>        vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span> v <span class="token operator">=</span> <span class="token function">stringToVector</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        cout <span class="token operator"><<</span> sol<span class="token punctuation">.</span><span class="token function">minimumCost</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator"><<</span> endl<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><br></code></pre> <br><blockquote> <br> <p>同步发文于<a href="https://letmefly.blog.csdn.net/article/details/157700064" rel="nofollow">CSDN</a>和我的<a href="https://blog.letmefly.xyz/" rel="nofollow">个人博客</a>，原创不易，转载经作者同意后请附上<a href="https://blog.letmefly.xyz/2026/02/03/LeetCode%203013.%E5%B0%86%E6%95%B0%E7%BB%84%E5%88%86%E6%88%90%E6%9C%80%E5%B0%8F%E6%80%BB%E4%BB%A3%E4%BB%B7%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84II/" rel="nofollow">原文链接</a>哦~</p> <br> <p>千篇源码题解<a href="https://github.com/LetMeFly666/LeetCode">已开源</a></p> <br></blockquote>