<h2><a id="LetMeFly3453_I_1"></a>【LetMeFly】3453.分割正方形 I：二分查找</h2> <br><p>力扣题目链接：<a href="https://leetcode.cn/problems/separate-squares-i/" rel="nofollow">https://leetcode.cn/problems/separate-squares-i/</a></p> <br><p>给你一个二维整数数组 <code>squares</code> ，其中 <code>squares[i] = [x<sub>i</sub>, y<sub>i</sub>, l<sub>i</sub>]</code> 表示一个与 x 轴平行的正方形的左下角坐标和正方形的边长。</p> <br><p>找到一个<strong>最小的</strong> y 坐标，它对应一条水平线，该线需要满足它以上正方形的总面积 <strong>等于</strong> 该线以下正方形的总面积。</p> <br><p>答案如果与实际答案的误差在 <code>10<sup>-5</sup></code> 以内，将视为正确答案。</p> <br><p><strong>注意</strong>：正方形 <strong>可能会 </strong>重叠。重叠区域应该被 <strong>多次计数 </strong>。</p> <br><p> </p> <br><p><strong class="example">示例 1：</strong></p> <br><div class="example-block"> <br> <p><strong>输入：</strong> <span class="example-io">squares = [[0,0,1],[2,2,1]]</span></p> <br></div><br><p><strong>输出：</strong> <span class="example-io">1.00000</span></p> <br><p><strong>解释：</strong></p> <br><p><img alt="" src="https://i-blog.csdnimg.cn/img_convert/a8217b7babaada24579c30205f7403db.png" /></p> <br><p>任何在 <code>y = 1</code> 和 <code>y = 2</code> 之间的水平线都会有 1 平方单位的面积在其上方，1 平方单位的面积在其下方。最小的 y 坐标是 1。</p> <br><p><strong class="example">示例 2：</strong></p> <br><div class="example-block"> <br> <p><strong>输入：</strong> <span class="example-io">squares = [[0,0,2],[1,1,1]]</span></p> <br></div><br><p><strong>输出：</strong> <span class="example-io">1.16667</span></p> <br><p><strong>解释：</strong></p> <br><p><img alt="" src="https://i-blog.csdnimg.cn/img_convert/f9babbd58f9c87ef9cc6aa2a478c775b.png" /></p> <br><p>面积如下：</p> <br><ul><li>线下的面积：<code>7/6 * 2 (红色) + 1/6 (蓝色) = 15/6 = 2.5</code>。</li><li>线上的面积：<code>5/6 * 2 (红色) + 5/6 (蓝色) = 15/6 = 2.5</code>。</li></ul> <br><p>由于线以上和线以下的面积相等，输出为 <code>7/6 = 1.16667</code>。</p> <br><p> </p> <br><p><strong>提示：</strong></p> <br><ul><li><code>1 <= squares.length <= 5 * 10<sup>4</sup></code></li><li><code>squares[i] = [x<sub>i</sub>, y<sub>i</sub>, l<sub>i</sub>]</code></li><li><code>squares[i].length == 3</code></li><li><code>0 <= x<sub>i</sub>, y<sub>i</sub> <= 10<sup>9</sup></code></li><li><code>1 <= l<sub>i</sub> <= 10<sup>9</sup></code></li><li>所有正方形的总面积不超过 <code>10<sup>12</sup></code>。</li></ul> <br><h3><a id="_65"></a>解题方法：二分查找</h3> <br><p>先算下所有正方形的总面积，然后二分分割线高度，太低就高点太高就低点。</p> <br><p>终止条件：两次计算结果分割线移动返回不超过<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        <br>         10<br>        <br>        <br>         <br>          −<br>         <br>         <br>          5<br>         <br>        <br>       <br>      <br>      <br>       10^{-5}<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span></span></span>或直接进行<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        50<br>       <br>      <br>      <br>       50<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">50</span></span></span></span></span>次求值。</p> <br><pre><code class="prism language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token number">10</span><span class="token operator">**</span><span class="token number">9</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token operator">**</span><span class="token number">46</span><br><span class="token number">1.4210854715202004e-05</span><br><span class="token operator">>></span><span class="token operator">></span> <span class="token number">10</span><span class="token operator">**</span><span class="token number">9</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token operator">**</span><span class="token number">47</span><br><span class="token number">7.105427357601002e-06</span><br></code></pre> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         C<br>        <br>        <br>         ×<br>        <br>        <br>         l<br>        <br>        <br>         e<br>        <br>        <br>         n<br>        <br>        <br>         (<br>        <br>        <br>         s<br>        <br>        <br>         q<br>        <br>        <br>         u<br>        <br>        <br>         a<br>        <br>        <br>         r<br>        <br>        <br>         e<br>        <br>        <br>         s<br>        <br>        <br>         )<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(C\times len(squares))<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0715em;">C</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right: 0.0359em;">q</span><span class="mord mathnormal">u</span><span class="mord mathnormal">a</span><span class="mord mathnormal">res</span><span class="mclose">))</span></span></span></span></span>，其中<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         C<br>        <br>        <br>         =<br>        <br>        <br>         50<br>        <br>       <br>       <br>        C=50<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.0715em;">C</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">50</span></span></span></span></span>或<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         C<br>        <br>        <br>         =<br>        <br>        <br>         <br>          <br>           log<br>          <br>          <br>           ⁡<br>          <br>         <br>         <br>          2<br>         <br>        <br>        <br>         <br>          m<br>         <br>         <br>          a<br>         <br>         <br>          x<br>         <br>         <br>          (<br>         <br>         <br>          s<br>         <br>         <br>          q<br>         <br>         <br>          u<br>         <br>         <br>          i<br>         <br>         <br>          r<br>         <br>         <br>          e<br>         <br>         <br>          s<br>         <br>         <br>          [<br>         <br>         <br>          i<br>         <br>         <br>          ]<br>         <br>         <br>          [<br>         <br>         <br>          1<br>         <br>         <br>          ]<br>         <br>         <br>          )<br>         <br>         <br>          −<br>         <br>         <br>          m<br>         <br>         <br>          i<br>         <br>         <br>          n<br>         <br>         <br>          (<br>         <br>         <br>          s<br>         <br>         <br>          q<br>         <br>         <br>          u<br>         <br>         <br>          i<br>         <br>         <br>          r<br>         <br>         <br>          e<br>         <br>         <br>          s<br>         <br>         <br>          [<br>         <br>         <br>          i<br>         <br>         <br>          ]<br>         <br>         <br>          [<br>         <br>         <br>          1<br>         <br>         <br>          ]<br>         <br>         <br>          )<br>         <br>        <br>       <br>       <br>        C=\log_2{max(squires[i][1])-min(squires[i][1])}<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.0715em;">C</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mop"><span class="mop">lo<span style="margin-right: 0.0139em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.207em;"><span class="" style="top: -2.4559em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2441em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right: 0.0359em;">q</span><span class="mord mathnormal">u</span><span class="mord mathnormal">i</span><span class="mord mathnormal">res</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">])</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord mathnormal">min</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right: 0.0359em;">q</span><span class="mord mathnormal">u</span><span class="mord mathnormal">i</span><span class="mord mathnormal">res</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">])</span></span></span></span></span></span></li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         1<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(1)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></li></ul> <br><h4><a id="AC_81"></a>AC代码</h4> <br><h5><a id="C_83"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @LastEditTime: 2026-01-13 22:21:20<br> */</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">private</span><span class="token operator">:</span><br>    <span class="token keyword">double</span> half <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>    vector<span class="token operator"><</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">>></span> squares<span class="token punctuation">;</span><br><br>    <span class="token keyword">bool</span> <span class="token function">check</span><span class="token punctuation">(</span><span class="token keyword">double</span> h<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">double</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> s <span class="token operator">:</span> squares<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">double</span> from <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">double</span> to <span class="token operator">=</span> s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> s<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>            total <span class="token operator">+=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0.</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>to <span class="token operator">-</span> from<span class="token punctuation">)</span> <span class="token operator">*</span> s<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br><br>        <span class="token keyword">return</span> total <span class="token operator">></span> half<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    <span class="token keyword">double</span> <span class="token function">separateSquares</span><span class="token punctuation">(</span>vector<span class="token operator"><</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">>></span><span class="token operator">&</span> squares<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">long</span> <span class="token keyword">long</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment">// !!!!!记得初始化</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> s <span class="token operator">:</span> squares<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            total <span class="token operator">+=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">long</span> <span class="token keyword">long</span><span class="token punctuation">)</span> s<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> s<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">this</span><span class="token operator">-></span>squares <span class="token operator">=</span> <span class="token function">move</span><span class="token punctuation">(</span>squares<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        half <span class="token operator">=</span> <span class="token number">1.</span> <span class="token operator">*</span> total <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span><br><br>        <span class="token keyword">double</span> l <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">1000000000</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> _ <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> _ <span class="token operator"><</span> <span class="token number">50</span><span class="token punctuation">;</span> _<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">double</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">check</span><span class="token punctuation">(</span>mid<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                l <span class="token operator">=</span> mid<span class="token punctuation">;</span><br>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span><br>                r <span class="token operator">=</span> mid<span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> l<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><blockquote> <br> <p>同步发文于<a href="https://letmefly.blog.csdn.net/article/details/156915633" rel="nofollow">CSDN</a>和我的<a href="https://blog.letmefly.xyz/" rel="nofollow">个人博客</a>，原创不易，转载经作者同意后请附上<a href="https://blog.letmefly.xyz/2026/01/13/LeetCode%203453.%E5%88%86%E5%89%B2%E6%AD%A3%E6%96%B9%E5%BD%A2I/" rel="nofollow">原文链接</a>哦~</p> <br> <p>千篇源码题解<a href="https://github.com/LetMeFly666/LeetCode">已开源</a></p> <br></blockquote>