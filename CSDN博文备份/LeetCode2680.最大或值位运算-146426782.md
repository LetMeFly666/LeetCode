<h2><a id="LetMeFly2680_1"></a>【LetMeFly】2680.最大或值：位运算</h2> <br><p>力扣题目链接：<a href="https://leetcode.cn/problems/maximum-or/" rel="nofollow">https://leetcode.cn/problems/maximum-or/</a></p> <br><p>给你一个下标从 <strong>0</strong> 开始长度为 <code>n</code> 的整数数组 <code>nums</code> 和一个整数 <code>k</code> 。每一次操作中，你可以选择一个数并将它乘 <code>2</code> 。</p> <br><p>你最多可以进行 <code>k</code> 次操作，请你返回<em> </em><code>nums[0] | nums[1] | ... | nums[n - 1]</code> 的最大值。</p> <br><p><code>a | b</code> 表示两个整数 <code>a</code> 和 <code>b</code> 的 <strong>按位或</strong> 运算。</p> <br><p> </p> <br><p><strong>示例 1：</strong></p> <br><pre><b>输入：</b>nums = [12,9], k = 1<br><b>输出：</b>30<br><b>解释：</b>如果我们对下标为 1 的元素进行操作，新的数组为 [12,18] 。此时得到最优答案为 12 和 18 的按位或运算的结果，也就是 30 。<br></pre> <br><p><strong>示例 2：</strong></p> <br><pre><b>输入：</b>nums = [8,1,2], k = 2<br><b>输出：</b>35<br><b>解释：</b>如果我们对下标 0 处的元素进行操作，得到新数组 [32,1,2] 。此时得到最优答案为 32|1|2 = 35 。<br></pre> <br><p> </p> <br><p><strong>提示：</strong></p> <br><ul><li><code>1 <= nums.length <= 10<sup>5</sup></code></li><li><code>1 <= nums[i] <= 10<sup>9</sup></code></li><li><code>1 <= k <= 15</code></li></ul> <br><p>很不错的一道题！位运算的与或异或都考察了。</p> <br><h3><a id="_41"></a>解题方法一：前缀和</h3> <br><p>首先需要发现并理解的是：一定要每次都将“二进制下位数最长的那个数乘2”。</p> <br><blockquote> <br> <p>假如a二进制下是3位，b二进制下是2位，那么将b乘以2后和a或运算还是3位，一定不如将a乘以2变成2位大。</p> <br></blockquote> <br><p>二进制下长度最长的数有多个，如何选择呢？</p> <br><blockquote> <br> <p>无所谓，每个都试试呗。我们只需要逮着一个数一直乘以2共k次，判断所有选择中结果最大的那个就好了。</p> <br></blockquote> <br><p>这一听不是<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         O <br>        <br>       <br>         ( <br>        <br>        <br>        <br>          n <br>         <br>        <br>          2 <br>         <br>        <br>       <br>         ) <br>        <br>       <br>      <br>        O(n^2) <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.0641em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>吗，如何优化？</p> <br><blockquote> <br> <p>使用一个前缀和<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          p <br>         <br>        <br>          r <br>         <br>        <br>          e <br>         <br>        <br>          f <br>         <br>        <br>          i <br>         <br>        <br>          x <br>         <br>        <br>          [ <br>         <br>        <br>          i <br>         <br>        <br>          ] <br>         <br>        <br>       <br>         prefix[i] <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal">re</span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="mord mathnormal">i</span><span class="mord mathnormal">x</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span>代表从下标<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          0 <br>         <br>        <br>       <br>         0 <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">0</span></span></span></span></span>或到下标<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          i <br>         <br>        <br>       <br>         i <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span>这个元素的结果，“后缀和”<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          s <br>         <br>        <br>          u <br>         <br>        <br>          f <br>         <br>        <br>          f <br>         <br>        <br>          i <br>         <br>        <br>          x <br>         <br>        <br>          [ <br>         <br>        <br>          i <br>         <br>        <br>          ] <br>         <br>        <br>       <br>         suffix[i] <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right: 0.1076em;">ff</span><span class="mord mathnormal">i</span><span class="mord mathnormal">x</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span>代表从最后一个元素或到下标<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          i <br>         <br>        <br>       <br>         i <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span>的结果。</p> <br> <p>那么，如果将<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          n <br>         <br>        <br>          u <br>         <br>        <br>          m <br>         <br>        <br>          s <br>         <br>        <br>          [ <br>         <br>        <br>          i <br>         <br>        <br>          ] <br>         <br>        <br>       <br>         nums[i] <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span>乘以<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          k <br>         <br>        <br>       <br>         k <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal" style="margin-right: 0.0315em;">k</span></span></span></span></span>次<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          2 <br>         <br>        <br>       <br>         2 <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">2</span></span></span></span></span>的话，最终的或结果就是<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          p <br>         <br>        <br>          r <br>         <br>        <br>          e <br>         <br>        <br>          f <br>         <br>        <br>          i <br>         <br>        <br>          x <br>         <br>        <br>          [ <br>         <br>        <br>          i <br>         <br>        <br>          − <br>         <br>        <br>          1 <br>         <br>        <br>          ] <br>         <br>        <br>            <br>         <br>        <br>          ∣ <br>         <br>        <br>            <br>         <br>        <br>          n <br>         <br>        <br>          u <br>         <br>        <br>          m <br>         <br>        <br>          s <br>         <br>        <br>          [ <br>         <br>        <br>          i <br>         <br>        <br>          ] <br>         <br>        <br>          < <br>         <br>        <br>          < <br>         <br>        <br>          k <br>         <br>        <br>            <br>         <br>        <br>          ∣ <br>         <br>        <br>            <br>         <br>        <br>          s <br>         <br>        <br>          u <br>         <br>        <br>          f <br>         <br>        <br>          f <br>         <br>        <br>          i <br>         <br>        <br>          x <br>         <br>        <br>          [ <br>         <br>        <br>          i <br>         <br>        <br>          + <br>         <br>        <br>          1 <br>         <br>        <br>          ] <br>         <br>        <br>       <br>         prefix[i - 1]\ |\ nums[i] << k\ |\ suffix[i + 1] <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal">re</span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="mord mathnormal">i</span><span class="mord mathnormal">x</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace"> </span><span class="mord">∣</span><span class="mspace"> </span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel"><<</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0315em;">k</span><span class="mspace"> </span><span class="mord">∣</span><span class="mspace"> </span><span class="mord mathnormal">s</span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right: 0.1076em;">ff</span><span class="mord mathnormal">i</span><span class="mord mathnormal">x</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span></span>。</p> <br></blockquote> <br><p>所有的这些结果中，最大的那个即为答案。</p> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          l <br>         <br>        <br>          e <br>         <br>        <br>          n <br>         <br>        <br>          ( <br>         <br>        <br>          n <br>         <br>        <br>          u <br>         <br>        <br>          m <br>         <br>        <br>          s <br>         <br>        <br>          ) <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(len(nums)) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mclose">))</span></span></span></span></span></li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          l <br>         <br>        <br>          e <br>         <br>        <br>          n <br>         <br>        <br>          ( <br>         <br>        <br>          n <br>         <br>        <br>          u <br>         <br>        <br>          m <br>         <br>        <br>          s <br>         <br>        <br>          ) <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(len(nums)) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mclose">))</span></span></span></span></span></li></ul> <br><h4><a id="AC_62"></a>AC代码</h4> <br><h5><a id="C_64"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-03-21 15:09:09<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-03-21 15:17:06<br> */</span><br><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">_WIN32</span></span><br><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"_[1,2]toVector.h"</span></span><br><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><br><br><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ll<span class="token punctuation">;</span><br><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    ll <span class="token function">maximumOr</span><span class="token punctuation">(</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">suffix</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            suffix<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> suffix<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">|</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        ll ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">int</span> prefix <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator"><</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            ans <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span> <span class="token punctuation">(</span>ll<span class="token punctuation">)</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator"><<</span> k <span class="token operator">|</span> prefix <span class="token operator">|</span> suffix<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            prefix <span class="token operator">|=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><h3><a id="_97"></a>解题方法二：位运算</h3> <br><p>方法一空间复杂度为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         O <br>        <br>       <br>         ( <br>        <br>       <br>         n <br>        <br>       <br>         ) <br>        <br>       <br>      <br>        O(n) <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>，可否使用位运算优化？例如我单独将<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         n <br>        <br>       <br>         u <br>        <br>       <br>         m <br>        <br>       <br>         s <br>        <br>       <br>         [ <br>        <br>       <br>         i <br>        <br>       <br>         ] <br>        <br>       <br>      <br>        nums[i] <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span>拎出来左移<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         k <br>        <br>       <br>      <br>        k <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal" style="margin-right: 0.0315em;">k</span></span></span></span></span>次的话，如何在<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         O <br>        <br>       <br>         ( <br>        <br>       <br>         1 <br>        <br>       <br>         ) <br>        <br>       <br>      <br>        O(1) <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>空间下快速判断出剩下所有元素的或值为多少？</p> <br><blockquote> <br> <p>假设数组中所有元素或运算的结果为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          a <br>         <br>        <br>          l <br>         <br>        <br>          l <br>         <br>        <br>          O <br>         <br>        <br>          r <br>         <br>        <br>       <br>         allOr <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0278em;">llO</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span></span></span></span></span>：</p> <br> <ul><li> <p>对于<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>        <br>         <br>          <br>          <br>            n <br>           <br>          <br>            u <br>           <br>          <br>            m <br>           <br>          <br>            s <br>           <br>          <br>            [ <br>           <br>          <br>            i <br>           <br>          <br>            ] <br>           <br>          <br>         <br>           nums[i] <br>          <br>         <br>       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span>二进制下的某个<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>        <br>         <br>          <br>          <br>            1 <br>           <br>          <br>         <br>           1 <br>          <br>         <br>       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>，如果其他元素中这一位<strong>也有</strong>出现过<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>        <br>         <br>          <br>          <br>            1 <br>           <br>          <br>         <br>           1 <br>          <br>         <br>       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>，那么拎出来<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>        <br>         <br>          <br>          <br>            n <br>           <br>          <br>            u <br>           <br>          <br>            m <br>           <br>          <br>            s <br>           <br>          <br>            [ <br>           <br>          <br>            i <br>           <br>          <br>            ] <br>           <br>          <br>         <br>           nums[i] <br>          <br>         <br>       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span>后剩下元素这一位的或结果和<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>        <br>         <br>          <br>          <br>            a <br>           <br>          <br>            l <br>           <br>          <br>            l <br>           <br>          <br>            O <br>           <br>          <br>            r <br>           <br>          <br>         <br>           allOr <br>          <br>         <br>       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0278em;">llO</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span></span></span></span></span>相同</p> </li><li> <p>对于<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>        <br>         <br>          <br>          <br>            n <br>           <br>          <br>            u <br>           <br>          <br>            m <br>           <br>          <br>            s <br>           <br>          <br>            [ <br>           <br>          <br>            i <br>           <br>          <br>            ] <br>           <br>          <br>         <br>           nums[i] <br>          <br>         <br>       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span>二进制下的某个<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>        <br>         <br>          <br>          <br>            1 <br>           <br>          <br>         <br>           1 <br>          <br>         <br>       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>，如果其他元素中这一位<strong>没有</strong>出现过<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>        <br>         <br>          <br>          <br>            1 <br>           <br>          <br>         <br>           1 <br>          <br>         <br>       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>，那么拎出来<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>        <br>         <br>          <br>          <br>            n <br>           <br>          <br>            u <br>           <br>          <br>            m <br>           <br>          <br>            s <br>           <br>          <br>            [ <br>           <br>          <br>            i <br>           <br>          <br>            ] <br>           <br>          <br>         <br>           nums[i] <br>          <br>         <br>       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span>后剩下元素这一位的或结果和<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>        <br>         <br>          <br>          <br>            a <br>           <br>          <br>            l <br>           <br>          <br>            l <br>           <br>          <br>            O <br>           <br>          <br>            r <br>           <br>          <br>         <br>           allOr <br>          <br>         <br>       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0278em;">llO</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span></span></span></span></span>不同</p> </li></ul> <br></blockquote> <br><p>也就是说，我们只需要统计一下哪一位<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         1 <br>        <br>       <br>      <br>        1 <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>出现过最少两次（<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         a <br>        <br>       <br>         l <br>        <br>       <br>         l <br>        <br>       <br>         1 <br>        <br>       <br>      <br>        all1 <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0197em;">ll</span><span class="mord">1</span></span></span></span></span>为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         1 <br>        <br>       <br>      <br>        1 <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>的位代表至少有两个数这一位为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         1 <br>        <br>       <br>      <br>        1 <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>），如果<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         n <br>        <br>       <br>         u <br>        <br>       <br>         m <br>        <br>       <br>         s <br>        <br>       <br>         [ <br>        <br>       <br>         i <br>        <br>       <br>         ] <br>        <br>       <br>      <br>        nums[i] <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span>这一位为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         1 <br>        <br>       <br>      <br>        1 <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>的话，依据<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         a <br>        <br>       <br>         l <br>        <br>       <br>         l <br>        <br>       <br>         1 <br>        <br>       <br>      <br>        all1 <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0197em;">ll</span><span class="mord">1</span></span></span></span></span>的这一位是否为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         1 <br>        <br>       <br>      <br>        1 <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>，就能判断出其他元素中是否存在这一位为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         1 <br>        <br>       <br>      <br>        1 <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>的情况，就能得知除<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         n <br>        <br>       <br>         u <br>        <br>       <br>         m <br>        <br>       <br>         s <br>        <br>       <br>         [ <br>        <br>       <br>         i <br>        <br>       <br>         ] <br>        <br>       <br>      <br>        nums[i] <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span>外其他元素这一位或运算的结果是否为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         1 <br>        <br>       <br>      <br>        1 <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>了。</p> <br><p>最后就剩下了一个问题：如何求出<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         a <br>        <br>       <br>         l <br>        <br>       <br>         l <br>        <br>       <br>         1 <br>        <br>       <br>      <br>        all1 <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0197em;">ll</span><span class="mord">1</span></span></span></span></span>？</p> <br><blockquote> <br> <p>同样使用前缀和的思路，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          p <br>         <br>        <br>          r <br>         <br>        <br>          e <br>         <br>        <br>          f <br>         <br>        <br>          i <br>         <br>        <br>          x <br>         <br>        <br>       <br>         prefix <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal">re</span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="mord mathnormal">i</span><span class="mord mathnormal">x</span></span></span></span></span>代表从第一个元素到当前元素的上一个元素为止的或结果。</p> <br> <p>如果那么<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          p <br>         <br>        <br>          r <br>         <br>        <br>          e <br>         <br>        <br>          f <br>         <br>        <br>          i <br>         <br>        <br>          x <br>         <br>        <br>            <br>         <br>        <br>          & <br>         <br>        <br>            <br>         <br>        <br>          n <br>         <br>        <br>          u <br>         <br>        <br>          m <br>         <br>        <br>          s <br>         <br>        <br>          [ <br>         <br>        <br>          i <br>         <br>        <br>          ] <br>         <br>        <br>       <br>         prefix\ \&\ nums[i] <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal">re</span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="mord mathnormal">i</span><span class="mord mathnormal">x</span><span class="mspace"> </span><span class="mord">&</span><span class="mspace"> </span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span>的某一位为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          1 <br>         <br>        <br>       <br>         1 <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>的话，就代表<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          n <br>         <br>        <br>          u <br>         <br>        <br>          m <br>         <br>        <br>          s <br>         <br>        <br>          [ <br>         <br>        <br>          i <br>         <br>        <br>          ] <br>         <br>        <br>       <br>         nums[i] <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span>和前面的数中的某些数这一位都为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          1 <br>         <br>        <br>       <br>         1 <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>，也就是说这一位至少出现了两次<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          1 <br>         <br>        <br>       <br>         1 <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span></p> <br> <p>因此将<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          a <br>         <br>        <br>          l <br>         <br>        <br>          l <br>         <br>        <br>          1 <br>         <br>        <br>       <br>         all1 <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0197em;">ll</span><span class="mord">1</span></span></span></span></span>或上<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          p <br>         <br>        <br>          r <br>         <br>        <br>          e <br>         <br>        <br>          f <br>         <br>        <br>          i <br>         <br>        <br>          x <br>         <br>        <br>            <br>         <br>        <br>          & <br>         <br>        <br>            <br>         <br>        <br>          n <br>         <br>        <br>          u <br>         <br>        <br>          m <br>         <br>        <br>          s <br>         <br>        <br>          [ <br>         <br>        <br>          i <br>         <br>        <br>          ] <br>         <br>        <br>       <br>         prefix\ \&\ nums[i] <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal">re</span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="mord mathnormal">i</span><span class="mord mathnormal">x</span><span class="mspace"> </span><span class="mord">&</span><span class="mspace"> </span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span>即可。</p> <br></blockquote> <br><p>这样，遍历到<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         n <br>        <br>       <br>         u <br>        <br>       <br>         m <br>        <br>       <br>         s <br>        <br>       <br>         [ <br>        <br>       <br>         i <br>        <br>       <br>         ] <br>        <br>       <br>      <br>        nums[i] <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span>时，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         a <br>        <br>       <br>         l <br>        <br>       <br>         l <br>        <br>       <br>         O <br>        <br>       <br>         r <br>        <br>       <br>           <br>        <br>        <br>        <br>            <br>         <br>        <br>          ˆ <br>         <br>        <br>       <br>         n <br>        <br>       <br>         u <br>        <br>       <br>         m <br>        <br>       <br>         s <br>        <br>       <br>         [ <br>        <br>       <br>         i <br>        <br>       <br>         ] <br>        <br>       <br>           <br>        <br>       <br>         ∣ <br>        <br>       <br>           <br>        <br>       <br>         a <br>        <br>       <br>         l <br>        <br>       <br>         l <br>        <br>       <br>         1 <br>        <br>       <br>      <br>        allOr\ \^\ nums[i]\ |\ all1 <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0278em;">llO</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mspace"> </span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.6944em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mspace"> </span></span><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.25em;"><span class="mord">ˆ</span></span></span></span></span></span></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace"> </span><span class="mord">∣</span><span class="mspace"> </span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0197em;">ll</span><span class="mord">1</span></span></span></span></span>即为所有元素除去<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         n <br>        <br>       <br>         u <br>        <br>       <br>         m <br>        <br>       <br>         s <br>        <br>       <br>         [ <br>        <br>       <br>         i <br>        <br>       <br>         ] <br>        <br>       <br>      <br>        nums[i] <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span>后的或结果。</p> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          l <br>         <br>        <br>          e <br>         <br>        <br>          n <br>         <br>        <br>          ( <br>         <br>        <br>          n <br>         <br>        <br>          u <br>         <br>        <br>          m <br>         <br>        <br>          s <br>         <br>        <br>          ) <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(len(nums)) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mclose">))</span></span></span></span></span></li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          1 <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(1) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></li></ul> <br><h4><a id="AC_122"></a>AC代码</h4> <br><h5><a id="C_124"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-03-21 15:29:27<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-03-21 15:32:32<br> * @Descriptions: Fake Time<br> * @Descriptions: AC,100.00%,90.30%<br> */</span><br><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ll<span class="token punctuation">;</span><br><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    ll <span class="token function">maximumOr</span><span class="token punctuation">(</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">int</span> allOr <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> all1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> t <span class="token operator">:</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            all1 <span class="token operator">|=</span> allOr <span class="token operator">&</span> t<span class="token punctuation">;</span><br>            allOr <span class="token operator">|=</span> t<span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        ll ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> t <span class="token operator">:</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            ans <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span> allOr <span class="token operator">^</span> t <span class="token operator">|</span> all1 <span class="token operator">|</span> <span class="token punctuation">(</span>ll<span class="token punctuation">)</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator"><<</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><h5><a id="Python_154"></a>Python</h5> <br><pre><code class="prism language-python"><span class="token triple-quoted-string string">'''<br>Author: LetMeFly<br>Date: 2025-03-21 15:21:19<br>LastEditors: LetMeFly.xyz<br>LastEditTime: 2025-03-21 15:27:03<br>'''</span><br><span class="token keyword">from</span> typing <span class="token keyword">import</span> List<br><br><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span><br>    <span class="token keyword">def</span> <span class="token function">maximumOr</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> k<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span><br>        allOr <span class="token operator">=</span> all1 <span class="token operator">=</span> <span class="token number">0</span><br>        <span class="token keyword">for</span> t <span class="token keyword">in</span> nums<span class="token punctuation">:</span><br>            all1 <span class="token operator">|</span><span class="token operator">=</span> t <span class="token operator">&</span> allOr<br>            allOr <span class="token operator">|</span><span class="token operator">=</span> t<br>        ans <span class="token operator">=</span> <span class="token number">0</span><br>        <span class="token keyword">for</span> t <span class="token keyword">in</span> nums<span class="token punctuation">:</span><br>            ans <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span> t <span class="token operator">^</span> allOr <span class="token operator">|</span> all1 <span class="token operator">|</span> t <span class="token operator"><<</span> k<span class="token punctuation">)</span><br>        <span class="token keyword">return</span> ans<br>    <br></code></pre> <br><h5><a id="Java_178"></a>Java</h5> <br><pre><code class="prism language-java"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-03-21 15:32:20<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-03-21 15:34:12<br> */</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br>    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">maximumOr</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">int</span> allOr <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> all1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> t <span class="token operator">:</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            all1 <span class="token operator">|=</span> t <span class="token operator">&</span> allOr<span class="token punctuation">;</span><br>            allOr <span class="token operator">|=</span> t<span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">long</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> t <span class="token operator">:</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            ans <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span> allOr <span class="token operator">^</span> t <span class="token operator">|</span> all1 <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span>t <span class="token operator"><<</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br></code></pre> <br><h5><a id="Go_203"></a>Go</h5> <br><pre><code class="prism language-go"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-03-21 15:34:47<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-03-21 16:32:51<br> * @Description: Go int和int64的位运算似乎几乎一点都不会自动转换类型<br> */</span><br><span class="token keyword">package</span> main<br><br><span class="token keyword">func</span> <span class="token function">maximumOr</span><span class="token punctuation">(</span>nums <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> k <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>ans <span class="token builtin">int64</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>    allOr<span class="token punctuation">,</span> all1 <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><br>    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> t <span class="token operator">:=</span> <span class="token keyword">range</span> nums <span class="token punctuation">{<!-- --></span><br>        all1 <span class="token operator">|=</span> allOr <span class="token operator">&</span> t<br>        allOr <span class="token operator">|=</span> t<br>    <span class="token punctuation">}</span><br>    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> t <span class="token operator">:=</span> <span class="token keyword">range</span> nums <span class="token punctuation">{<!-- --></span><br>        ans <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span> <span class="token function">int64</span><span class="token punctuation">(</span>allOr<span class="token punctuation">)</span> <span class="token operator">^</span> <span class="token function">int64</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">int64</span><span class="token punctuation">(</span>all1<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">int64</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator"><<</span> k<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">return</span><br><span class="token punctuation">}</span><br></code></pre> <br><h3><a id="End_228"></a>End</h3> <br><p>说实话感觉这次官解写的不错，灵神有待加油啊。</p> <br><blockquote> <br> <p>同步发文于<a href="https://letmefly.blog.csdn.net/article/details/146426782" rel="nofollow">CSDN</a>和我的<a href="https://blog.letmefly.xyz/" rel="nofollow">个人博客</a>，原创不易，转载经作者同意后请附上<a href="https://blog.letmefly.xyz/2025/03/21/LeetCode%202680.%E6%9C%80%E5%A4%A7%E6%88%96%E5%80%BC/" rel="nofollow">原文链接</a>哦~</p> <br> <p>千篇源码题解<a href="https://github.com/LetMeFly666/LeetCode">已开源</a></p> <br></blockquote>