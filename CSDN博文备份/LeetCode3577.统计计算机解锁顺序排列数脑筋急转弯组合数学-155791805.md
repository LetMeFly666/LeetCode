<h2><a id="LetMeFly3577_1"></a>【LetMeFly】3577.统计计算机解锁顺序排列数：脑筋急转弯(组合数学)</h2> <br><p>力扣题目链接：<a href="https://leetcode.cn/problems/count-the-number-of-computer-unlocking-permutations/" rel="nofollow">https://leetcode.cn/problems/count-the-number-of-computer-unlocking-permutations/</a></p> <br><p>给你一个长度为 <code>n</code> 的数组 <code>complexity</code>。</p> <br><p>在房间里有 <code>n</code> 台 <strong>上锁的 </strong>计算机，这些计算机的编号为 0 到 <code>n - 1</code>，每台计算机都有一个 <strong>唯一 </strong>的密码。编号为 <code>i</code> 的计算机的密码复杂度为 <code>complexity[i]</code>。</p> <br><p>编号为 0 的计算机密码已经 <strong>解锁 </strong>，并作为根节点。其他所有计算机必须通过它或其他已经解锁的计算机来解锁，具体规则如下：</p> <br><ul><li>可以使用编号为 <code>j</code> 的计算机的密码解锁编号为 <code>i</code> 的计算机，其中 <code>j</code> 是任何小于 <code>i</code> 的整数，且满足 <code>complexity[j] < complexity[i]</code>（即 <code>j < i</code> 并且 <code>complexity[j] < complexity[i]</code>）。</li><li>要解锁编号为 <code>i</code> 的计算机，你需要事先解锁一个编号为 <code>j</code> 的计算机，满足 <code>j < i</code> 并且 <code>complexity[j] < complexity[i]</code>。</li></ul> <br><p>求共有多少种 <code>[0, 1, 2, ..., (n - 1)]</code> 的排列方式，能够表示从编号为 0 的计算机（唯一初始解锁的计算机）开始解锁所有计算机的有效顺序。</p> <br><p>由于答案可能很大，返回结果需要对 <strong>10<sup>9</sup> + 7</strong> 取余数。</p> <br><p><strong>注意：</strong>编号为 0 的计算机的密码已解锁，而 <strong>不是 </strong>排列中第一个位置的计算机密码已解锁。</p> <br><p><strong>排列 </strong>是一个数组中所有元素的重新排列。</p> <br><p> </p> <br><p><strong class="example">示例 1：</strong></p> <br><div class="example-block"> <br> <p><strong>输入：</strong> <span class="example-io">complexity = [1,2,3]</span></p> <br></div><br><p><strong>输出：</strong> <span class="example-io">2</span></p> <br><p><strong>解释：</strong></p> <br><p>有效的排列有：</p> <br><ul><li>[0, 1, 2] <br>  <ul><li>首先使用根密码解锁计算机 0。</li><li>使用计算机 0 的密码解锁计算机 1，因为 <code>complexity[0] < complexity[1]</code>。</li><li>使用计算机 1 的密码解锁计算机 2，因为 <code>complexity[1] < complexity[2]</code>。</li></ul> </li><li>[0, 2, 1] <br>  <ul><li>首先使用根密码解锁计算机 0。</li><li>使用计算机 0 的密码解锁计算机 2，因为 <code>complexity[0] < complexity[2]</code>。</li><li>使用计算机 0 的密码解锁计算机 1，因为 <code>complexity[0] < complexity[1]</code>。</li></ul> </li></ul> <br><p><strong class="example">示例 2：</strong></p> <br><div class="example-block"> <br> <p><strong>输入：</strong> <span class="example-io">complexity = [3,3,3,4,4,4]</span></p> <br></div><br><p><strong>输出：</strong> <span class="example-io">0</span></p> <br><p><strong>解释：</strong></p> <br><p>没有任何排列能够解锁所有计算机。</p> <br><p> </p> <br><p><strong>提示：</strong></p> <br><ul><li><code>2 <= complexity.length <= 10<sup>5</sup></code></li><li><code>1 <= complexity[i] <= 10<sup>9</sup></code></li></ul> <br><h3><a id="_78"></a>解题方法：组合数学</h3> <br><p>题目意思是：编号从0到n-1的计算机，编号小且值小的可以解锁编号大且值大的，初始只有编号0（也就是给定序列中的第一个）是解锁状态，问解锁所有计算机有多少种解锁顺序（先解锁1号再解锁2号是一种，先解锁2号再解锁1号是另一种，至于它们是被谁解锁的不重要）。</p> <br><p>转念一想发现，如果后面存在小于等于<font title="EVA00">零号机</font>的机器，则无论如何都不可能被解锁；反之若后面值都大于0号机，则后续任何一个机器想在任何次序(th)解锁都可以（都用0号去解锁就好了）。</p> <br><h4><a id="_84"></a>具体方法</h4> <br><p>遍历一遍数组，如果有值小于等于数组中第一个元素，则返回0。</p> <br><p>否则后面<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        l<br>       <br>       <br>        e<br>       <br>       <br>        n<br>       <br>       <br>        (<br>       <br>       <br>        c<br>       <br>       <br>        o<br>       <br>       <br>        m<br>       <br>       <br>        p<br>       <br>       <br>        l<br>       <br>       <br>        e<br>       <br>       <br>        x<br>       <br>       <br>        i<br>       <br>       <br>        t<br>       <br>       <br>        y<br>       <br>       <br>        )<br>       <br>       <br>        −<br>       <br>       <br>        1<br>       <br>      <br>      <br>       len(complexity)-1<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">co</span><span class="mord mathnormal">m</span><span class="mord mathnormal" style="margin-right: 0.0197em;">pl</span><span class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mord mathnormal">i</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right: 0.0359em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>个机器的被解锁顺序可以按任意顺序排列，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        (<br>       <br>       <br>        n<br>       <br>       <br>        −<br>       <br>       <br>        1<br>       <br>       <br>        )<br>       <br>       <br>        !<br>       <br>      <br>      <br>       (n-1)!<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">1</span><span class="mclose">)!</span></span></span></span></span>即为所求。</p> <br><h4><a id="_90"></a>时空复杂度分析</h4> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         n<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(n)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>，其中<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         n<br>        <br>        <br>         =<br>        <br>        <br>         l<br>        <br>        <br>         e<br>        <br>        <br>         n<br>        <br>        <br>         (<br>        <br>        <br>         c<br>        <br>        <br>         o<br>        <br>        <br>         m<br>        <br>        <br>         p<br>        <br>        <br>         l<br>        <br>        <br>         e<br>        <br>        <br>         x<br>        <br>        <br>         i<br>        <br>        <br>         t<br>        <br>        <br>         y<br>        <br>        <br>         )<br>        <br>       <br>       <br>        n=len(complexity)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">co</span><span class="mord mathnormal">m</span><span class="mord mathnormal" style="margin-right: 0.0197em;">pl</span><span class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mord mathnormal">i</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right: 0.0359em;">y</span><span class="mclose">)</span></span></span></span></span></li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         1<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(1)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></li></ul> <br><h4><a id="AC_95"></a>AC代码</h4> <br><h5><a id="C_97"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @LastEditTime: 2025-12-10 22:56:22<br> */</span><br><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ll<span class="token punctuation">;</span><br><span class="token keyword">const</span> ll MOD <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    <span class="token keyword">int</span> <span class="token function">countPermutations</span><span class="token punctuation">(</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> complexity<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        ll ans <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span>ll i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator"><</span> complexity<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>complexity<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator"><=</span> complexity<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            ans <span class="token operator">=</span> ans <span class="token operator">*</span> i <span class="token operator">%</span> MOD<span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> <span class="token keyword">static_cast</span><span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">(</span>ans<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><h5><a id="Python_120"></a>Python</h5> <br><pre><code class="prism language-python"><span class="token triple-quoted-string string">'''<br>LastEditTime: 2025-12-10 22:59:13<br>'''</span><br><span class="token keyword">from</span> typing <span class="token keyword">import</span> List<br><br><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span><br>    MOD <span class="token operator">=</span> <span class="token number">1000000007</span><br><br>    <span class="token keyword">def</span> <span class="token function">countPermutations</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> complexity<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span><br>        ans <span class="token operator">=</span> <span class="token number">1</span><br>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>complexity<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span><br>            <span class="token keyword">if</span> complexity<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator"><=</span> complexity<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span><br>                <span class="token keyword">return</span> <span class="token number">0</span><br>            ans <span class="token operator">=</span> ans <span class="token operator">*</span> i <span class="token operator">%</span> self<span class="token punctuation">.</span>MOD<br>        <span class="token keyword">return</span> ans<br></code></pre> <br><h5><a id="Java_140"></a>Java</h5> <br><pre><code class="prism language-java"><span class="token comment">/*<br> * @LastEditTime: 2025-12-10 23:03:09<br> */</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br>    <span class="token keyword">private</span> <span class="token keyword">long</span> MOD <span class="token operator">=</span> <span class="token number">1000000007</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">countPermutations</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> complexity<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">long</span> ans <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator"><</span> complexity<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>complexity<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator"><=</span> complexity<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            ans <span class="token operator">=</span> ans <span class="token operator">*</span> i <span class="token operator">%</span> MOD<span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br></code></pre> <br><h5><a id="Go_162"></a>Go</h5> <br><pre><code class="prism language-go"><span class="token comment">/*<br> * @LastEditTime: 2025-12-10 23:00:19<br> */</span><br><span class="token keyword">package</span> main<br><br><span class="token keyword">var</span> MOD3577 <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">1000000007</span><br><br><span class="token keyword">func</span> <span class="token function">countPermutations</span><span class="token punctuation">(</span>complexity <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span><br>    ans <span class="token operator">:=</span> <span class="token number">1</span><br>    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator"><</span> <span class="token function">len</span><span class="token punctuation">(</span>complexity<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">if</span> complexity<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator"><=</span> complexity<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">return</span> <span class="token number">0</span><br>        <span class="token punctuation">}</span><br>        ans <span class="token operator">=</span> ans <span class="token operator">*</span> i <span class="token operator">%</span> MOD3577<br>    <span class="token punctuation">}</span><br>    <span class="token keyword">return</span> ans<br><span class="token punctuation">}</span><br></code></pre> <br><h5><a id="Rust_184"></a>Rust</h5> <br><pre><code class="prism language-rust"><span class="token comment">/*<br> * @LastEditTime: 2025-12-10 23:06:41<br> */</span><br><span class="token keyword">impl</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br>    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">count_permutations</span><span class="token punctuation">(</span>complexity<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator"><</span><span class="token keyword">i32</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token keyword">i32</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">let</span> <span class="token keyword">mut</span> ans<span class="token punctuation">:</span> <span class="token keyword">i64</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><br>        <span class="token keyword">let</span> <span class="token constant">MOD</span><span class="token punctuation">:</span> <span class="token keyword">i64</span> <span class="token operator">=</span> <span class="token number">1000000007</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">1</span><span class="token punctuation">..</span>complexity<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> complexity<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator"><=</span> complexity<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">{<!-- --></span><br>                <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            ans <span class="token operator">=</span> ans <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token keyword">as</span> <span class="token keyword">i64</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token constant">MOD</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        ans <span class="token keyword">as</span> <span class="token keyword">i32</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br></code></pre> <br><blockquote> <br> <p>同步发文于<a href="https://letmefly.blog.csdn.net/article/details/155791805" rel="nofollow">CSDN</a>和我的<a href="https://blog.letmefly.xyz/" rel="nofollow">个人博客</a>，原创不易，转载经作者同意后请附上<a href="https://blog.letmefly.xyz/2025/12/10/LeetCode%203577.%E7%BB%9F%E8%AE%A1%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%A3%E9%94%81%E9%A1%BA%E5%BA%8F%E6%8E%92%E5%88%97%E6%95%B0/" rel="nofollow">原文链接</a>哦~</p> <br> <p>千篇源码题解<a href="https://github.com/LetMeFly666/LeetCode">已开源</a></p> <br></blockquote>