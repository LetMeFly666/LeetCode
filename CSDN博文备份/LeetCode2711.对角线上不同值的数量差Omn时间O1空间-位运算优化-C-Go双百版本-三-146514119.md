<h2><a id="LetMeFly2711OmnO1____CGo___1"></a>【LetMeFly】2711.对角线上不同值的数量差：O(mn)时间O(1)空间 - 位运算优化 - C++/Go双百版本 - 三种方法(一步步优化)</h2> <br><p>力扣题目链接：<a href="https://leetcode.cn/problems/difference-of-number-of-distinct-values-on-diagonals/" rel="nofollow">https://leetcode.cn/problems/difference-of-number-of-distinct-values-on-diagonals/</a></p> <br><p>给你一个下标从 <code>0</code> 开始、大小为 <code>m x n</code> 的二维矩阵 <code>grid</code> ，请你求解大小同样为 <code>m x n</code> 的答案矩阵 <code>answer</code> 。</p> <br><p>矩阵 <code>answer</code> 中每个单元格 <code>(r, c)</code> 的值可以按下述方式进行计算：</p> <br><ul><li>令 <code>topLeft[r][c]</code> 为矩阵 <code>grid</code> 中单元格 <code>(r, c)</code> 左上角对角线上 <strong>不同值</strong> 的数量。</li><li>令 <code>bottomRight[r][c]</code> 为矩阵 <code>grid</code> 中单元格 <code>(r, c)</code> 右下角对角线上 <strong>不同值</strong> 的数量。</li></ul> <br><p>然后 <code>answer[r][c] = |topLeft[r][c] - bottomRight[r][c]|</code> 。</p> <br><p>返回矩阵 <code>answer</code> 。</p> <br><p><strong>矩阵对角线</strong> 是从最顶行或最左列的某个单元格开始，向右下方向走到矩阵末尾的对角线。</p> <br><p>如果单元格 <code>(r1, c1)</code> 和单元格 <code>(r, c) </code>属于同一条对角线且 <code>r1 < r</code> ，则单元格 <code>(r1, c1)</code> 属于单元格 <code>(r, c)</code> 的左上对角线。类似地，可以定义右下对角线。</p> <br><p> </p> <br><p><strong>示例 1：</strong></p> <br><img alt="" src="https://i-blog.csdnimg.cn/img_convert/199c14ee34001fd17ca7f98b660b247f.png" /> <br><pre><strong>输入：</strong>grid = [[1,2,3],[3,1,5],[3,2,1]]<br><strong>输出：</strong>[[1,1,0],[1,0,1],[0,1,1]]<br><strong>解释：</strong>第 1 个图表示最初的矩阵 grid 。 <br>第 2 个图表示对单元格 (0,0) 计算，其中蓝色单元格是位于右下对角线的单元格。<br>第 3 个图表示对单元格 (1,2) 计算，其中红色单元格是位于左上对角线的单元格。<br>第 4 个图表示对单元格 (1,1) 计算，其中蓝色单元格是位于右下对角线的单元格，红色单元格是位于左上对角线的单元格。<br>- 单元格 (0,0) 的右下对角线包含 [1,1] ，而左上对角线包含 [] 。对应答案是 |1 - 0| = 1 。<br>- 单元格 (1,2) 的右下对角线包含 [] ，而左上对角线包含 [2] 。对应答案是 |0 - 1| = 1 。<br>- 单元格 (1,1) 的右下对角线包含 [1] ，而左上对角线包含 [1] 。对应答案是 |1 - 1| = 0 。<br>其他单元格的对应答案也可以按照这样的流程进行计算。<br></pre> <br><p><strong>示例 2：</strong></p> <br><pre><strong>输入：</strong>grid = [[1]]<br><strong>输出：</strong>[[0]]<br><strong>解释：</strong>- 单元格 (0,0) 的右下对角线包含 [] ，左上对角线包含 [] 。对应答案是 |0 - 0| = 0 。<br></pre> <br><p> </p> <br><p><strong>提示：</strong></p> <br><ul><li><code>m == grid.length</code></li><li><code>n == grid[i].length</code></li><li><code>1 <= m, n, grid[i][j] <= 50</code></li></ul> <br><p>挺不错的一道题。</p> <br><h3><a id="_59"></a>解题方法一：暴力模拟</h3> <br><p>使用<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         O <br>        <br>       <br>         ( <br>        <br>       <br>         m <br>        <br>       <br>         n <br>        <br>       <br>         ) <br>        <br>       <br>      <br>        O(mn) <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">mn</span><span class="mclose">)</span></span></span></span></span>的时间复杂度枚举每个起点，对于每个起点：</p> <br><blockquote> <br> <p>使用两个哈希表（集合），分别统计这个起点左上角和右下角有多少个不同的元素。</p> <br> <p>怎么统计呢？从<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          k <br>         <br>        <br>          = <br>         <br>        <br>          1 <br>         <br>        <br>       <br>         k=1 <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal" style="margin-right: 0.0315em;">k</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>开始，到<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          i <br>         <br>        <br>          + <br>         <br>        <br>          d <br>         <br>        <br>       <br>         i + d <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7429em; vertical-align: -0.0833em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">d</span></span></span></span></span>或<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          j <br>         <br>        <br>          + <br>         <br>        <br>          d <br>         <br>        <br>       <br>         j + d <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.854em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">d</span></span></span></span></span>超出合法边界为止，直接将<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          g <br>         <br>        <br>          r <br>         <br>        <br>          i <br>         <br>        <br>          d <br>         <br>        <br>          [ <br>         <br>        <br>          i <br>         <br>        <br>          + <br>         <br>        <br>          d <br>         <br>        <br>          ] <br>         <br>        <br>          [ <br>         <br>        <br>          j <br>         <br>        <br>          + <br>         <br>        <br>          d <br>         <br>        <br>          ] <br>         <br>        <br>       <br>         grid[i + d][j + d] <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">d</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">d</span><span class="mclose">]</span></span></span></span></span>插入到哈希表中。</p> <br></blockquote> <br><p>知道了每个起点左上角和右下角分别有多少个不同的元素，就知道答案了。</p> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          m <br>         <br>        <br>          n <br>         <br>        <br>          × <br>         <br>        <br>          min <br>         <br>        <br>          ⁡ <br>         <br>        <br>          ( <br>         <br>        <br>          m <br>         <br>        <br>          , <br>         <br>        <br>          n <br>         <br>        <br>          ) <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(mn\times \min(m, n)) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">mn</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mop">min</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">))</span></span></span></span></span></li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          min <br>         <br>        <br>          ⁡ <br>         <br>        <br>          ( <br>         <br>        <br>          m <br>         <br>        <br>          , <br>         <br>        <br>          n <br>         <br>        <br>          ) <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(\min(m, n)) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mop">min</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">))</span></span></span></span></span></li></ul> <br><h4><a id="AC_72"></a>AC代码</h4> <br><h5><a id="C_74"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-03-25 16:52:02<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-03-25 17:42:27<br> */</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    vector<span class="token operator"><</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">>></span> <span class="token function">differenceOfDistinctValues</span><span class="token punctuation">(</span>vector<span class="token operator"><</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">>></span><span class="token operator">&</span> grid<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        vector<span class="token operator"><</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">>></span> <span class="token function">ans</span><span class="token punctuation">(</span>grid<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">(</span>grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator"><</span> grid<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator"><</span> grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                unordered_set<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span> l<span class="token punctuation">,</span> r<span class="token punctuation">;</span><br>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">-</span> k <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&&</span> j <span class="token operator">-</span> k <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                    l<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>grid<span class="token punctuation">[</span>i <span class="token operator">-</span> k<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                <span class="token punctuation">}</span><br>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">+</span> k <span class="token operator"><</span> grid<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&&</span> j <span class="token operator">+</span> k <span class="token operator"><</span> grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                    r<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>grid<span class="token punctuation">[</span>i <span class="token operator">+</span> k<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                <span class="token punctuation">}</span><br>                ans<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">(</span>l<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> r<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><h3><a id="_104"></a>解题方法二：前缀和优化</h3> <br><p>方法一中我们需要从每个起点开始往两个方向遍历，但其实很多数被统计了很多次。</p> <br><p>怎么优化呢？前缀和呗。从第一行或第一列的共<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         m <br>        <br>       <br>         + <br>        <br>       <br>         n <br>        <br>       <br>         − <br>        <br>       <br>         1 <br>        <br>       <br>      <br>        m + n - 1 <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>个元素开始向右下角遍历，遍历过程中使用哈希表统计当前一共遍历到了多少个元素，并直接将结果写入<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         a <br>        <br>       <br>         n <br>        <br>       <br>         s <br>        <br>       <br>         [ <br>        <br>       <br>         i <br>        <br>       <br>         ] <br>        <br>       <br>         [ <br>        <br>       <br>         j <br>        <br>       <br>         ] <br>        <br>       <br>      <br>        ans[i][j] <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">an</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mclose">]</span></span></span></span></span>中。</p> <br><p>也就是说，当前<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         a <br>        <br>       <br>         n <br>        <br>       <br>         s <br>        <br>       <br>         [ <br>        <br>       <br>         i <br>        <br>       <br>         ] <br>        <br>       <br>         [ <br>        <br>       <br>         j <br>        <br>       <br>         ] <br>        <br>       <br>      <br>        ans[i][j] <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">an</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mclose">]</span></span></span></span></span>代表<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         g <br>        <br>       <br>         r <br>        <br>       <br>         i <br>        <br>       <br>         d <br>        <br>       <br>         [ <br>        <br>       <br>         i <br>        <br>       <br>         ] <br>        <br>       <br>         [ <br>        <br>       <br>         j <br>        <br>       <br>         ] <br>        <br>       <br>      <br>        grid[i][j] <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mclose">]</span></span></span></span></span>左上角的那条线一共有多少种不同的元素。</p> <br><p>当从左上角遍历到右下角后，清空哈希表，再次向左上角折回，并在折回过程中统计右下角一共有多少种元素。</p> <br><p>左上角元素的种类数减去右下角元素的种类数即为当前位置对应的答案。</p> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          m <br>         <br>        <br>          n <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(mn) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">mn</span><span class="mclose">)</span></span></span></span></span></li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          min <br>         <br>        <br>          ⁡ <br>         <br>        <br>          ( <br>         <br>        <br>          m <br>         <br>        <br>          , <br>         <br>        <br>          n <br>         <br>        <br>          ) <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(\min(m, n)) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mop">min</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">))</span></span></span></span></span></li></ul> <br><h4><a id="AC_119"></a>AC代码</h4> <br><h5><a id="C_121"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-03-25 19:44:55<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-03-25 21:04:00<br> */</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    vector<span class="token operator"><</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">>></span> <span class="token function">differenceOfDistinctValues</span><span class="token punctuation">(</span>vector<span class="token operator"><</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">>></span><span class="token operator">&</span> grid<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">int</span> n <span class="token operator">=</span> grid<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> m <span class="token operator">=</span> grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        vector<span class="token operator"><</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">>></span> <span class="token function">ans</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator"><</span> m <span class="token operator">+</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">int</span> i <span class="token operator">=</span> k <span class="token operator"><</span> m <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> k <span class="token operator">-</span> m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> j <span class="token operator">=</span> k <span class="token operator"><</span> m <span class="token operator">?</span> k <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span><br>            unordered_set<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span> se<span class="token punctuation">;</span><br>            <span class="token keyword">int</span> d <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">+</span> d <span class="token operator"><</span> n <span class="token operator">&&</span> j <span class="token operator">+</span> d <span class="token operator"><</span> m<span class="token punctuation">;</span> d<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                ans<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> d<span class="token punctuation">]</span> <span class="token operator">=</span> se<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                se<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>grid<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            se<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">for</span> <span class="token punctuation">(</span>d<span class="token operator">--</span><span class="token punctuation">;</span> d <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> d<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                ans<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> d<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">(</span>ans<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> d<span class="token punctuation">]</span> <span class="token operator">-</span> se<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                se<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>grid<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><h3><a id="_154"></a>解题方法三：位运算优化</h3> <br><p>很容易注意到，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         g <br>        <br>       <br>         r <br>        <br>       <br>         i <br>        <br>       <br>         d <br>        <br>       <br>         [ <br>        <br>       <br>         i <br>        <br>       <br>         ] <br>        <br>       <br>         [ <br>        <br>       <br>         j <br>        <br>       <br>         ] <br>        <br>       <br>      <br>        grid[i][j] <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mclose">]</span></span></span></span></span>的范围是<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         1 <br>        <br>       <br>      <br>        1 <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>到<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         50 <br>        <br>       <br>      <br>        50 <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">50</span></span></span></span></span>，因此我们可以直接<strong>使用64位整数的每一位表示每个数值是否出现过</strong>。</p> <br><p>这样，加上将临时结果存放在答案数组中，我们就做到了<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         O <br>        <br>       <br>         ( <br>        <br>       <br>         1 <br>        <br>       <br>         ) <br>        <br>       <br>      <br>        O(1) <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>额外空间得出答案了。</p> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          m <br>         <br>        <br>          n <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(mn) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">mn</span><span class="mclose">)</span></span></span></span></span></li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          1 <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(1) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>，力扣返回值不记入算法空间复杂度</li></ul> <br><h4><a id="AC_163"></a>AC代码</h4> <br><h5><a id="C_165"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-03-25 21:06:53<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-03-25 21:17:48<br> * @Description: AC,100.00%,100.00%<br> */</span><br><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ll<span class="token punctuation">;</span><br><br><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    vector<span class="token operator"><</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">>></span> <span class="token function">differenceOfDistinctValues</span><span class="token punctuation">(</span>vector<span class="token operator"><</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">>></span><span class="token operator">&</span> grid<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">int</span> n <span class="token operator">=</span> grid<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> m <span class="token operator">=</span> grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        vector<span class="token operator"><</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">>></span> <span class="token function">ans</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator"><</span> m <span class="token operator">+</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">int</span> i <span class="token operator">=</span> k <span class="token operator"><</span> m <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> k <span class="token operator">-</span> m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> j <span class="token operator">=</span> k <span class="token operator"><</span> m <span class="token operator">?</span> k <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span><br>            ll se <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>            <span class="token keyword">int</span> d <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">+</span> d <span class="token operator"><</span> n <span class="token operator">&&</span> j <span class="token operator">+</span> d <span class="token operator"><</span> m<span class="token punctuation">;</span> d<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                ans<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> d<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">__builtin_popcountll</span><span class="token punctuation">(</span>se<span class="token punctuation">)</span><span class="token punctuation">;</span><br>                se <span class="token operator">|=</span> <span class="token number">1LL</span> <span class="token operator"><<</span> grid<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            se <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>            <span class="token keyword">for</span> <span class="token punctuation">(</span>d<span class="token operator">--</span><span class="token punctuation">;</span> d <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> d<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                ans<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> d<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span>ans<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> d<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token function">__builtin_popcountll</span><span class="token punctuation">(</span>se<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                se <span class="token operator">|=</span> <span class="token number">1LL</span> <span class="token operator"><<</span> grid<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><ul><li>执行用时分布3ms，击败100.00%</li><li>消耗内存分布28.95MB，击败100.00%</li></ul> <br><h5><a id="Python_205"></a>Python</h5> <br><pre><code class="prism language-python"><span class="token triple-quoted-string string">'''<br>Author: LetMeFly<br>Date: 2025-03-25 21:18:16<br>LastEditors: LetMeFly.xyz<br>LastEditTime: 2025-03-25 21:23:09<br>'''</span><br><span class="token keyword">from</span> typing <span class="token keyword">import</span> List<br><br><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span><br>    <span class="token keyword">def</span> <span class="token function">differenceOfDistinctValues</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> grid<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span><br>        n<span class="token punctuation">,</span> m <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>grid<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>        ans <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> m <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">]</span><br>        <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>m <span class="token operator">+</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span><br>            i <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">if</span> k <span class="token operator"><</span> m <span class="token keyword">else</span> k <span class="token operator">-</span> m <span class="token operator">+</span> <span class="token number">1</span><br>            j <span class="token operator">=</span> k <span class="token keyword">if</span> k <span class="token operator"><</span> m <span class="token keyword">else</span> <span class="token number">0</span><br>            se <span class="token operator">=</span> d <span class="token operator">=</span> <span class="token number">0</span><br>            <span class="token keyword">while</span> i <span class="token operator">+</span> d <span class="token operator"><</span> n <span class="token keyword">and</span> j <span class="token operator">+</span> d <span class="token operator"><</span> m<span class="token punctuation">:</span><br>                ans<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> d<span class="token punctuation">]</span> <span class="token operator">=</span> se<span class="token punctuation">.</span>bit_count<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># python10才有</span><br>                se <span class="token operator">|</span><span class="token operator">=</span> <span class="token number">1</span> <span class="token operator"><<</span> grid<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> d<span class="token punctuation">]</span><br>                d <span class="token operator">+=</span> <span class="token number">1</span><br>            se <span class="token operator">=</span> <span class="token number">0</span><br>            d <span class="token operator">-=</span> <span class="token number">1</span><br>            <span class="token keyword">while</span> d <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">:</span><br>                ans<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> d<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>ans<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> d<span class="token punctuation">]</span> <span class="token operator">-</span> se<span class="token punctuation">.</span>bit_count<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>                se <span class="token operator">|</span><span class="token operator">=</span> <span class="token number">1</span> <span class="token operator"><<</span> grid<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> d<span class="token punctuation">]</span><br>                d <span class="token operator">-=</span> <span class="token number">1</span><br>        <span class="token keyword">return</span> ans<br></code></pre> <br><h5><a id="Java_237"></a>Java</h5> <br><pre><code class="prism language-java"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-03-25 21:23:51<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-03-25 21:28:30<br> */</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br>    <span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">differenceOfDistinctValues</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> grid<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">int</span> n <span class="token operator">=</span> grid<span class="token punctuation">.</span>length<span class="token punctuation">,</span> m <span class="token operator">=</span> grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span><br>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ans <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator"><</span> m <span class="token operator">+</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">int</span> i <span class="token operator">=</span> k <span class="token operator"><</span> m <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> k <span class="token operator">-</span> m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><br>            <span class="token keyword">int</span> j <span class="token operator">=</span> k <span class="token operator"><</span> m <span class="token operator">?</span> k <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span><br>            <span class="token keyword">long</span> se <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>            <span class="token keyword">int</span> d <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">+</span> d <span class="token operator"><</span> n <span class="token operator">&&</span> j <span class="token operator">+</span> d <span class="token operator"><</span> m<span class="token punctuation">;</span> d<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                ans<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> d<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token function">bitCount</span><span class="token punctuation">(</span>se<span class="token punctuation">)</span><span class="token punctuation">;</span><br>                se <span class="token operator">|=</span> <span class="token number">1L</span> <span class="token operator"><<</span> grid<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            se <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>            <span class="token keyword">for</span> <span class="token punctuation">(</span>d<span class="token operator">--</span><span class="token punctuation">;</span> d <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> d<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                ans<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> d<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>ans<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> d<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token function">bitCount</span><span class="token punctuation">(</span>se<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                se <span class="token operator">|=</span> <span class="token number">1L</span> <span class="token operator"><<</span> grid<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br></code></pre> <br><h5><a id="Go_270"></a>Go</h5> <br><pre><code class="prism language-go"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-03-25 21:29:42<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-03-25 21:37:43<br> */</span><br><span class="token keyword">package</span> main<br><br><span class="token keyword">import</span> <span class="token string">"math/bits"</span><br><br><span class="token keyword">func</span> <span class="token function">abs2711</span><span class="token punctuation">(</span>a <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span><br>    <span class="token keyword">if</span> a <span class="token operator"><</span> <span class="token number">0</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">return</span> <span class="token operator">-</span>a<br>    <span class="token punctuation">}</span><br>    <span class="token keyword">return</span> a<br><span class="token punctuation">}</span><br><br><span class="token keyword">func</span> <span class="token function">differenceOfDistinctValues</span><span class="token punctuation">(</span>grid <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span><br>    n<span class="token punctuation">,</span> m <span class="token operator">:=</span> <span class="token function">len</span><span class="token punctuation">(</span>grid<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>    ans <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><br>    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> ans <span class="token punctuation">{<!-- --></span><br>        ans<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> m<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">for</span> k <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator"><</span> m <span class="token operator">+</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> k<span class="token operator">++</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">var</span> i<span class="token punctuation">,</span> j <span class="token builtin">int</span><br>        <span class="token keyword">if</span> k <span class="token operator"><</span> m <span class="token punctuation">{<!-- --></span><br>            i<span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k<br>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span><br>            i<span class="token punctuation">,</span> j <span class="token operator">=</span> k <span class="token operator">-</span> m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><br>        <span class="token punctuation">}</span><br>        se <span class="token operator">:=</span> <span class="token function">uint64</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><br>        d <span class="token operator">:=</span> <span class="token number">0</span><br>        <span class="token keyword">for</span> <span class="token punctuation">;</span> i <span class="token operator">+</span> d <span class="token operator"><</span> n <span class="token operator">&&</span> j <span class="token operator">+</span> d <span class="token operator"><</span> m<span class="token punctuation">;</span> d<span class="token operator">++</span> <span class="token punctuation">{<!-- --></span><br>            ans<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> d<span class="token punctuation">]</span> <span class="token operator">=</span> bits<span class="token punctuation">.</span><span class="token function">OnesCount64</span><span class="token punctuation">(</span>se<span class="token punctuation">)</span><br>            se <span class="token operator">|=</span> <span class="token function">uint64</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator"><<</span> grid<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> d<span class="token punctuation">]</span><br>        <span class="token punctuation">}</span><br>        se <span class="token operator">=</span> <span class="token number">0</span><br>        <span class="token keyword">for</span> d<span class="token operator">--</span><span class="token punctuation">;</span> d <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> d<span class="token operator">--</span> <span class="token punctuation">{<!-- --></span><br>            ans<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> d<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">abs2711</span><span class="token punctuation">(</span>ans<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> d<span class="token punctuation">]</span> <span class="token operator">-</span> bits<span class="token punctuation">.</span><span class="token function">OnesCount64</span><span class="token punctuation">(</span>se<span class="token punctuation">)</span><span class="token punctuation">)</span><br>            se <span class="token operator">|=</span> <span class="token function">uint64</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator"><<</span> grid<span class="token punctuation">[</span>i <span class="token operator">+</span> d<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">+</span> d<span class="token punctuation">]</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">return</span> ans<br><span class="token punctuation">}</span><br></code></pre> <br><ul><li>执行用时分布0ms，击败100.00%</li><li>消耗内存分布8.31MB，击败100.00%</li></ul> <br><h3><a id="End_322"></a>End</h3> <br><blockquote> <br> <p>同步发文于<a href="https://letmefly.blog.csdn.net/article/details/146514119" rel="nofollow">CSDN</a>和我的<a href="https://blog.letmefly.xyz/" rel="nofollow">个人博客</a>，原创不易，转载经作者同意后请附上<a href="https://blog.letmefly.xyz/2025/03/25/LeetCode%202711.%E5%AF%B9%E8%A7%92%E7%BA%BF%E4%B8%8A%E4%B8%8D%E5%90%8C%E5%80%BC%E7%9A%84%E6%95%B0%E9%87%8F%E5%B7%AE/" rel="nofollow">原文链接</a>哦~</p> <br> <p>千篇源码题解<a href="https://github.com/LetMeFly666/LeetCode">已开源</a></p> <br></blockquote>