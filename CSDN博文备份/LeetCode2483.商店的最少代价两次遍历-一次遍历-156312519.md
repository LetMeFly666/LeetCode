<h2><a id="LetMeFly2483___1"></a>【LetMeFly】2483.商店的最少代价：两次遍历 -> 一次遍历</h2> <br><p>力扣题目链接：<a href="https://leetcode.cn/problems/minimum-penalty-for-a-shop/" rel="nofollow">https://leetcode.cn/problems/minimum-penalty-for-a-shop/</a></p> <br><p>给你一个顾客访问商店的日志，用一个下标从 <strong>0</strong> 开始且只包含字符 <code>'N'</code> 和 <code>'Y'</code> 的字符串 <code>customers</code> 表示：</p> <br><ul><li>如果第 <code>i</code> 个字符是 <code>'Y'</code> ，它表示第 <code>i</code> 小时有顾客到达。</li><li>如果第 <code>i</code> 个字符是 <code>'N'</code> ，它表示第 <code>i</code> 小时没有顾客到达。</li></ul> <br><p>如果商店在第 <code>j</code> 小时关门（<code>0 <= j <= n</code>），代价按如下方式计算：</p> <br><ul><li>在开门期间，如果某一个小时没有顾客到达，代价增加 <code>1</code> 。</li><li>在关门期间，如果某一个小时有顾客到达，代价增加 <code>1</code> 。</li></ul> <br><p>请你返回在确保代价 <strong>最小</strong> 的前提下，商店的 <strong>最早</strong> 关门时间。</p> <br><p>注意，商店在第 <code>j</code> 小时关门表示在第 <code>j</code> 小时以及之后商店处于关门状态。</p> <br><p> </p> <br><p><strong>示例 1：</strong></p> <br><pre><b>输入：</b>customers = "YYNY"<br><b>输出：</b>2<br><b>解释：</b><br>- 第 0 小时关门，总共 1+1+0+1 = 3 代价。<br>- 第 1 小时关门，总共 0+1+0+1 = 2 代价。<br>- 第 2 小时关门，总共 0+0+0+1 = 1 代价。<br>- 第 3 小时关门，总共 0+0+1+1 = 2 代价。<br>- 第 4 小时关门，总共 0+0+1+0 = 1 代价。<br>在第 2 或第 4 小时关门代价都最小。由于第 2 小时更早，所以最优关门时间是 2 。<br></pre> <br><p><strong>示例 2：</strong></p> <br><pre><b>输入：</b>customers = "NNNNN"<br><b>输出：</b>0<br><b>解释：</b>最优关门时间是 0 ，因为自始至终没有顾客到达。</pre> <br><p><strong>示例 3：</strong></p> <br><pre><b>输入：</b>customers = "YYYY"<br><b>输出：</b>4<br><b>解释：</b>最优关门时间是 4 ，因为每一小时均有顾客到达。<br></pre> <br><p> </p> <br><p><strong>提示：</strong></p> <br><ul><li><code>1 <= customers.length <= 10<sup>5</sup></code></li><li><code>customers</code> 只包含字符 <code>'Y'</code> 和 <code>'N'</code> 。</li></ul> <br><h3><a id="_65"></a>解题方法一：两次遍历</h3> <br><p>先计算下直接不开门的话总代价是多少。</p> <br><p>接着遍历顾客字符串，遍历到第i天时计算这个顾客走之后关门的总代价是多少。</p> <br><p>取一个最小总代价对应的关门时间；如有相同则取最早的那个。</p> <br><p>假设当前总代价为<code>x</code>，准备改为往后一个顾客时间再关门，那么就看下一个时间是<code>Y</code>还是<code>N</code>。如果为<code>Y</code>则总代价减1否则总代价加1。</p> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         l<br>        <br>        <br>         e<br>        <br>        <br>         n<br>        <br>        <br>         (<br>        <br>        <br>         c<br>        <br>        <br>         u<br>        <br>        <br>         s<br>        <br>        <br>         t<br>        <br>        <br>         o<br>        <br>        <br>         m<br>        <br>        <br>         e<br>        <br>        <br>         r<br>        <br>        <br>         s<br>        <br>        <br>         )<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(len(customers))<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">c</span><span class="mord mathnormal">u</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mord mathnormal">m</span><span class="mord mathnormal">ers</span><span class="mclose">))</span></span></span></span></span></li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         1<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(1)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></li></ul> <br><h4><a id="AC_78"></a>AC代码</h4> <br><h5><a id="C_80"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @LastEditTime: 2025-12-26 18:42:18<br> */</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    <span class="token keyword">int</span> <span class="token function">bestClosingTime</span><span class="token punctuation">(</span>string customers<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">int</span> maxium <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">char</span> c <span class="token operator">:</span> customers<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            maxium <span class="token operator">+=</span> c <span class="token operator">==</span> <span class="token char">'Y'</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">int</span> thisCost <span class="token operator">=</span> maxium<span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator"><</span> customers<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>customers<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'Y'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                thisCost<span class="token operator">--</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span><br>                thisCost<span class="token operator">++</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>thisCost <span class="token operator"><</span> maxium<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                maxium <span class="token operator">=</span> thisCost<span class="token punctuation">;</span><br>                ans <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><h3><a id="_110"></a>解题方法二：一次遍历</h3> <br><p>不难发现第一次遍历计算得到的“直接不开门”状态下的代价其实没有意义，将其视为0且后续顾客在此基础上浮动即可。</p> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         l<br>        <br>        <br>         e<br>        <br>        <br>         n<br>        <br>        <br>         (<br>        <br>        <br>         c<br>        <br>        <br>         u<br>        <br>        <br>         s<br>        <br>        <br>         t<br>        <br>        <br>         o<br>        <br>        <br>         m<br>        <br>        <br>         e<br>        <br>        <br>         r<br>        <br>        <br>         s<br>        <br>        <br>         )<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(len(customers))<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">c</span><span class="mord mathnormal">u</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mord mathnormal">m</span><span class="mord mathnormal">ers</span><span class="mclose">))</span></span></span></span></span></li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         1<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(1)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></li></ul> <br><h4><a id="AC_117"></a>AC代码</h4> <br><h5><a id="C_119"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @LastEditTime: 2025-12-26 18:46:24<br> */</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    <span class="token keyword">int</span> <span class="token function">bestClosingTime</span><span class="token punctuation">(</span>string customers<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">int</span> maxium <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">int</span> thisCost <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator"><</span> customers<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>customers<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'Y'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                thisCost<span class="token operator">--</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span><br>                thisCost<span class="token operator">++</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>thisCost <span class="token operator"><</span> maxium<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                maxium <span class="token operator">=</span> thisCost<span class="token punctuation">;</span><br>                ans <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><blockquote> <br> <p>同步发文于<a href="https://letmefly.blog.csdn.net/article/details/156312519" rel="nofollow">CSDN</a>和我的<a href="https://blog.letmefly.xyz/" rel="nofollow">个人博客</a>，原创不易，转载经作者同意后请附上<a href="https://blog.letmefly.xyz/2025/12/26/LeetCode%202483.%E5%95%86%E5%BA%97%E7%9A%84%E6%9C%80%E5%B0%91%E4%BB%A3%E4%BB%B7/" rel="nofollow">原文链接</a>哦~</p> <br> <p>千篇源码题解<a href="https://github.com/LetMeFly666/LeetCode">已开源</a></p> <br></blockquote>