<h2><a id="LetMeFly131OR_2"></a>【LetMeFly】131.分割回文串：二进制枚举OR回溯</h2> <br><p>力扣题目链接：<a href="https://leetcode.cn/problems/palindrome-partitioning/" rel="nofollow">https://leetcode.cn/problems/palindrome-partitioning/</a></p> <br><p>给你一个字符串 <code>s</code>，请你将<em> </em><code>s</code><em> </em>分割成一些子串，使每个子串都是 <strong>回文串</strong> 。返回 <code>s</code> 所有可能的分割方案。</p> <br><p><strong>回文串</strong> 是正着读和反着读都一样的字符串。</p> <br><p> </p> <br><p><strong>示例 1：</strong></p> <br><pre><strong>输入：</strong>s = "aab"<br><strong>输出：</strong>[["a","a","b"],["aa","b"]]<br></pre> <br><p><strong>示例 2：</strong></p> <br><pre><strong>输入：</strong>s = "a"<br><strong>输出：</strong>[["a"]]<br></pre> <br><p> </p> <br><p><strong>提示：</strong></p> <br><ul><li><code>1 <= s.length <= 16</code></li><li><code>s</code> 仅由小写英文字母组成</li></ul> <br><h3><a id="_37"></a>方法一：二进制枚举（状态压缩，暴力解法）</h3> <br><p>字符串的长度最大为16，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>        <br>        <br>          2 <br>         <br>        <br>          16 <br>         <br>        <br>       <br>         × <br>        <br>       <br>         1 <br>        <br>        <br>        <br>          6 <br>         <br>        <br>          2 <br>         <br>        <br>       <br>         = <br>        <br>       <br>         16 <br>        <br>       <br>         , <br>        <br>       <br>         777 <br>        <br>       <br>         , <br>        <br>       <br>         216 <br>        <br>       <br>      <br>        2^{16}\times 16^2=16,777,216 <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8974em; vertical-align: -0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">16</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">6</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8389em; vertical-align: -0.1944em;"></span><span class="mord">16</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">777</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">216</span></span></span></span></span>，实际并不会弯完全执行，可在<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         1 <br>        <br>       <br>         s <br>        <br>       <br>      <br>        1s <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span><span class="mord mathnormal">s</span></span></span></span></span>内解决。</p> <br><p>因此不如枚举“分割位置”，然后判断分割后的子串是否都是回文串。</p> <br><p>因为长度为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         n <br>        <br>       <br>      <br>        n <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span>的字符串最多切<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         n <br>        <br>       <br>         − <br>        <br>       <br>         1 <br>        <br>       <br>      <br>        n-1 <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>刀，那么我们可以用<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         i <br>        <br>       <br>      <br>        i <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span>从<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         0 <br>        <br>       <br>      <br>        0 <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">0</span></span></span></span></span>到<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>        <br>        <br>          2 <br>         <br>         <br>         <br>           n <br>          <br>         <br>           − <br>          <br>         <br>           1 <br>          <br>         <br>        <br>       <br>      <br>        2^{n-1} <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></span>枚举切割状态。</p> <br><p>如果二进制下<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         i <br>        <br>       <br>      <br>        i <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span>的第<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         j <br>        <br>       <br>      <br>        j <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.854em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span></span></span></span></span>位为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         1 <br>        <br>       <br>      <br>        1 <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>，那么就在原字符串第<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         i <br>        <br>       <br>         + <br>        <br>       <br>         1 <br>        <br>       <br>      <br>        i+1 <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7429em; vertical-align: -0.0833em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>个字符后面切一刀。</p> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>         <br>         <br>           2 <br>          <br>         <br>           n <br>          <br>         <br>        <br>          × <br>         <br>         <br>         <br>           n <br>          <br>         <br>           2 <br>          <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(2^n\times n^2) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.6644em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1.0641em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>，其中<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          n <br>         <br>        <br>       <br>         n <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span>是字符串的长度</li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          n <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(n) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>，只需要把某次的切割结果存起来（答案不计入算法空间复杂度）</li></ul> <br><h4><a id="AC_50"></a>AC代码</h4> <br><h5><a id="C___52"></a>C++ - 多层嵌套版</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2022-07-23 11:50:50<br> * @LastEditors: LetMeFly<br> * @LastEditTime: 2022-07-23 11:56:43<br> */</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">private</span><span class="token operator">:</span><br>    <span class="token keyword">inline</span> <span class="token keyword">bool</span> <span class="token function">ok</span><span class="token punctuation">(</span>string<span class="token operator">&</span> s<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator"><</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> s<span class="token punctuation">[</span>s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    vector<span class="token operator"><</span>vector<span class="token operator"><</span>string<span class="token operator">>></span> <span class="token function">partition</span><span class="token punctuation">(</span>string s<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">int</span> n <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// 不如n直接-1</span><br>        vector<span class="token operator"><</span>vector<span class="token operator"><</span>string<span class="token operator">>></span> ans<span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator"><</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator"><<</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">// 枚举切割状态</span><br>            <span class="token keyword">int</span> lastLoc <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>            vector<span class="token operator"><</span>string<span class="token operator">></span> thisSplited<span class="token punctuation">;</span><br>            string thisStr<span class="token punctuation">;</span><br>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator"><</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">// 看第j位是否为1</span><br>                <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator"><<</span> j<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                    thisStr <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>lastLoc<span class="token punctuation">,</span> j <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">-</span> lastLoc<span class="token punctuation">)</span><span class="token punctuation">;</span><br>                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">ok</span><span class="token punctuation">(</span>thisStr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                        <span class="token keyword">goto</span> loop<span class="token punctuation">;</span><br>                    <span class="token punctuation">}</span><br>                    thisSplited<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>thisStr<span class="token punctuation">)</span><span class="token punctuation">;</span><br>                    lastLoc <span class="token operator">=</span> j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><br>                <span class="token punctuation">}</span><br>            <span class="token punctuation">}</span><br>            thisStr <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>lastLoc<span class="token punctuation">,</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> lastLoc<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 切k刀会生成k+1个子串，记得把最后一个子串统计进来</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">ok</span><span class="token punctuation">(</span>thisStr<span class="token punctuation">)</span><span class="token punctuation">)</span><br>                <span class="token keyword">goto</span> loop<span class="token punctuation">;</span><br>            thisSplited<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>thisStr<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            ans<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>thisSplited<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            loop<span class="token operator">:</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><h5><a id="C___100"></a>C++ - 函数调用版</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-03-01 15:34:55<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-03-01 16:01:13<br> * @Description: 头脑不清醒这题写了半小时好难受<br> */</span><br><span class="token comment">/*<br>s = aba<br>n = 3<br>status = 4(共4种状态)<br>*/</span><br><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">private</span><span class="token operator">:</span><br>    <span class="token keyword">int</span> n<span class="token punctuation">;</span><br>    string s<span class="token punctuation">;</span><br><br>    <span class="token keyword">bool</span> <span class="token function">isok</span><span class="token punctuation">(</span><span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">// [l, r)</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span>r<span class="token operator">--</span><span class="token punctuation">;</span> l <span class="token operator"><</span> r<span class="token punctuation">;</span> l<span class="token operator">++</span><span class="token punctuation">,</span> r<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>l<span class="token punctuation">]</span> <span class="token operator">!=</span> s<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">bool</span> <span class="token function">isOk_all</span><span class="token punctuation">(</span><span class="token keyword">int</span> code<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">int</span> l <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> r <span class="token operator"><</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> r<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>code <span class="token operator">>></span> r <span class="token operator">&</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isok</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> r <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br>                <span class="token punctuation">}</span><br>                l <span class="token operator">=</span> r <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> <span class="token function">isok</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">void</span> <span class="token function">store</span><span class="token punctuation">(</span>vector<span class="token operator"><</span>vector<span class="token operator"><</span>string<span class="token operator">>></span><span class="token operator">&</span> ans<span class="token punctuation">,</span> <span class="token keyword">int</span> code<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        ans<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">int</span> l <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> r <span class="token operator"><</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> r<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>code <span class="token operator">>></span> r <span class="token operator">&</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                ans<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> r <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                l <span class="token operator">=</span> r <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        ans<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> n <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    vector<span class="token operator"><</span>vector<span class="token operator"><</span>string<span class="token operator">>></span> <span class="token function">partition</span><span class="token punctuation">(</span>string s<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        n <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">this</span><span class="token operator">-></span>s <span class="token operator">=</span> <span class="token function">move</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">int</span> status <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator"><<</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        vector<span class="token operator"><</span>vector<span class="token operator"><</span>string<span class="token operator">>></span> ans<span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> c <span class="token operator"><</span> status<span class="token punctuation">;</span> c<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isOk_all</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                <span class="token function">store</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><h3><a id="_170"></a>方法二：回溯</h3> <br><p>写一个函数<code>dfs(start)</code>来分割字符串<code>s</code>从下标<code>start</code>开始的子字符串。</p> <br><p>首先，如果<code>start</code>已经越界，则说明找到了一种合理的分割方法，将这种分割方案加入答案数组种并返回。</p> <br><p>依次枚举这次的子字符串。尝试将找到的下标从<code>start</code>开始的<strong>回文</strong>字符串加入本次分割方案，继续<code>dfs</code>，并在<code>dfs</code>结束后回滚(撤销这次子回文串的选择)。</p> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>         <br>         <br>           2 <br>          <br>         <br>           n <br>          <br>         <br>        <br>          × <br>         <br>         <br>         <br>           n <br>          <br>         <br>           2 <br>          <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(2^n\times n^2) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.6644em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1.0641em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>，其中<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          n <br>         <br>        <br>       <br>         n <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span>是字符串的长度</li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>         <br>         <br>           n <br>          <br>         <br>           2 <br>          <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(n^2) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.0641em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></li></ul> <br><h4><a id="AC_181"></a>AC代码</h4> <br><h5><a id="C_183"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-03-01 16:02:37<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-03-01 16:11:13<br> * @Descriptions: AC,91.81%,95.10%<br> */</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">private</span><span class="token operator">:</span><br>    string s<span class="token punctuation">;</span><br>    vector<span class="token operator"><</span>string<span class="token operator">></span> now<span class="token punctuation">;</span><br>    vector<span class="token operator"><</span>vector<span class="token operator"><</span>string<span class="token operator">>></span> ans<span class="token punctuation">;</span><br><br>    <span class="token keyword">bool</span> <span class="token function">isok</span><span class="token punctuation">(</span><span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">// [l, r]</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> l <span class="token operator"><</span> r<span class="token punctuation">;</span> l<span class="token operator">++</span><span class="token punctuation">,</span> r<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>l<span class="token punctuation">]</span> <span class="token operator">!=</span> s<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> l<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>l <span class="token operator">==</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            ans<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">return</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> r <span class="token operator">=</span> l<span class="token punctuation">;</span> r <span class="token operator"><</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> r<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isok</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                now<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> r <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                <span class="token function">dfs</span><span class="token punctuation">(</span>r <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                now<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    vector<span class="token operator"><</span>vector<span class="token operator"><</span>string<span class="token operator">>></span> <span class="token function">partition</span><span class="token punctuation">(</span>string s<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">this</span><span class="token operator">-></span>s <span class="token operator">=</span> <span class="token function">move</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">return</span> <span class="token function">move</span><span class="token punctuation">(</span>ans<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><h5><a id="Python_231"></a>Python</h5> <br><pre><code class="prism language-python"><span class="token triple-quoted-string string">'''<br>Author: LetMeFly<br>Date: 2025-03-01 16:13:32<br>LastEditors: LetMeFly.xyz<br>LastEditTime: 2025-03-01 16:17:40<br>'''</span><br><span class="token keyword">from</span> typing <span class="token keyword">import</span> List<br><br><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span><br>    <span class="token keyword">def</span> <span class="token function">ok</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span><br>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span><br>            <span class="token keyword">if</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> s<span class="token punctuation">[</span><span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">-</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span><br>                <span class="token keyword">return</span> <span class="token boolean">False</span><br>        <span class="token keyword">return</span> <span class="token boolean">True</span><br><br>    <span class="token keyword">def</span> <span class="token function">dfs</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> l<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token boolean">None</span><span class="token punctuation">:</span><br>        <span class="token keyword">if</span> l <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>s<span class="token punctuation">)</span><span class="token punctuation">:</span><br>            self<span class="token punctuation">.</span>ans<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> self<span class="token punctuation">.</span>now<span class="token punctuation">]</span><span class="token punctuation">)</span><br>            <span class="token keyword">return</span><br>        <span class="token keyword">for</span> r <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span><br>            temp <span class="token operator">=</span> self<span class="token punctuation">.</span>s<span class="token punctuation">[</span>l<span class="token punctuation">:</span>r <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><br>            <span class="token keyword">if</span> self<span class="token punctuation">.</span>ok<span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">:</span><br>                self<span class="token punctuation">.</span>now<span class="token punctuation">.</span>append<span class="token punctuation">(</span>temp<span class="token punctuation">)</span><br>                self<span class="token punctuation">.</span>dfs<span class="token punctuation">(</span>r <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><br>                self<span class="token punctuation">.</span>now<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span><br><br>    <span class="token keyword">def</span> <span class="token function">partition</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span><br>        self<span class="token punctuation">.</span>ans<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br>        self<span class="token punctuation">.</span>now<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br>        self<span class="token punctuation">.</span>s <span class="token operator">=</span> s<br>        self<span class="token punctuation">.</span>dfs<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><br>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>ans<br></code></pre> <br><h5><a id="Golang_268"></a>Golang</h5> <br><pre><code class="prism language-go"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-03-01 16:28:38<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-03-01 16:41:12<br> */</span><br><span class="token keyword">package</span> main<br><br><span class="token keyword">type</span> Solution_PP <span class="token keyword">struct</span> <span class="token punctuation">{<!-- --></span><br>    s <span class="token builtin">string</span><br>    ans <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><br>    now <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><br>    <br><span class="token punctuation">}</span><br><br><span class="token keyword">func</span> <span class="token punctuation">(</span>this<span class="token operator">*</span> Solution_PP<span class="token punctuation">)</span> <span class="token function">ok</span><span class="token punctuation">(</span>s <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{<!-- --></span><br>    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator"><</span> <span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">if</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> s<span class="token punctuation">[</span><span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">-</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">return</span> <span class="token boolean">false</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">return</span> <span class="token boolean">true</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">func</span> <span class="token punctuation">(</span>this<span class="token operator">*</span> Solution_PP<span class="token punctuation">)</span> <span class="token function">dfs</span><span class="token punctuation">(</span>l <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>    <span class="token keyword">if</span> l <span class="token operator">==</span> <span class="token function">len</span><span class="token punctuation">(</span>this<span class="token punctuation">.</span>s<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        this<span class="token punctuation">.</span>ans <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>this<span class="token punctuation">.</span>ans<span class="token punctuation">,</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span> this<span class="token punctuation">.</span>now<span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>        <span class="token keyword">return</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">for</span> r <span class="token operator">:=</span> l<span class="token punctuation">;</span> r <span class="token operator"><</span> <span class="token function">len</span><span class="token punctuation">(</span>this<span class="token punctuation">.</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> r<span class="token operator">++</span> <span class="token punctuation">{<!-- --></span><br>        temp <span class="token operator">:=</span> this<span class="token punctuation">.</span>s<span class="token punctuation">[</span>l<span class="token punctuation">:</span>r <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><br>        <span class="token keyword">if</span> this<span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            this<span class="token punctuation">.</span>now <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>this<span class="token punctuation">.</span>now<span class="token punctuation">,</span> temp<span class="token punctuation">)</span><br>            this<span class="token punctuation">.</span><span class="token function">dfs</span><span class="token punctuation">(</span>r <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><br>            this<span class="token punctuation">.</span>now <span class="token operator">=</span> this<span class="token punctuation">.</span>now<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token function">len</span><span class="token punctuation">(</span>this<span class="token punctuation">.</span>now<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">func</span> <span class="token function">partition</span><span class="token punctuation">(</span>s <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token punctuation">{<!-- --></span><br>    solution <span class="token operator">:=</span> Solution_PP<span class="token punctuation">{<!-- --></span>s<span class="token punctuation">:</span> s<span class="token punctuation">}</span><br>    solution<span class="token punctuation">.</span><span class="token function">dfs</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><br>    <span class="token keyword">return</span> solution<span class="token punctuation">.</span>ans<br><span class="token punctuation">}</span><br></code></pre> <br><h5><a id="Java_317"></a>Java</h5> <br><pre><code class="prism language-java"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-03-01 16:18:55<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-03-01 16:27:47<br> */</span><br><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span><br><br><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br>    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation"><</span><span class="token class-name">List</span><span class="token punctuation"><</span><span class="token class-name">String</span><span class="token punctuation">></span><span class="token punctuation">></span></span> ans<span class="token punctuation">;</span><br>    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation"><</span><span class="token class-name">String</span><span class="token punctuation">></span></span> now<span class="token punctuation">;</span><br>    <span class="token keyword">private</span> <span class="token class-name">String</span> s<span class="token punctuation">;</span><br>    <br>    <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">ok</span><span class="token punctuation">(</span><span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">// [l, r]</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> l <span class="token operator"><</span> r<span class="token punctuation">;</span> l<span class="token operator">++</span><span class="token punctuation">,</span> r<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span> <span class="token operator">!=</span> s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> l<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>l <span class="token operator">==</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            ans<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation"><</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>now<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">return</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> r <span class="token operator">=</span> l<span class="token punctuation">;</span> r <span class="token operator"><</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> r<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">ok</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                now<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> r <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                <span class="token function">dfs</span><span class="token punctuation">(</span>r <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                now<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation"><</span><span class="token class-name">List</span><span class="token punctuation"><</span><span class="token class-name">String</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">partition</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        ans <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation"><</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation"><</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">this</span><span class="token punctuation">.</span>s <span class="token operator">=</span> s<span class="token punctuation">;</span><br>        <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br></code></pre> <br><h3><a id="End_368"></a>End</h3> <br><blockquote> <br> <p>同步发文于<a href="https://letmefly.blog.csdn.net/article/details/125946017" rel="nofollow">CSDN</a>和我的<a href="https://blog.letmefly.xyz/" rel="nofollow">个人博客</a>，原创不易，转载经作者同意后请附上<a href="https://blog.letmefly.xyz/2022/07/23/LeetCode%200131.%E5%88%86%E5%89%B2%E5%9B%9E%E6%96%87%E4%B8%B2/" rel="nofollow">原文链接</a>哦~</p> <br> <p>千篇源码题解<a href="https://github.com/LetMeFly666/LeetCode">已开源</a></p> <br></blockquote>