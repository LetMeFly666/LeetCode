<h2><a id="LetMeFly1161_1"></a>【LetMeFly】1161.最大层内元素和：层序遍历</h2> <br><p>力扣题目链接：<a href="https://leetcode.cn/problems/maximum-level-sum-of-a-binary-tree/" rel="nofollow">https://leetcode.cn/problems/maximum-level-sum-of-a-binary-tree/</a></p> <br><p>给你一个二叉树的根节点 <code>root</code>。设根节点位于二叉树的第 <code>1</code> 层，而根节点的子节点位于第 <code>2</code> 层，依此类推。</p> <br><p>请返回层内元素之和 <strong>最大</strong> 的那几层（可能只有一层）的层号，并返回其中 <strong>最小</strong> 的那个。</p> <br><p> </p> <br><p><strong>示例 1：</strong></p> <br><p><strong><img alt="" src="https://i-blog.csdnimg.cn/img_convert/ed8439511048fab73a47dbbcdab43182.jpeg" /></strong></p> <br><pre><strong>输入：</strong>root = [1,7,0,7,-8,null,null]<br><strong>输出：</strong>2<br><strong>解释：</strong><br>第 1 层各元素之和为 1，<br>第 2 层各元素之和为 7 + 0 = 7，<br>第 3 层各元素之和为 7 + -8 = -1，<br>所以我们返回第 2 层的层号，它的层内元素之和最大。<br></pre> <br><p><strong>示例 2：</strong></p> <br><pre><strong>输入：</strong>root = [989,null,10250,98693,-89388,null,null,null,-32127]<br><strong>输出：</strong>2<br></pre> <br><p> </p> <br><p><strong>提示：</strong></p> <br><ul><li>树中的节点数在 <code>[1, 10<sup>4</sup>]</code>范围内</li><li><code>-10<sup>5</sup> <= Node.val <= 10<sup>5</sup></code></li></ul> <br><h3><a id="__BFS_43"></a>方法一：层序遍历 + 广搜BFS</h3> <br><p>有关二叉树的层序遍历，之前已经讲过，详细方法可参考 <a href="https://blog.letmefly.xyz/2022/07/04/LeetCode%200107.%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E5%B1%82%E5%BA%8F%E9%81%8D%E5%8E%86II/" rel="nofollow">LeetCode 0107.二叉树的层序遍历II の 题解</a></p> <br><p>本题，同样地，我们使用优先队列来对二叉树进行层序遍历。</p> <br><ul><li>用变量<code>maxSum</code>记录当前的单层最大和</li><li>用变量<code>ans</code>来记录取得<code>maxSum</code>的最小层号</li><li>用变量<code>nowLayer</code>记录当前遍历到的层的层号</li></ul> <br><p>初始值<code>maxSum</code>为<code>int</code>范围内的最小值<code>INT_MIN</code>，<code>ans</code>取任意值即可，<code>nowLayer</code>的值取<code>1</code>。</p> <br><p>在遍历到某一层时，用一个临时变量<code>thisSum</code>统计这一层的节点值之和</p> <br><p>如果这一层遍历结束后，<code>thisSum</code>的值大于之前所记录的最大值<code>maxSum</code></p> <br><p>那么就更新<code>maxSum</code>为<code>thisSum</code>，并将<code>ans</code>赋值为当前层号<code>nowLayer</code>。</p> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          N <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(N) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.109em;">N</span><span class="mclose">)</span></span></span></span></span>，其中<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          N <br>         <br>        <br>       <br>         N <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.109em;">N</span></span></span></span></span>是节点个数。</li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          N <br>         <br>        <br>          2 <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(N2) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.109em;">N</span><span class="mord">2</span><span class="mclose">)</span></span></span></span></span>，其中<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          N <br>         <br>        <br>          2 <br>         <br>        <br>       <br>         N2 <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.109em;">N</span><span class="mord">2</span></span></span></span></span>是节点最多的一层的节点数。</li></ul> <br><h4><a id="AC_64"></a>AC代码</h4> <br><h5><a id="C_66"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    <span class="token keyword">int</span> <span class="token function">maxLevelSum</span><span class="token punctuation">(</span>TreeNode<span class="token operator">*</span> root<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">int</span> maxSum <span class="token operator">=</span> INT_MIN<span class="token punctuation">;</span><br>        <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><br>        <span class="token keyword">int</span> nowLayer <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><br>        <br>        queue<span class="token operator"><</span>TreeNode<span class="token operator">*</span><span class="token operator">></span> q<span class="token punctuation">;</span><br>        q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">int</span> thisLayerNum <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 这一层有几个元素</span><br>            <span class="token keyword">int</span> thisSum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator"><</span> thisLayerNum<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                TreeNode<span class="token operator">*</span> thisNode <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                thisSum <span class="token operator">+=</span> thisNode<span class="token operator">-></span>val<span class="token punctuation">;</span><br>                <span class="token keyword">if</span> <span class="token punctuation">(</span>thisNode<span class="token operator">-></span>left<span class="token punctuation">)</span><br>                    q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>thisNode<span class="token operator">-></span>left<span class="token punctuation">)</span><span class="token punctuation">;</span><br>                <span class="token keyword">if</span> <span class="token punctuation">(</span>thisNode<span class="token operator">-></span>right<span class="token punctuation">)</span><br>                    q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>thisNode<span class="token operator">-></span>right<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>thisSum <span class="token operator">></span> maxSum<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                maxSum <span class="token operator">=</span> thisSum<span class="token punctuation">;</span><br>                ans <span class="token operator">=</span> nowLayer<span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            nowLayer<span class="token operator">++</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><p>新code和三年前nowLayer变量名一样诶。</p> <br><h5><a id="Python_104"></a>Python</h5> <br><pre><code class="prism language-python"><span class="token triple-quoted-string string">'''<br>LastEditTime: 2026-01-06 10:44:20<br>'''</span><br><span class="token keyword">from</span> typing <span class="token keyword">import</span> Optional<br><span class="token keyword">from</span> collections <span class="token keyword">import</span> deque<br><br><span class="token comment"># # Definition for a binary tree node.</span><br><span class="token comment"># class TreeNode:</span><br><span class="token comment">#     def __init__(self, val=0, left=None, right=None):</span><br><span class="token comment">#         self.val = val</span><br><span class="token comment">#         self.left = left</span><br><span class="token comment">#         self.right = right</span><br><br><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span><br>    <span class="token keyword">def</span> <span class="token function">maxLevelSum</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> root<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>TreeNode<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span><br>        ans<span class="token punctuation">,</span> maximum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1000000000</span><br>        nowLayer <span class="token operator">=</span> <span class="token number">0</span><br>        q <span class="token operator">=</span> deque<span class="token punctuation">(</span><span class="token punctuation">[</span>root<span class="token punctuation">]</span><span class="token punctuation">)</span><br>        <span class="token keyword">while</span> q<span class="token punctuation">:</span><br>            nowLayer <span class="token operator">+=</span> <span class="token number">1</span><br>            layerSum <span class="token operator">=</span> <span class="token number">0</span><br>            newQ <span class="token operator">=</span> deque<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>            <span class="token keyword">for</span> node <span class="token keyword">in</span> q<span class="token punctuation">:</span><br>                layerSum <span class="token operator">+=</span> node<span class="token punctuation">.</span>val<br>                <span class="token keyword">if</span> node<span class="token punctuation">.</span>left<span class="token punctuation">:</span><br>                    newQ<span class="token punctuation">.</span>append<span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">)</span><br>                <span class="token keyword">if</span> node<span class="token punctuation">.</span>right<span class="token punctuation">:</span><br>                    newQ<span class="token punctuation">.</span>append<span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">)</span><br>            q <span class="token operator">=</span> newQ<br>            <span class="token keyword">if</span> layerSum <span class="token operator">></span> maximum<span class="token punctuation">:</span><br>                maximum <span class="token operator">=</span> layerSum<br>                ans <span class="token operator">=</span> nowLayer<br>        <span class="token keyword">return</span> ans<br></code></pre> <br><h5><a id="Java_142"></a>Java</h5> <br><pre><code class="prism language-java"><span class="token comment">/*<br> * @LastEditTime: 2026-01-06 10:54:39<br> */</span><br><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Deque</span></span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayDeque</span></span><span class="token punctuation">;</span><br><br><span class="token comment">/**<br> * Definition for a binary tree node.<br> * public class TreeNode {<br> *     int val;<br> *     TreeNode left;<br> *     TreeNode right;<br> *     TreeNode() {}<br> *     TreeNode(int val) { this.val = val; }<br> *     TreeNode(int val, TreeNode left, TreeNode right) {<br> *         this.val = val;<br> *         this.left = left;<br> *         this.right = right;<br> *     }<br> * }<br> */</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">maxLevelSum</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> root<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> maximum <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1000000000</span><span class="token punctuation">;</span><br>        <span class="token keyword">int</span> layerNum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token class-name">Deque</span><span class="token generics"><span class="token punctuation"><</span><span class="token class-name">TreeNode</span><span class="token punctuation">></span></span> q <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayDeque</span><span class="token generics"><span class="token punctuation"><</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        q<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            layerNum<span class="token operator">++</span><span class="token punctuation">;</span><br>            <span class="token keyword">int</span> layerSum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                <span class="token class-name">TreeNode</span> node <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                layerSum <span class="token operator">+=</span> node<span class="token punctuation">.</span>val<span class="token punctuation">;</span><br>                <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                    q<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span><br>                <span class="token punctuation">}</span><br>                <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                    q<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span><br>                <span class="token punctuation">}</span><br>            <span class="token punctuation">}</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>layerSum <span class="token operator">></span> maximum<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                maximum <span class="token operator">=</span> layerSum<span class="token punctuation">;</span><br>                ans <span class="token operator">=</span> layerNum<span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br></code></pre> <br><h5><a id="Golang_195"></a>Golang</h5> <br><pre><code class="prism language-go"><span class="token comment">/*<br> * @LastEditTime: 2026-01-06 10:37:44<br> */</span><br><span class="token keyword">package</span> main<br><br><span class="token keyword">import</span> <span class="token string">"container/list"</span><br><br><span class="token comment">/**<br> * Definition for a binary tree node.<br> * type TreeNode struct {<br> *     Val int<br> *     Left *TreeNode<br> *     Right *TreeNode<br> * }<br> */</span><br><span class="token keyword">func</span> <span class="token function">maxLevelSum</span><span class="token punctuation">(</span>root <span class="token operator">*</span>TreeNode<span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span><br>    ans<span class="token punctuation">,</span> maximum <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1000000000</span><br>    nowLayer <span class="token operator">:=</span> <span class="token number">0</span><br>    q <span class="token operator">:=</span> list<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    q<span class="token punctuation">.</span><span class="token function">PushBack</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><br>    <span class="token keyword">for</span> q<span class="token punctuation">.</span><span class="token function">Len</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">{<!-- --></span><br>        nowLayer<span class="token operator">++</span><br>        layerSum <span class="token operator">:=</span> <span class="token number">0</span><br>        <span class="token keyword">for</span> t <span class="token operator">:=</span> q<span class="token punctuation">.</span><span class="token function">Len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> t <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span> t<span class="token operator">--</span> <span class="token punctuation">{<!-- --></span><br>            nodeElement <span class="token operator">:=</span> q<span class="token punctuation">.</span><span class="token function">Front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>            node <span class="token operator">:=</span> nodeElement<span class="token punctuation">.</span>Value<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token operator">*</span>TreeNode<span class="token punctuation">)</span><br>            q<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>nodeElement<span class="token punctuation">)</span><br>            layerSum <span class="token operator">+=</span> node<span class="token punctuation">.</span>Val<br>            <span class="token keyword">if</span> node<span class="token punctuation">.</span>Left <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{<!-- --></span><br>                q<span class="token punctuation">.</span><span class="token function">PushBack</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>Left<span class="token punctuation">)</span><br>            <span class="token punctuation">}</span><br>            <span class="token keyword">if</span> node<span class="token punctuation">.</span>Right <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{<!-- --></span><br>                q<span class="token punctuation">.</span><span class="token function">PushBack</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>Right<span class="token punctuation">)</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">if</span> layerSum <span class="token operator">></span> maximum <span class="token punctuation">{<!-- --></span><br>            maximum <span class="token operator">=</span> layerSum<br>            ans <span class="token operator">=</span> nowLayer<br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">return</span> ans<br><span class="token punctuation">}</span><br></code></pre> <br><h5><a id="Rust_242"></a>Rust</h5> <br><pre><code class="prism language-rust"><span class="token comment">/*<br> * @LastEditTime: 2026-01-06 13:26:09<br> */</span><br><span class="token keyword">use</span> <span class="token namespace">std<span class="token punctuation">::</span>rc<span class="token punctuation">::</span></span><span class="token class-name">Rc</span><span class="token punctuation">;</span><br><span class="token keyword">use</span> <span class="token namespace">std<span class="token punctuation">::</span>cell<span class="token punctuation">::</span></span><span class="token class-name">RefCell</span><span class="token punctuation">;</span><br><span class="token keyword">use</span> <span class="token namespace">std<span class="token punctuation">::</span>collections<span class="token punctuation">::</span></span><span class="token class-name">VecDeque</span><span class="token punctuation">;</span><br><br><span class="token keyword">impl</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br>    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">max_level_sum</span><span class="token punctuation">(</span>root<span class="token punctuation">:</span> <span class="token class-name">Option</span><span class="token operator"><</span><span class="token class-name">Rc</span><span class="token operator"><</span><span class="token class-name">RefCell</span><span class="token operator"><</span><span class="token class-name">TreeNode</span><span class="token operator">>></span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token keyword">i32</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">let</span> <span class="token keyword">mut</span> ans <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><br>        <span class="token keyword">let</span> <span class="token keyword">mut</span> maximum <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1000000000</span><span class="token punctuation">;</span><br>        <span class="token keyword">let</span> <span class="token keyword">mut</span> layer_num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">let</span> <span class="token keyword">mut</span> q<span class="token punctuation">:</span> <span class="token class-name">VecDeque</span><span class="token operator"><</span><span class="token class-name">Rc</span><span class="token operator"><</span><span class="token class-name">RefCell</span><span class="token operator"><</span><span class="token class-name">TreeNode</span><span class="token operator">>></span><span class="token operator">></span> <span class="token operator">=</span> <span class="token class-name">VecDeque</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span> <span class="token operator">=</span> root <span class="token punctuation">{<!-- --></span><br>            q<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">while</span> <span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">is_empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            layer_num <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span><br>            <span class="token keyword">let</span> <span class="token keyword">mut</span> layer_sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>            <span class="token keyword">let</span> size<span class="token punctuation">:</span> <span class="token keyword">usize</span> <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">..</span>size <span class="token punctuation">{<!-- --></span><br>                <span class="token keyword">let</span> node_rc<span class="token punctuation">:</span> <span class="token class-name">Rc</span><span class="token operator"><</span><span class="token class-name">RefCell</span><span class="token operator"><</span><span class="token class-name">TreeNode</span><span class="token operator">>></span> <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">pop_front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                <span class="token keyword">let</span> node<span class="token punctuation">:</span> <span class="token namespace">std<span class="token punctuation">::</span>cell<span class="token punctuation">::</span></span><span class="token class-name">Ref</span><span class="token operator"><</span><span class="token lifetime-annotation symbol">'_</span><span class="token punctuation">,</span> <span class="token class-name">TreeNode</span><span class="token operator">></span> <span class="token operator">=</span> node_rc<span class="token punctuation">.</span><span class="token function">borrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                layer_sum <span class="token operator">+=</span> node<span class="token punctuation">.</span>val<span class="token punctuation">;</span><br>                <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span> <span class="token operator">=</span> node<span class="token punctuation">.</span>left<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                    q<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span><br>                <span class="token punctuation">}</span><br>                <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span> <span class="token operator">=</span> node<span class="token punctuation">.</span>right<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                    q<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span><br>                <span class="token punctuation">}</span><br>            <span class="token punctuation">}</span><br>            <span class="token keyword">if</span> layer_sum <span class="token operator">></span> maximum <span class="token punctuation">{<!-- --></span><br>                maximum <span class="token operator">=</span> layer_sum<span class="token punctuation">;</span><br>                ans <span class="token operator">=</span> layer_num<span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        ans<br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br></code></pre> <br><blockquote> <br> <p>同步发文于<a href="https://letmefly.blog.csdn.net/article/details/126082726" rel="nofollow">CSDN</a>和我的<a href="https://blog.letmefly.xyz/" rel="nofollow">个人博客</a>，原创不易，转载经作者同意后请附上<a href="https://blog.letmefly.xyz/2022/07/31/LeetCode%201161.%E6%9C%80%E5%A4%A7%E5%B1%82%E5%86%85%E5%85%83%E7%B4%A0%E5%92%8C/" rel="nofollow">原文链接</a>哦~</p> <br> <p>千篇源码题解<a href="https://github.com/LetMeFly666/LeetCode">已开源</a></p> <br></blockquote>