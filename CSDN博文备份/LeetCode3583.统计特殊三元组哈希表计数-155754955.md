<h2><a id="LetMeFly3583_1"></a>【LetMeFly】3583.统计特殊三元组：哈希表计数</h2> <br><p>力扣题目链接：<a href="https://leetcode.cn/problems/count-special-triplets/" rel="nofollow">https://leetcode.cn/problems/count-special-triplets/</a></p> <br><p>给你一个整数数组 <code>nums</code>。</p> <br><p><strong>特殊三元组 </strong>定义为满足以下条件的下标三元组 <code>(i, j, k)</code>：</p> <br><ul><li><code>0 <= i < j < k < n</code>，其中 <code>n = nums.length</code></li><li><code>nums[i] == nums[j] * 2</code></li><li><code>nums[k] == nums[j] * 2</code></li></ul> <br><p>返回数组中 <strong>特殊三元组 </strong>的总数。</p> <br><p>由于答案可能非常大，请返回结果对 <code>10<sup>9</sup> + 7</code> 取余数后的值。</p> <br><p> </p> <br><p><strong class="example">示例 1：</strong></p> <br><div class="example-block"> <br> <p><strong>输入：</strong> <span class="example-io">nums = [6,3,6]</span></p> <br></div><br><p><strong>输出：</strong> <span class="example-io">1</span></p> <br><p><strong>解释：</strong></p> <br><p>唯一的特殊三元组是 <code>(i, j, k) = (0, 1, 2)</code>，其中：</p> <br><ul><li><code>nums[0] = 6</code>, <code>nums[1] = 3</code>, <code>nums[2] = 6</code></li><li><code>nums[0] = nums[1] * 2 = 3 * 2 = 6</code></li><li><code>nums[2] = nums[1] * 2 = 3 * 2 = 6</code></li></ul> <br><p><strong class="example">示例 2：</strong></p> <br><div class="example-block"> <br> <p><strong>输入：</strong> <span class="example-io">nums = [0,1,0,0]</span></p> <br></div><br><p><strong>输出：</strong> <span class="example-io">1</span></p> <br><p><strong>解释：</strong></p> <br><p>唯一的特殊三元组是 <code>(i, j, k) = (0, 2, 3)</code>，其中：</p> <br><ul><li><code>nums[0] = 0</code>, <code>nums[2] = 0</code>, <code>nums[3] = 0</code></li><li><code>nums[0] = nums[2] * 2 = 0 * 2 = 0</code></li><li><code>nums[3] = nums[2] * 2 = 0 * 2 = 0</code></li></ul> <br><p><strong class="example">示例 3：</strong></p> <br><div class="example-block"> <br> <p><strong>输入：</strong> <span class="example-io">nums = [8,4,2,8,4]</span></p> <br></div><br><p><strong>输出：</strong> <span class="example-io">2</span></p> <br><p><strong>解释：</strong></p> <br><p>共有两个特殊三元组：</p> <br><ul><li><code>(i, j, k) = (0, 1, 3)</code> <pre><code><ul><br>	<li><code>nums[0] = 8</code>, <code>nums[1] = 4</code>, <code>nums[3] = 8</code></li><br>	<li><code>nums[0] = nums[1] * 2 = 4 * 2 = 8</code></li><br>	<li><code>nums[3] = nums[1] * 2 = 4 * 2 = 8</code></li><br></ul><br></li><br><li><code>(i, j, k) = (1, 2, 4)</code><br><ul><br>	<li><code>nums[1] = 4</code>, <code>nums[2] = 2</code>, <code>nums[4] = 4</code></li><br>	<li><code>nums[1] = nums[2] * 2 = 2 * 2 = 4</code></li><br>	<li><code>nums[4] = nums[2] * 2 = 2 * 2 = 4</code></li><br></ul><br></li><br></code></pre> </li></ul> <br><p> </p> <br><p><strong>提示：</strong></p> <br><ul><li><code>3 <= n == nums.length <= 10<sup>5</sup></code></li><li><code>0 <= nums[i] <= 10<sup>5</sup></code></li></ul> <br><h3><a id="_98"></a>解题方法：哈希表计数</h3> <br><p>使用一个哈希表，统计nums中每个数分别出现了多少次。</p> <br><p>接着再次遍历nums数组，再使用一个哈希表，统计到目前为止每个数分别出现了多少次。</p> <br><p>假设当前遍历元素为<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        t<br>       <br>      <br>      <br>       t<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span></span>，那么在此之前<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        2<br>       <br>       <br>        t<br>       <br>      <br>      <br>       2t<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">2</span><span class="mord mathnormal">t</span></span></span></span></span>出现的次数乘以<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        2<br>       <br>       <br>        t<br>       <br>      <br>      <br>       2t<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">2</span><span class="mord mathnormal">t</span></span></span></span></span>在此之后出现的次数(<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        出现总次数<br>       <br>       <br>        −<br>       <br>       <br>        此前出现次数<br>       <br>      <br>      <br>       出现总次数-此前出现次数<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7667em; vertical-align: -0.0833em;"></span><span class="mord cjk_fallback">出现总次数</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord cjk_fallback">此前出现次数</span></span></span></span></span>)累加到答案中。</p> <br><p>注意：</p> <br><ol><li>特判<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         t<br>        <br>        <br>         =<br>        <br>        <br>         0<br>        <br>       <br>       <br>        t=0<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">0</span></span></span></span></span>时</li><li>其实也可以使用64位整数并且只在最后取一次模</li></ol> <br><h4><a id="_111"></a>时空复杂度分析</h4> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         l<br>        <br>        <br>         e<br>        <br>        <br>         n<br>        <br>        <br>         (<br>        <br>        <br>         n<br>        <br>        <br>         u<br>        <br>        <br>         m<br>        <br>        <br>         s<br>        <br>        <br>         )<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(len(nums))<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mclose">))</span></span></span></span></span></li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         l<br>        <br>        <br>         e<br>        <br>        <br>         n<br>        <br>        <br>         (<br>        <br>        <br>         n<br>        <br>        <br>         u<br>        <br>        <br>         m<br>        <br>        <br>         s<br>        <br>        <br>         )<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(len(nums))<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mclose">))</span></span></span></span></span></li></ul> <br><h4><a id="AC_116"></a>AC代码</h4> <br><h5><a id="C_118"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @LastEditTime: 2025-12-09 18:43:53<br> */</span><br><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ll<span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token keyword">long</span> <span class="token keyword">long</span> MOD <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">;</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    <span class="token keyword">int</span> <span class="token function">specialTriplets</span><span class="token punctuation">(</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        ll ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        unordered_map<span class="token operator"><</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span> total<span class="token punctuation">,</span> now<span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> t <span class="token operator">:</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            total<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> t <span class="token operator">:</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">int</span> finding <span class="token operator">=</span> t <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span>finding<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                ll left <span class="token operator">=</span> now<span class="token punctuation">[</span>finding<span class="token punctuation">]</span><span class="token punctuation">;</span><br>                ans <span class="token operator">=</span> <span class="token punctuation">(</span>ans <span class="token operator">+</span> left <span class="token operator">*</span> <span class="token punctuation">(</span>total<span class="token punctuation">[</span>finding<span class="token punctuation">]</span> <span class="token operator">-</span> left <span class="token operator">-</span> <span class="token punctuation">(</span>t <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> MOD<span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            now<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><blockquote> <br> <p>同步发文于<a href="https://letmefly.blog.csdn.net/article/details/155754955" rel="nofollow">CSDN</a>和我的<a href="https://blog.letmefly.xyz/" rel="nofollow">个人博客</a>，原创不易，转载经作者同意后请附上<a href="https://blog.letmefly.xyz/2025/12/09/LeetCode%203583.%E7%BB%9F%E8%AE%A1%E7%89%B9%E6%AE%8A%E4%B8%89%E5%85%83%E7%BB%84/" rel="nofollow">原文链接</a>哦~</p> <br> <p>千篇源码题解<a href="https://github.com/LetMeFly666/LeetCode">已开源</a></p> <br></blockquote>