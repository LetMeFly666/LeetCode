<h2><a id="Git___1"></a>Git - 记录一次由于少输入了一个参数导致的更改丢失</h2> <br><h3><a id="_3"></a>前言</h3> <br><p>某晚我激情开发了几个小时，中途没有进行commit存档。准备睡觉时，我想创建一个新的分支并将今晚所有更改提交到新分支上（似乎应该开发时候就创建？）。</p> <br><p>然后因为少输入了一个参数，导致被跟踪过的文件的更改全部消失了。</p> <br><h3><a id="_9"></a>成因</h3> <br><p>我想创建并切换到<code>api</code>分支：</p> <br><pre><code class="prism language-bash"><span class="token function">git</span> checkout <span class="token parameter variable">-b</span> api<br></code></pre> <br><p>结果一困少输了个<code>-b</code>，变成了：</p> <br><pre><code class="prism language-bash"><span class="token function">git</span> checkout api<br></code></pre> <br><p>结果我那晚开发的所有内容恰好都在<code>api</code>这个文件夹下，于是所有的更改都没了。</p> <br><h3><a id="_25"></a>分析</h3> <br><p>在执行<code>git checkout</code>命令时，可以将整个仓库还原到一个<code>分支/commit_hash/tag</code>，可以用于恢复一个文件(夹)。</p> <br><p>当切换到<code>分支/commit_hash/tag</code>时，正确的命令是<code>git checkout 分支/commit_hash/tag</code>。</p> <br><ul><li>例如我有一个分支名为<code>dev</code>，那么我可以使用<code>git checkout dev</code>命令切换到<code>dev</code>分支；</li><li>例如我有一个commit的hash为<code>9259d713a40e97f97af61a422631b723f5666aa5</code>，那么我可以使用<code>git checkout 9259d713</code>命令切换到这次commit；</li><li>例如我有一个tag名为<code>v0.1</code>，那么我可以使用<code>git checkout v0.1</code>命令切换到这个tag；</li><li>例如我想创建并切换到<code>dev</code>分支，那么我可以使用<code>git checkout -b dev</code>命令。</li></ul> <br><p>若重名，则优先级<code>分支 > 标签 > commit_hash</code>。</p> <br><p>当恢复一个文件(夹)时，正确的命令是<code>git checkout -- 文件(夹)名</code>。</p> <br><ul><li>例如我有一个文件夹是<code>Solution</code>，那么我可以通过命令<code>git checkout -- Solution</code>将文件夹<code>Solution</code>恢复到暂存区或版本库。</li></ul> <br><p><strong>但是</strong>，如果我没有加<code>--</code>，<code>git checkout</code>命令仍然会恢复这个文件夹！</p> <br><h3><a id="_44"></a>误操</h3> <br><p>我本来想创建并切换到一个分支<code>api</code>：</p> <br><pre><code class="prism language-bash"><span class="token function">git</span> checkout <span class="token parameter variable">-b</span> api<br></code></pre> <br><p>结果因为困倦忘记输入<code>-b</code>了：</p> <br><pre><code class="prism language-bash"><span class="token function">git</span> checkout api<br></code></pre> <br><p>结果此时我还没有<code>api</code>分支，但正好有<code>api</code>文件夹。</p> <br><p><code>git</code>一看，心想，你这命令不规范，想还原一个文件夹但是没有<code>--</code>啊，你应该输成<code>git chcekout -- api</code>，太菜了吧，<code>--</code>都不知道输。还好我<code>git</code>比较聪明，知道你的意思，虽然你没有加<code>--</code>，但我还是帮你把文件夹<code>api</code>给还原了吧。</p> <br><p>然后我一个晚上的更改就几乎全被还原了。。。没被还原的，只剩下一些未被跟踪过的文件（新创建的文件）。然后我就在VsCode的<code>时间线</code>里把文件一个一个恢复了一下。。。</p> <br><p>竟然，，一丁点提示都没有。</p> <br><h3><a id="_66"></a>亡羊补牢</h3> <br><p>早就有人吐槽创建并切换到新分支也是checkout命令，因此从git 2.23开始引入了<code>switch</code>命令。</p> <br><p>以后再切换分支时，就使用<code>git switch 分支名</code>；创建并切换到新分支时，就使用<code>git switch -c 分支名</code>好了。</p> <br><h3><a id="End_72"></a>End</h3> <br><p>另：我的git版本为<code>2.42.0.windows.2</code>。</p> <br><center> <br> <font size="6px" face="Ink Free">The Real End, Thanks!</font> <br></center> <br><blockquote> <br> <p>原创不易，转载经作者同意后请附上<a href="https://blog.letmefly.xyz/2025/01/04/Other-Git-record1gitFileLost/" rel="nofollow">原文链接</a>哦~<br /> Tisfy：<a href="https://letmefly.blog.csdn.net/article/details/144929924" rel="nofollow">https://letmefly.blog.csdn.net/article/details/144929924</a></p> <br></blockquote>