<h2><a id="LetMeFly2116_1"></a>【LetMeFly】2116.判断一个括号字符串是否有效：括号匹配(两个变量一次遍历解决)</h2> <br><p>力扣题目链接：<a href="https://leetcode.cn/problems/check-if-a-parentheses-string-can-be-valid/" rel="nofollow">https://leetcode.cn/problems/check-if-a-parentheses-string-can-be-valid/</a></p> <br><p>一个括号字符串是只由 <code>'('</code> 和 <code>')'</code> 组成的 <strong>非空</strong> 字符串。如果一个字符串满足下面 <b>任意</b> 一个条件，那么它就是有效的：</p> <br><ul><li>字符串为 <code>()</code>.</li><li>它可以表示为 <code>AB</code>（<code>A</code> 与 <code>B</code> 连接），其中<code>A</code> 和 <code>B</code> 都是有效括号字符串。</li><li>它可以表示为 <code>(A)</code> ，其中 <code>A</code> 是一个有效括号字符串。</li></ul> <br><p>给你一个括号字符串 <code>s</code> 和一个字符串 <code>locked</code> ，两者长度都为 <code>n</code> 。<code>locked</code> 是一个二进制字符串，只包含 <code>'0'</code> 和 <code>'1'</code> 。对于 <code>locked</code> 中 <strong>每一个</strong> 下标 <code>i</code> ：</p> <br><ul><li>如果 <code>locked[i]</code> 是 <code>'1'</code> ，你 <strong>不能</strong> 改变 <code>s[i]</code> 。</li><li>如果 <code>locked[i]</code> 是 <code>'0'</code> ，你 <strong>可以</strong> 将 <code>s[i]</code> 变为 <code>'('</code> 或者 <code>')'</code> 。</li></ul> <br><p>如果你可以将 <code>s</code> 变为有效括号字符串，请你返回 <code>true</code> ，否则返回 <code>false</code> 。</p> <br><p> </p> <br><p><strong>示例 1：</strong></p> <br><p><img alt="" src="https://i-blog.csdnimg.cn/direct/fda45db53c054c9092e67cd6ca2cb8b9.png" /></p> <br><pre><b>输入：</b>s = "))()))", locked = "010100"<br><b>输出：</b>true<br><b>解释：</b>locked[1] == '1' 和 locked[3] == '1' ，所以我们无法改变 s[1] 或者 s[3] 。<br>我们可以将 s[0] 和 s[4] 变为 '(' ，不改变 s[2] 和 s[5] ，使 s 变为有效字符串。</pre> <br><p><strong>示例 2：</strong></p> <br><pre><b>输入：</b>s = "()()", locked = "0000"<br><b>输出：</b>true<br><b>解释：</b>我们不需要做任何改变，因为 s 已经是有效字符串了。<br></pre> <br><p><strong>示例 3：</strong></p> <br><pre><b>输入：</b>s = ")", locked = "0"<br><b>输出：</b>false<br><b>解释：</b>locked 允许改变 s[0] 。<br>但无论将 s[0] 变为 '(' 或者 ')' 都无法使 s 变为有效字符串。<br></pre> <br><p> </p> <br><p><strong>提示：</strong></p> <br><ul><li><code>n == s.length == locked.length</code></li><li><code>1 <= n <= 10<sup>5</sup></code></li><li><code>s[i]</code> 要么是 <code>'('</code> 要么是 <code>')'</code> 。</li><li><code>locked[i]</code> 要么是 <code>'0'</code> 要么是 <code>'1'</code> 。</li></ul> <br><p>很不错的一道题，这题<a href="https://leetcode.cn/u/endlesscheng/" rel="nofollow">灵茶山艾府</a>的<a href="https://leetcode.cn/problems/check-if-a-parentheses-string-can-be-valid/solutions/1178043/zheng-fan-liang-ci-bian-li-by-endlessche-z8ac/" rel="nofollow">题解</a>很棒。</p> <br><h3><a id="_67"></a>解题方法：一次遍历</h3> <br><h4><a id="_69"></a>解题思路</h4> <br><p>整个遍历过程中，要时刻保证：</p> <br><ul><li>左括号的数量始终不少于右括号的数量</li></ul> <br><p>遍历结束后，要保证左括号的数量和右括号的数量相等。</p> <br><p>我们可以使用<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         d <br>        <br>       <br>         i <br>        <br>       <br>         f <br>        <br>       <br>         f <br>        <br>       <br>      <br>        diff <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right: 0.1076em;">ff</span></span></span></span></span>来表示左括号的数量减去右括号的数量的差值，则想要返回<code>true</code>必须满足：</p> <br><ol><li>遍历过程中始终有：<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          d <br>         <br>        <br>          i <br>         <br>        <br>          f <br>         <br>        <br>          f <br>         <br>        <br>          ≥ <br>         <br>        <br>          0 <br>         <br>        <br>       <br>         diff\geq 0 <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right: 0.1076em;">ff</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">0</span></span></span></span></span></li><li>遍历结束时，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          d <br>         <br>        <br>          i <br>         <br>        <br>          f <br>         <br>        <br>          f <br>         <br>        <br>          = <br>         <br>        <br>          0 <br>         <br>        <br>       <br>         diff = 0 <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right: 0.1076em;">ff</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">0</span></span></span></span></span></li></ol> <br><p>如果每个字符都是确定的话还好说，但是有的字符可以更改（<code>locked[i] = '0'</code>）要怎么处理呢？</p> <br><p>其实也很简单，是<code>(</code>是<code>)</code>都试试呗。不难发现：</p> <br><blockquote> <br> <p>假设<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          d <br>         <br>        <br>          i <br>         <br>        <br>          f <br>         <br>        <br>          f <br>         <br>        <br>          = <br>         <br>        <br>          3 <br>         <br>        <br>       <br>         diff=3 <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right: 0.1076em;">ff</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">3</span></span></span></span></span>时遇到了一个<code>locked[i] = '0'</code>，那么<code>s[i]</code>为<code>(</code>的话<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          d <br>         <br>        <br>          i <br>         <br>        <br>          f <br>         <br>        <br>          f <br>         <br>        <br>       <br>         diff <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right: 0.1076em;">ff</span></span></span></span></span>将变成<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          4 <br>         <br>        <br>       <br>         4 <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">4</span></span></span></span></span>，<code>s[i]</code>为<code>)</code>的话<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          d <br>         <br>        <br>          i <br>         <br>        <br>          f <br>         <br>        <br>          f <br>         <br>        <br>       <br>         diff <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right: 0.1076em;">ff</span></span></span></span></span>将变成<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          6 <br>         <br>        <br>       <br>         6 <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">6</span></span></span></span></span>。<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          d <br>         <br>        <br>          i <br>         <br>        <br>          f <br>         <br>        <br>          f <br>         <br>        <br>       <br>         diff <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right: 0.1076em;">ff</span></span></span></span></span>的取值范围变成了<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          { <br>         <br>        <br>          4 <br>         <br>        <br>          , <br>         <br>        <br>          6 <br>         <br>        <br>          } <br>         <br>        <br>       <br>         \{4, 6\} <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">{<!-- --></span><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">6</span><span class="mclose">}</span></span></span></span></span>（全为偶数）</p> <br> <p>在此基础上，假设又遇到了<code>locked[i] = '0'</code>，那么<code>s[i]</code>为<code>(</code>的话<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          d <br>         <br>        <br>          i <br>         <br>        <br>          f <br>         <br>        <br>          f <br>         <br>        <br>       <br>         diff <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right: 0.1076em;">ff</span></span></span></span></span>将变成<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          { <br>         <br>        <br>          3 <br>         <br>        <br>          , <br>         <br>        <br>          5 <br>         <br>        <br>          } <br>         <br>        <br>       <br>         \{3, 5\} <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">{<!-- --></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">5</span><span class="mclose">}</span></span></span></span></span>，<code>s[i]</code>为<code>)</code>的话<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          d <br>         <br>        <br>          i <br>         <br>        <br>          f <br>         <br>        <br>          f <br>         <br>        <br>       <br>         diff <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right: 0.1076em;">ff</span></span></span></span></span>将变成<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          { <br>         <br>        <br>          5 <br>         <br>        <br>          , <br>         <br>        <br>          7 <br>         <br>        <br>          } <br>         <br>        <br>       <br>         \{5, 7\} <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">{<!-- --></span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">7</span><span class="mclose">}</span></span></span></span></span>。<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          d <br>         <br>        <br>          i <br>         <br>        <br>          f <br>         <br>        <br>          f <br>         <br>        <br>       <br>         diff <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right: 0.1076em;">ff</span></span></span></span></span>的取值范围变成了<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          { <br>         <br>        <br>          3 <br>         <br>        <br>          , <br>         <br>        <br>          5 <br>         <br>        <br>          , <br>         <br>        <br>          7 <br>         <br>        <br>          } <br>         <br>        <br>       <br>         \{3, 5, 7\} <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">{<!-- --></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">7</span><span class="mclose">}</span></span></span></span></span>（全是奇数）</p> <br> <p>不难发现<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          d <br>         <br>        <br>          i <br>         <br>        <br>          f <br>         <br>        <br>          f <br>         <br>        <br>       <br>         diff <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right: 0.1076em;">ff</span></span></span></span></span>的取值范围要么是全奇数，要么是全偶数。所以可以用<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          l <br>         <br>        <br>       <br>         l <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span></span></span></span></span>表示<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          d <br>         <br>        <br>          i <br>         <br>        <br>          f <br>         <br>        <br>          f <br>         <br>        <br>       <br>         diff <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right: 0.1076em;">ff</span></span></span></span></span>合法取值范围的最小值，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          r <br>         <br>        <br>       <br>         r <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span></span></span></span></span>表示<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          d <br>         <br>        <br>          i <br>         <br>        <br>          f <br>         <br>        <br>          f <br>         <br>        <br>       <br>         diff <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right: 0.1076em;">ff</span></span></span></span></span>合法取值范围的最大值。</p> <br></blockquote> <br><h4><a id="_92"></a>具体做法</h4> <br><p>初始值<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         l <br>        <br>       <br>         = <br>        <br>       <br>         0 <br>        <br>       <br>         , <br>        <br>       <br>         r <br>        <br>       <br>         = <br>        <br>       <br>         0 <br>        <br>       <br>      <br>        l = 0, r = 0 <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8389em; vertical-align: -0.1944em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">0</span></span></span></span></span>，代表<code>(</code>和<code>)</code>差值的可能范围为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         { <br>        <br>       <br>         0 <br>        <br>       <br>         } <br>        <br>       <br>      <br>        \{0\} <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">{<!-- --></span><span class="mord">0</span><span class="mclose">}</span></span></span></span></span>。</p> <br><p>开始遍历字符串：</p> <br><ul><li> <p>如果<code>locked[i] = '0'</code>，说明可<code>(</code>可<code>)</code>，范围将变成<code>l - 1</code>到<code>r + 1</code></p> <p>注意如果<code>l</code>变成了<code>-1</code>则说明<code>l</code>本来是<code>0</code>，要将<code>l</code>重新置为合法范围<code>1</code></p> </li><li> <p>否则（<code>locked[i] = '1'</code>）</p> <br>  <ul><li> <p>如果<code>s[i] = '('</code>：范围将变成<code>l + 1</code>到<code>r + 1</code></p> </li><li> <p>否则(<code>s[i] = ')'</code>)：范围将变成<code>l - 1</code>到<code>r - 1</code></p> <p>此时如果<code>r < 0</code>，则说明合法范围为空，不满足“整个遍历过从始终有<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>         <br>          <br>           <br>           <br>             d <br>            <br>           <br>             i <br>            <br>           <br>             f <br>            <br>           <br>             f <br>            <br>           <br>             ≥ <br>            <br>           <br>             0 <br>            <br>           <br>          <br>            diff\geq 0 <br>           <br>          <br>        </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right: 0.1076em;">ff</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">0</span></span></span></span></span>”，直接返回<code>false</code></p> <p>此时如果<code>l < 0</code>（<code>l</code>变成了<code>-1</code>），则说明<code>l</code>本来是<code>0</code>，要将<code>l</code>重新置为合法范围<code>1</code></p> </li></ul> </li></ul> <br><p>最终，若<code>l</code>为<code>0</code>则说存在<code>(</code>和<code>)</code>相等的情况，返回<code>true</code>。</p> <br><h4><a id="_113"></a>时空复杂度</h4> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          l <br>         <br>        <br>          e <br>         <br>        <br>          n <br>         <br>        <br>          ( <br>         <br>        <br>          s <br>         <br>        <br>          ) <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(len(s)) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">))</span></span></span></span></span></li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          1 <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(1) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></li></ul> <br><h4><a id="AC_118"></a>AC代码</h4> <br><h5><a id="C_120"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-03-23 09:37:28<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-03-23 10:39:28<br> */</span><br><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">_WIN32</span></span><br><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"_[1,2]toVector.h"</span></span><br><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><br><br><span class="token comment">/*<br>*)*(**<br>()(())<br><br><br>(*)*<br>(())<br><br><br>(**(<br>xxxx<br><br>(*<br>()<br><br><br><br>*/</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    <span class="token keyword">bool</span> <span class="token function">canBeValid</span><span class="token punctuation">(</span>string s<span class="token punctuation">,</span> string locked<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">int</span> l <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator"><</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>locked<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'0'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                l<span class="token operator">--</span><span class="token punctuation">,</span> r<span class="token operator">++</span><span class="token punctuation">;</span><br>                <span class="token keyword">if</span> <span class="token punctuation">(</span>l <span class="token operator"><</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                    l <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><br>                <span class="token punctuation">}</span><br>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">// ()</span><br>                <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'('</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                    l<span class="token operator">++</span><span class="token punctuation">,</span> r<span class="token operator">++</span><span class="token punctuation">;</span><br>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span><br>                    l<span class="token operator">--</span><span class="token punctuation">,</span> r<span class="token operator">--</span><span class="token punctuation">;</span><br>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>r <span class="token operator"><</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br>                    <span class="token punctuation">}</span><br>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>l <span class="token operator"><</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                        l <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><br>                    <span class="token punctuation">}</span><br>                <span class="token punctuation">}</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> <span class="token operator">!</span>l<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><h5><a id="Python_180"></a>Python</h5> <br><pre><code class="prism language-python"><span class="token triple-quoted-string string">'''<br>Author: LetMeFly<br>Date: 2025-03-23 10:49:44<br>LastEditors: LetMeFly.xyz<br>LastEditTime: 2025-03-23 10:51:19<br>'''</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span><br>    <span class="token keyword">def</span> <span class="token function">canBeValid</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> s<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> locked<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">:</span><br>        l <span class="token operator">=</span> r <span class="token operator">=</span> <span class="token number">0</span><br>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span><br>            <span class="token keyword">if</span> locked<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'0'</span><span class="token punctuation">:</span><br>                l <span class="token operator">-=</span> <span class="token number">1</span><br>                r <span class="token operator">+=</span> <span class="token number">1</span><br>                <span class="token keyword">if</span> l <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><br>                    l <span class="token operator">=</span> <span class="token number">1</span><br>            <span class="token keyword">else</span><span class="token punctuation">:</span><br>                <span class="token keyword">if</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'('</span><span class="token punctuation">:</span><br>                    l <span class="token operator">+=</span> <span class="token number">1</span><br>                    r <span class="token operator">+=</span> <span class="token number">1</span><br>                <span class="token keyword">else</span><span class="token punctuation">:</span><br>                    l <span class="token operator">-=</span> <span class="token number">1</span><br>                    r <span class="token operator">-=</span> <span class="token number">1</span><br>                    <span class="token keyword">if</span> r <span class="token operator"><</span> <span class="token number">0</span><span class="token punctuation">:</span><br>                        <span class="token keyword">return</span> <span class="token boolean">False</span><br>                    <span class="token keyword">if</span> l <span class="token operator"><</span> <span class="token number">0</span><span class="token punctuation">:</span><br>                        l <span class="token operator">=</span> <span class="token number">1</span><br>        <span class="token keyword">return</span> <span class="token keyword">not</span> l<br></code></pre> <br><h5><a id="Java_212"></a>Java</h5> <br><pre><code class="prism language-java"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-03-23 10:52:22<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-03-23 10:53:49<br> */</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">canBeValid</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">,</span> <span class="token class-name">String</span> locked<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">int</span> l <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator"><</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>locked<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token char">'0'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                l<span class="token operator">--</span><span class="token punctuation">;</span><br>                r<span class="token operator">++</span><span class="token punctuation">;</span><br>                <span class="token keyword">if</span> <span class="token punctuation">(</span>l <span class="token operator"><</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                    l <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><br>                <span class="token punctuation">}</span><br>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span><br>                <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token char">'('</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                    l<span class="token operator">++</span><span class="token punctuation">;</span><br>                    r<span class="token operator">++</span><span class="token punctuation">;</span><br>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span><br>                    l<span class="token operator">--</span><span class="token punctuation">;</span><br>                    r<span class="token operator">--</span><span class="token punctuation">;</span><br>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>r <span class="token operator"><</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br>                    <span class="token punctuation">}</span><br>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>l <span class="token operator"><</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                        l <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><br>                    <span class="token punctuation">}</span><br>                <span class="token punctuation">}</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> l <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br></code></pre> <br><h5><a id="Go_252"></a>Go</h5> <br><pre><code class="prism language-go"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-03-23 10:54:53<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-03-23 10:56:04<br> */</span><br><span class="token keyword">package</span> main<br><br><span class="token keyword">func</span> <span class="token function">canBeValid</span><span class="token punctuation">(</span>s <span class="token builtin">string</span><span class="token punctuation">,</span> locked <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{<!-- --></span><br>    l<span class="token punctuation">,</span> r <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><br>    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> s <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">if</span> locked<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'0'</span> <span class="token punctuation">{<!-- --></span><br>            l<span class="token operator">--</span><br>            r<span class="token operator">++</span><br>            <span class="token keyword">if</span> l <span class="token operator"><</span> <span class="token number">0</span> <span class="token punctuation">{<!-- --></span><br>                l <span class="token operator">=</span> <span class="token number">1</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token char">'('</span> <span class="token punctuation">{<!-- --></span><br>                l<span class="token operator">++</span><br>                r<span class="token operator">++</span><br>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span><br>                l<span class="token operator">--</span><br>                r<span class="token operator">--</span><br>                <span class="token keyword">if</span> r <span class="token operator"><</span> <span class="token number">0</span> <span class="token punctuation">{<!-- --></span><br>                    <span class="token keyword">return</span> <span class="token boolean">false</span><br>                <span class="token punctuation">}</span><br>                <span class="token keyword">if</span> l <span class="token operator"><</span> <span class="token number">0</span> <span class="token punctuation">{<!-- --></span><br>                    l <span class="token operator">=</span> <span class="token number">1</span><br>                <span class="token punctuation">}</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">return</span> l <span class="token operator">==</span> <span class="token number">0</span><br><span class="token punctuation">}</span><br></code></pre> <br><blockquote> <br> <p>同步发文于<a href="https://letmefly.blog.csdn.net/article/details/146454056" rel="nofollow">CSDN</a>和我的<a href="https://blog.letmefly.xyz/" rel="nofollow">个人博客</a>，原创不易，转载经作者同意后请附上<a href="https://blog.letmefly.xyz/2025/03/23/LeetCode%202116.%E5%88%A4%E6%96%AD%E4%B8%80%E4%B8%AA%E6%8B%AC%E5%8F%B7%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%98%AF%E5%90%A6%E6%9C%89%E6%95%88/" rel="nofollow">原文链接</a>哦~</p> <br> <p>千篇源码题解<a href="https://github.com/LetMeFly666/LeetCode">已开源</a></p> <br></blockquote>