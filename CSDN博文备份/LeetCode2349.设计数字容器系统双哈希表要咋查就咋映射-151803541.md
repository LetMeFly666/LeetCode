<h2><a id="LetMeFly2349_1"></a>【LetMeFly】2349.设计数字容器系统：双哈希表(要咋查就咋映射)</h2> <br><p>力扣题目链接：<a href="https://leetcode.cn/problems/design-a-number-container-system/" rel="nofollow">https://leetcode.cn/problems/design-a-number-container-system/</a></p> <br><p>设计一个数字容器系统，可以实现以下功能：</p> <br><ul><li>在系统中给定下标处 <strong>插入</strong> 或者 <strong>替换</strong> 一个数字。</li><li><strong>返回</strong> 系统中给定数字的最小下标。</li></ul> <br><p>请你实现一个 <code>NumberContainers</code> 类：</p> <br><ul><li><code>NumberContainers()</code> 初始化数字容器系统。</li><li><code>void change(int index, int number)</code> 在下标 <code>index</code> 处填入 <code>number</code> 。如果该下标 <code>index</code> 处已经有数字了，那么用 <code>number</code> 替换该数字。</li><li><code>int find(int number)</code> 返回给定数字 <code>number</code> 在系统中的最小下标。如果系统中没有 <code>number</code> ，那么返回 <code>-1</code> 。</li></ul> <br><p> </p> <br><p><strong>示例：</strong></p> <br><pre><strong>输入：</strong><br>["NumberContainers", "find", "change", "change", "change", "change", "find", "change", "find"]<br>[[], [10], [2, 10], [1, 10], [3, 10], [5, 10], [10], [1, 20], [10]]<br><strong>输出：</strong><br>[null, -1, null, null, null, null, 1, null, 2]<br><br><strong>解释：</strong><br>NumberContainers nc = new NumberContainers();<br>nc.find(10); // 没有数字 10 ，所以返回 -1 。<br>nc.change(2, 10); // 容器中下标为 2 处填入数字 10 。<br>nc.change(1, 10); // 容器中下标为 1 处填入数字 10 。<br>nc.change(3, 10); // 容器中下标为 3 处填入数字 10 。<br>nc.change(5, 10); // 容器中下标为 5 处填入数字 10 。<br>nc.find(10); // 数字 10 所在的下标为 1 ，2 ，3 和 5 。因为最小下标为 1 ，所以返回 1 。<br>nc.change(1, 20); // 容器中下标为 1 处填入数字 20 。注意，下标 1 处之前为 10 ，现在被替换为 20 。<br>nc.find(10); // 数字 10 所在下标为 2 ，3 和 5 。最小下标为 2 ，所以返回 2 。<br></pre> <br><p> </p> <br><p><strong>提示：</strong></p> <br><ul><li><code>1 <= index, number <= 10<sup>9</sup></code></li><li>调用 <code>change</code> 和 <code>find</code> 的 <strong>总次数</strong> 不超过 <code>10<sup>5</sup></code> 次。</li></ul> <br><h3><a id="_54"></a>解题方法：两个哈希表</h3> <br><p>核心目标有两个：</p> <br><ol><li>number查index</li><li>index改number</li></ol> <br><p>所以可以建立两个哈希表映射，一个是index映射为number，一个是number映射为index(s)。</p> <br><p>一个index只对应一个number，所以使用int2int就行；一个number可能对应多个index，所以可以使用int2有序集合。</p> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         log<br>        <br>        <br>         ⁡<br>        <br>        <br>         n<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(\log n)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right: 0.0139em;">g</span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>，其中<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         n<br>        <br>       <br>       <br>        n<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span>是表中总数据量</li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         n<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(n)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></li></ul> <br><h4><a id="AC_68"></a>AC代码</h4> <br><h5><a id="C_70"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-09-17 20:30:45<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-09-17 20:58:14<br> */</span><br><span class="token keyword">class</span> <span class="token class-name">NumberContainers</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">private</span><span class="token operator">:</span><br>    unordered_map<span class="token operator"><</span><span class="token keyword">int</span><span class="token punctuation">,</span> set<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">>></span> num2idx<span class="token punctuation">;</span><br>    unordered_map<span class="token operator"><</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span> idx2num<span class="token punctuation">;</span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    <span class="token function">NumberContainers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <br>    <span class="token punctuation">}</span><br>    <br>    <span class="token keyword">void</span> <span class="token function">change</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token keyword">int</span> number<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">auto</span> it <span class="token operator">=</span> idx2num<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> idx2num<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">int</span> number <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">.</span>second<span class="token punctuation">;</span><br>            num2idx<span class="token punctuation">[</span>number<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        idx2num<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> number<span class="token punctuation">;</span><br>        num2idx<span class="token punctuation">[</span>number<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <br>    <span class="token keyword">int</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">int</span> number<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">auto</span> it <span class="token operator">=</span> num2idx<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>it <span class="token operator">==</span> num2idx<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">.</span>second<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">.</span>second<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token comment">/**<br> * Your NumberContainers object will be instantiated and called as such:<br> * NumberContainers* obj = new NumberContainers();<br> * obj->change(index,number);<br> * int param_2 = obj->find(number);<br> */</span><br></code></pre> <br><blockquote> <br> <p>同步发文于<a href="https://letmefly.blog.csdn.net/article/details/151803541" rel="nofollow">CSDN</a>和我的<a href="https://blog.letmefly.xyz/" rel="nofollow">个人博客</a>，原创不易，转载经作者同意后请附上<a href="https://blog.letmefly.xyz/2025/09/17/LeetCode%202349.%E8%AE%BE%E8%AE%A1%E6%95%B0%E5%AD%97%E5%AE%B9%E5%99%A8%E7%B3%BB%E7%BB%9F/" rel="nofollow">原文链接</a>哦~</p> <br> <p>千篇源码题解<a href="https://github.com/LetMeFly666/LeetCode">已开源</a></p> <br></blockquote>