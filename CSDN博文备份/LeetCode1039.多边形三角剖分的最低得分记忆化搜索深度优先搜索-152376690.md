<h2><a id="LetMeFly1039_1"></a>【LetMeFly】1039.多边形三角剖分的最低得分：记忆化搜索（深度优先搜索）</h2> <br><p>力扣题目链接：<a href="https://leetcode.cn/problems/minimum-score-triangulation-of-polygon/" rel="nofollow">https://leetcode.cn/problems/minimum-score-triangulation-of-polygon/</a></p> <br><p>你有一个凸的 <code>n</code> 边形，其每个顶点都有一个整数值。给定一个整数数组 <code>values</code> ，其中 <code>values[i]</code> 是第 <code>i</code> 个顶点的值（即 <strong>顺时针顺序</strong> ）。</p> <br><p>假设将多边形 <strong>剖分</strong> 为 <code>n - 2</code> 个三角形。对于每个三角形，该三角形的值是顶点标记的<strong>乘积</strong>，三角剖分的分数是进行三角剖分后所有 <code>n - 2</code> 个三角形的值之和。</p> <br><p>返回 <em>多边形进行三角剖分后可以得到的最低分</em> 。<br />  </p> <br><ol></ol> <br><p><strong>示例 1：</strong></p> <br><p><img alt="" src="https://i-blog.csdnimg.cn/img_convert/8a112602ce289e8e6a019390cc55b024.jpeg" /></p> <br><pre><strong>输入：</strong>values = [1,2,3]<br><strong>输出：</strong>6<br><strong>解释：</strong>多边形已经三角化，唯一三角形的分数为 6。<br></pre> <br><p><strong>示例 2：</strong></p> <br><p><img alt="" src="https://i-blog.csdnimg.cn/img_convert/bce11264a8d6691e21971f0615a6620e.jpeg" /></p> <br><pre><strong>输入：</strong>values = [3,7,4,5]<br><strong>输出：</strong>144<br><strong>解释：</strong>有两种三角剖分，可能得分分别为：3*7*5 + 4*5*7 = 245，或 3*4*5 + 3*4*7 = 144。最低分数为 144。<br></pre> <br><p><strong>示例 3：</strong></p> <br><p><img alt="" src="https://i-blog.csdnimg.cn/img_convert/35a43c42cab1d8b98c2f5e4fe4ebba65.jpeg" /></p> <br><pre><strong>输入：</strong>values = [1,3,1,4,1,5]<br><strong>输出：</strong>13<br><strong>解释：</strong>最低分数三角剖分的得分情况为 1*1*3 + 1*1*4 + 1*1*5 + 1*1*1 = 13。<br></pre> <br><p> </p> <br><p><strong>提示：</strong></p> <br><ul><li><code>n == values.length</code></li><li><code>3 <= n <= 50</code></li><li><code>1 <= values[i] <= 100</code></li></ul> <br><h3><a id="DFS_57"></a>解题方法：DFS</h3> <br><p>借一张<a href="https://leetcode.cn/u/endlesscheng/" rel="nofollow">@灵茶山艾府</a>的<a href="https://leetcode.cn/problems/minimum-score-triangulation-of-polygon/solutions/2203005/shi-pin-jiao-ni-yi-bu-bu-si-kao-dong-tai-aty6/" rel="nofollow">图</a>：</p> <br><p><img src="https://i-blog.csdnimg.cn/direct/61d6f9b28c9345e0a18fafcd758422a0.png#pic_center" alt="5时示例图" /></p> <br><p>以边<code>1-5</code>为例，这条边最终一定在一个三角形中。在哪个三角形中呢？一共有图中这四种可能。我们分别枚举这4种可能就好了。</p> <br><p>具体来说，我们可以写一个函数<code>dfs(i, j)</code>，代表从<code>i</code>到<code>j</code>的凸多边形的最低得分，那么将点<code>k</code>作为边<code>15</code>所在三角形的另一个顶点的话，得到的总得分为<code>dfs(i, k)+dfs(k, j) + i*j*k</code>。</p> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         <br>          n<br>         <br>         <br>          3<br>         <br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(n^3)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.0641em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         <br>          n<br>         <br>         <br>          2<br>         <br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(n^2)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.0641em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></li></ul> <br><h4><a id="AC_70"></a>AC代码</h4> <br><h5><a id="C_72"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-09-29 18:44:48<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-10-01 20:38:27<br> */</span><br><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token function">defined</span><span class="token punctuation">(</span>_WIN32<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">defined</span><span class="token punctuation">(</span>__APPLE__<span class="token punctuation">)</span></span></span><br><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"_[1,2]toVector.h"</span></span><br><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><br><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">private</span><span class="token operator">:</span><br>    unordered_map<span class="token operator"><</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span> cache<span class="token punctuation">;</span><br>    vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span> values<span class="token punctuation">;</span><br>    <span class="token keyword">int</span> n<span class="token punctuation">;</span><br><br>    <span class="token keyword">int</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">-</span> i <span class="token operator"><</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">int</span> key <span class="token operator">=</span> i <span class="token operator">*</span> n <span class="token operator">+</span> j<span class="token punctuation">;</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>cache<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">return</span> cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">-</span> i <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">return</span> cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> values<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> values<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> values<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">1000000000</span><span class="token punctuation">;</span><br>        <span class="token comment">/*<br>        0 1 2 3 -> 0 1 2 + 0 2 3<br><br>        0   1<br><br>        3   2<br><br><br>        0 1 2 3 4<br><br><br>            3<br>                 <br>        4        2<br><br>         0      1<br><br>        <br>        (i,j,k) + dfs(i,k)+dfs(k,j)<br>        */</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> k <span class="token operator"><</span> j<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            ans <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span> <span class="token function">dfs</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> k<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">dfs</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> j<span class="token punctuation">)</span> <span class="token operator">+</span> values<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> values<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">*</span> values<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    <span class="token keyword">int</span> <span class="token function">minScoreTriangulation</span><span class="token punctuation">(</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> values<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">this</span><span class="token operator">-></span>values <span class="token operator">=</span> <span class="token function">move</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        n <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-></span>values<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">return</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression"><span class="token function">defined</span><span class="token punctuation">(</span>_WIN32<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">defined</span><span class="token punctuation">(</span>__APPLE__<span class="token punctuation">)</span></span></span><br><span class="token comment">/*<br>[3,7,4,5]<br><br>144<br>*/</span><br><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>    string s<span class="token punctuation">;</span><br>    <span class="token keyword">while</span> <span class="token punctuation">(</span>cin <span class="token operator">>></span> s<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span> v <span class="token operator">=</span> <span class="token function">stringToVector</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        Solution sol<span class="token punctuation">;</span><br>        cout <span class="token operator"><<</span> sol<span class="token punctuation">.</span><span class="token function">minScoreTriangulation</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token operator"><<</span> endl<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><br></code></pre> <br><blockquote> <br> <p>同步发文于<a href="https://letmefly.blog.csdn.net/article/details/152376690" rel="nofollow">CSDN</a>和我的<a href="https://blog.letmefly.xyz/" rel="nofollow">个人博客</a>，原创不易，转载经作者同意后请附上<a href="https://blog.letmefly.xyz/2025/09/29/LeetCode%201039.%E5%A4%9A%E8%BE%B9%E5%BD%A2%E4%B8%89%E8%A7%92%E5%89%96%E5%88%86%E7%9A%84%E6%9C%80%E4%BD%8E%E5%BE%97%E5%88%86/" rel="nofollow">原文链接</a>哦~</p> <br> <p>千篇源码题解<a href="https://github.com/LetMeFly666/LeetCode">已开源</a></p> <br></blockquote>