<h2><a id="LetMeFly1847_1"></a>【LetMeFly】1847.最近的房间：有序集合</h2> <br><p>力扣题目链接：<a href="https://leetcode.cn/problems/closest-room/" rel="nofollow">https://leetcode.cn/problems/closest-room/</a></p> <br><p>一个酒店里有 <code>n</code> 个房间，这些房间用二维整数数组 <code>rooms</code> 表示，其中 <code>rooms[i] = [roomId<sub>i</sub>, size<sub>i</sub>]</code> 表示有一个房间号为 <code>roomId<sub>i</sub></code> 的房间且它的面积为 <code>size<sub>i</sub></code> 。每一个房间号 <code>roomId<sub>i</sub></code> 保证是 <strong>独一无二</strong> 的。</p> <br><p>同时给你 <code>k</code> 个查询，用二维数组 <code>queries</code> 表示，其中 <code>queries[j] = [preferred<sub>j</sub>, minSize<sub>j</sub>]</code> 。第 <code>j</code> 个查询的答案是满足如下条件的房间 <code>id</code> ：</p> <br><ul><li>房间的面积 <b>至少</b> 为 <code>minSize<sub>j</sub></code> ，且</li><li><code>abs(id - preferred<sub>j</sub>)</code> 的值 <strong>最小</strong> ，其中 <code>abs(x)</code> 是 <code>x</code> 的绝对值。</li></ul> <br><p>如果差的绝对值有 <strong>相等</strong> 的，选择 <strong>最小</strong> 的 <code>id</code> 。如果 <strong>没有满足条件的房间</strong> ，答案为 <code>-1</code> 。</p> <br><p>请你返回长度为 <code>k</code> 的数组 <code>answer</code> ，其中<em> </em><code>answer[j]</code> 为第 <code>j</code> 个查询的结果。</p> <br><p> </p> <br><p><strong>示例 1：</strong></p> <br><pre><b>输入：</b>rooms = [[2,2],[1,2],[3,2]], queries = [[3,1],[3,3],[5,2]]<br><b>输出：</b>[3,-1,3]<br><strong>解释：</strong>查询的答案如下：<br>查询 [3,1] ：房间 3 的面积为 2 ，大于等于 1 ，且号码是最接近 3 的，为 abs(3 - 3) = 0 ，所以答案为 3 。<br>查询 [3,3] ：没有房间的面积至少为 3 ，所以答案为 -1 。<br>查询 [5,2] ：房间 3 的面积为 2 ，大于等于 2 ，且号码是最接近 5 的，为 abs(3 - 5) = 2 ，所以答案为 3 。</pre> <br><p><strong>示例 2：</strong></p> <br><pre><b>输入：</b>rooms = [[1,4],[2,3],[3,5],[4,1],[5,2]], queries = [[2,3],[2,4],[2,5]]<br><b>输出：</b>[2,1,3]<br><strong>解释：</strong>查询的答案如下：<br>查询 [2,3] ：房间 2 的面积为 3 ，大于等于 3 ，且号码是最接近的，为 abs(2 - 2) = 0 ，所以答案为 2 。<br>查询 [2,4] ：房间 1 和 3 的面积都至少为 4 ，答案为 1 因为它房间编号更小。<br>查询 [2,5] ：房间 3 是唯一面积大于等于 5 的，所以答案为 3 。</pre> <br><p> </p> <br><p><strong>提示：</strong></p> <br><ul><li><code>n == rooms.length</code></li><li><code>1 <= n <= 10<sup>5</sup></code></li><li><code>k == queries.length</code></li><li><code>1 <= k <= 10<sup>4</sup></code></li><li><code>1 <= roomId<sub>i</sub>, preferred<sub>j</sub> <= 10<sup>7</sup></code></li><li><code>1 <= size<sub>i</sub>, minSize<sub>j</sub> <= 10<sup>7</sup></code></li></ul> <br><h3><a id="_55"></a>解题方法：有序集合</h3> <br><p>我们可以首先对所有的查询按照“size从大到小”的顺序排序，同时保留原本的顺序信息(得知道一个查询是原来的第几个查询)。</p> <br><blockquote> <br> <p>这样做有什么好处呢？排序后满足前一个查询的size的房间一定能满足后一个查询。</p> <br></blockquote> <br><p>因此我们可以对房间依据size从大到小的顺序排序，使用一个指针指向所有已经满足size条件的room，并将所有满足size条件的roomId添加到有序集合roomIds中。</p> <br><blockquote> <br> <p>也就是说，对于一个查询，roomIds中的房间都可以住。问题就变成了如何在一个有序集合里查询与queryId最接近的值，直接使用二分查找即可。</p> <br></blockquote> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          ( <br>         <br>        <br>          n <br>         <br>        <br>          + <br>         <br>        <br>          k <br>         <br>        <br>          ) <br>         <br>        <br>          log <br>         <br>        <br>          ⁡ <br>         <br>        <br>          n <br>         <br>        <br>          + <br>         <br>        <br>          k <br>         <br>        <br>          log <br>         <br>        <br>          ⁡ <br>         <br>        <br>          k <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O((n+k)\log n+k\log k) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">((</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0315em;">k</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mop">lo<span style="margin-right: 0.0139em;">g</span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0315em;">k</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mop">lo<span style="margin-right: 0.0139em;">g</span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal" style="margin-right: 0.0315em;">k</span><span class="mclose">)</span></span></span></span></span>。排序<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          n <br>         <br>        <br>          log <br>         <br>        <br>          ⁡ <br>         <br>        <br>          n <br>         <br>        <br>          + <br>         <br>        <br>          k <br>         <br>        <br>          log <br>         <br>        <br>          ⁡ <br>         <br>        <br>          k <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(n\log n+k\log k) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mop">lo<span style="margin-right: 0.0139em;">g</span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0315em;">k</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mop">lo<span style="margin-right: 0.0139em;">g</span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal" style="margin-right: 0.0315em;">k</span><span class="mclose">)</span></span></span></span></span>，单次添加到有序集合<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          log <br>         <br>        <br>          ⁡ <br>         <br>        <br>          n <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(\log n) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right: 0.0139em;">g</span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>一共添加最多<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          n <br>         <br>        <br>       <br>         n <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span>次，单次查询<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          log <br>         <br>        <br>          ⁡ <br>         <br>        <br>          n <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(\log n) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right: 0.0139em;">g</span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>一共查询<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          k <br>         <br>        <br>       <br>         k <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal" style="margin-right: 0.0315em;">k</span></span></span></span></span>次。</li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          n <br>         <br>        <br>          + <br>         <br>        <br>          k <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(n+ k) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0315em;">k</span><span class="mclose">)</span></span></span></span></span></li></ul> <br><h4><a id="AC_68"></a>AC代码</h4> <br><h5><a id="C_70"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">closestRoom</span><span class="token punctuation">(</span>vector<span class="token operator"><</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">>></span><span class="token operator">&</span> rooms<span class="token punctuation">,</span> vector<span class="token operator"><</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">>></span><span class="token operator">&</span> queries<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">queryIdx</span><span class="token punctuation">(</span>queries<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token function">iota</span><span class="token punctuation">(</span>queryIdx<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> queryIdx<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token function">sort</span><span class="token punctuation">(</span>queryIdx<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> queryIdx<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">&</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">return</span> queries<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">></span> queries<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token function">sort</span><span class="token punctuation">(</span>rooms<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> rooms<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> a<span class="token punctuation">,</span> vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> b<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">return</span> a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">></span> b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        set<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span> canIds<span class="token punctuation">;</span><br>        vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">ans</span><span class="token punctuation">(</span>queries<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> locR <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> locQ <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> locQ <span class="token operator"><</span> queryIdx<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> locQ<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">int</span> queryId <span class="token operator">=</span> queries<span class="token punctuation">[</span>queryIdx<span class="token punctuation">[</span>locQ<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> size <span class="token operator">=</span> queries<span class="token punctuation">[</span>queryIdx<span class="token punctuation">[</span>locQ<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>            <span class="token keyword">while</span> <span class="token punctuation">(</span>locR <span class="token operator"><</span> rooms<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&&</span> rooms<span class="token punctuation">[</span>locR<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">>=</span> size<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                canIds<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>rooms<span class="token punctuation">[</span>locR<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>canIds<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                ans<span class="token punctuation">[</span>queryIdx<span class="token punctuation">[</span>locQ<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><br>                <span class="token keyword">continue</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            set<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token double-colon punctuation">::</span>iterator it <span class="token operator">=</span> canIds<span class="token punctuation">.</span><span class="token function">lower_bound</span><span class="token punctuation">(</span>queryId<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">int</span> idDiff <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span>queryId <span class="token operator">-</span> <span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> canIds<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&&</span> <span class="token function">abs</span><span class="token punctuation">(</span>queryId <span class="token operator">-</span> <span class="token operator">*</span><span class="token function">prev</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator"><=</span> idDiff<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                it<span class="token operator">--</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            ans<span class="token punctuation">[</span>queryIdx<span class="token punctuation">[</span>locQ<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">*</span>it<span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><h5><a id="Python_107"></a>Python</h5> <br><pre><code class="prism language-python"><span class="token keyword">from</span> typing <span class="token keyword">import</span> List<br><span class="token keyword">from</span> sortedcontainers <span class="token keyword">import</span> SortedList<br><span class="token keyword">from</span> bisect <span class="token keyword">import</span> bisect_left<br><br><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span><br>    <span class="token keyword">def</span> <span class="token function">closestRoom</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> rooms<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> queries<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span><br>        queryIdx <span class="token operator">=</span> <span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>queries<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><br>        queryIdx<span class="token punctuation">.</span>sort<span class="token punctuation">(</span>key<span class="token operator">=</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token operator">-</span>queries<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>        rooms<span class="token punctuation">.</span>sort<span class="token punctuation">(</span>key<span class="token operator">=</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token operator">-</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>        canIds <span class="token operator">=</span> SortedList<span class="token punctuation">(</span><span class="token punctuation">)</span><br>        ans <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token builtin">len</span><span class="token punctuation">(</span>queries<span class="token punctuation">)</span><br>        locR <span class="token operator">=</span> <span class="token number">0</span><br>        <span class="token keyword">for</span> locQI <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>queries<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span><br>            queryId<span class="token punctuation">,</span> querySize <span class="token operator">=</span> queries<span class="token punctuation">[</span>queryIdx<span class="token punctuation">[</span>locQI<span class="token punctuation">]</span><span class="token punctuation">]</span><br>            <span class="token keyword">while</span> locR <span class="token operator"><</span> <span class="token builtin">len</span><span class="token punctuation">(</span>rooms<span class="token punctuation">)</span> <span class="token keyword">and</span> rooms<span class="token punctuation">[</span>locR<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">>=</span> querySize<span class="token punctuation">:</span><br>                canIds<span class="token punctuation">.</span>add<span class="token punctuation">(</span>rooms<span class="token punctuation">[</span>locR<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br>                locR <span class="token operator">+=</span> <span class="token number">1</span><br>            <span class="token keyword">if</span> <span class="token keyword">not</span> canIds<span class="token punctuation">:</span><br>                <span class="token keyword">continue</span><br>            it <span class="token operator">=</span> bisect_left<span class="token punctuation">(</span>canIds<span class="token punctuation">,</span> queryId<span class="token punctuation">)</span><br>            <span class="token comment"># print(f'bisect_left({canIds, queryId}) = {it}')  # bisect_left((SortedList([1, 2, 3]), 5)) = 3</span><br>            <span class="token keyword">if</span> it <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span>canIds<span class="token punctuation">)</span> <span class="token keyword">or</span> <span class="token punctuation">(</span>it <span class="token keyword">and</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>canIds<span class="token punctuation">[</span>it <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> queryId<span class="token punctuation">)</span> <span class="token operator"><=</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>canIds<span class="token punctuation">[</span>it<span class="token punctuation">]</span> <span class="token operator">-</span> queryId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span><br>                it <span class="token operator">-=</span> <span class="token number">1</span><br>            ans<span class="token punctuation">[</span>queryIdx<span class="token punctuation">[</span>locQI<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> canIds<span class="token punctuation">[</span>it<span class="token punctuation">]</span><br>        <span class="token keyword">return</span> ans<br></code></pre> <br><h5><a id="Java_137"></a>Java</h5> <br><pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">TreeSet</span></span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span><br><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br>    <span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">closestRoom</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> rooms<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> queries<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> queryIdx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">[</span>queries<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// int的话不支持sort的Comparator</span><br>        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">setAll</span><span class="token punctuation">(</span>queryIdx<span class="token punctuation">,</span> i <span class="token operator">-></span> i<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>queryIdx<span class="token punctuation">,</span> <span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span> <span class="token operator">-></span> queries<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> queries<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>rooms<span class="token punctuation">,</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">-></span> b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation"><</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> canIds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation"><</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ans <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>queries<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span><br>        <span class="token keyword">int</span> locR <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> locQI <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> locQI <span class="token operator"><</span> queryIdx<span class="token punctuation">.</span>length<span class="token punctuation">;</span> locQI<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">int</span> queryId <span class="token operator">=</span> queries<span class="token punctuation">[</span>queryIdx<span class="token punctuation">[</span>locQI<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> querySize <span class="token operator">=</span> queries<span class="token punctuation">[</span>queryIdx<span class="token punctuation">[</span>locQI<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>            <span class="token keyword">while</span> <span class="token punctuation">(</span>locR <span class="token operator"><</span> rooms<span class="token punctuation">.</span>length <span class="token operator">&&</span> rooms<span class="token punctuation">[</span>locR<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">>=</span> querySize<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                canIds<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>rooms<span class="token punctuation">[</span>locR<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>canIds<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                ans<span class="token punctuation">[</span>queryIdx<span class="token punctuation">[</span>locQI<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><br>                <span class="token keyword">continue</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            <span class="token class-name">Integer</span> floor <span class="token operator">=</span> canIds<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>queryId<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token class-name">Integer</span> ceil <span class="token operator">=</span> canIds<span class="token punctuation">.</span><span class="token function">ceiling</span><span class="token punctuation">(</span>queryId<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>floor <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                ans<span class="token punctuation">[</span>queryIdx<span class="token punctuation">[</span>locQI<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> ceil<span class="token punctuation">;</span><br>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ceil <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                ans<span class="token punctuation">[</span>queryIdx<span class="token punctuation">[</span>locQI<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> floor<span class="token punctuation">;</span><br>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span><br>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>floor <span class="token operator">-</span> queryId<span class="token punctuation">)</span> <span class="token operator"><=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>ceil <span class="token operator">-</span> queryId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                    ans<span class="token punctuation">[</span>queryIdx<span class="token punctuation">[</span>locQI<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> floor<span class="token punctuation">;</span><br>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span><br>                    ans<span class="token punctuation">[</span>queryIdx<span class="token punctuation">[</span>locQI<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> ceil<span class="token punctuation">;</span><br>                <span class="token punctuation">}</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br></code></pre> <br><blockquote> <br> <p>同步发文于CSDN和我的<a href="https://blog.letmefly.xyz/" rel="nofollow">个人博客</a>，原创不易，转载经作者同意后请附上<a href="https://blog.letmefly.xyz/2024/12/17/LeetCode%201847.%E6%9C%80%E8%BF%91%E7%9A%84%E6%88%BF%E9%97%B4/" rel="nofollow">原文链接</a>哦~</p> <br> <p>Tisfy：<a href="https://letmefly.blog.csdn.net/article/details/144524587" rel="nofollow">https://letmefly.blog.csdn.net/article/details/144524587</a></p> <br></blockquote>