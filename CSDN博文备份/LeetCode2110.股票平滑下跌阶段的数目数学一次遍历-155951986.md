<h2><a id="LetMeFly2110_1"></a>【LetMeFly】2110.股票平滑下跌阶段的数目：数学（一次遍历）</h2> <br><p>力扣题目链接：<a href="https://leetcode.cn/problems/number-of-smooth-descent-periods-of-a-stock/" rel="nofollow">https://leetcode.cn/problems/number-of-smooth-descent-periods-of-a-stock/</a></p> <br><p>给你一个整数数组 <code>prices</code> ，表示一支股票的历史每日股价，其中 <code>prices[i]</code> 是这支股票第 <code>i</code> 天的价格。</p> <br><p>一个 <strong>平滑下降的阶段</strong> 定义为：对于 <strong>连续一天或者多天</strong> ，每日股价都比 <strong>前一日股价恰好少 </strong><code>1</code> ，这个阶段第一天的股价没有限制。</p> <br><p>请你返回 <strong>平滑下降阶段</strong> 的数目。</p> <br><p> </p> <br><p><strong>示例 1：</strong></p> <br><pre><b>输入：</b>prices = [3,2,1,4]<br><b>输出：</b>7<br><b>解释：</b>总共有 7 个平滑下降阶段：<br>[3], [2], [1], [4], [3,2], [2,1] 和 [3,2,1]<br>注意，仅一天按照定义也是平滑下降阶段。<br></pre> <br><p><strong>示例 2：</strong></p> <br><pre><b>输入：</b>prices = [8,6,7,7]<br><b>输出：</b>4<br><b>解释：</b>总共有 4 个连续平滑下降阶段：[8], [6], [7] 和 [7]<br>由于 8 - 6 ≠ 1 ，所以 [8,6] 不是平滑下降阶段。<br></pre> <br><p><strong>示例 3：</strong></p> <br><pre><b>输入：</b>prices = [1]<br><b>输出：</b>1<br><b>解释：</b>总共有 1 个平滑下降阶段：[1]<br></pre> <br><p> </p> <br><p><strong>提示：</strong></p> <br><ul><li><code>1 <= prices.length <= 10<sup>5</sup></code></li><li><code>1 <= prices[i] <= 10<sup>5</sup></code></li></ul> <br><h3><a id="_48"></a>解题方法：遍历</h3> <br><p>假设有<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        3<br>       <br>      <br>      <br>       3<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">3</span></span></span></span></span>个<code>连续下滑天</code><span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        [<br>       <br>       <br>        3<br>       <br>       <br>        ,<br>       <br>       <br>        2<br>       <br>       <br>        ,<br>       <br>       <br>        1<br>       <br>       <br>        ]<br>       <br>      <br>      <br>       [3, 2, 1]<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">[</span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span></span>，那么可以有<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        3<br>       <br>       <br>        ,<br>       <br>       <br>        2<br>       <br>       <br>        ,<br>       <br>       <br>        1<br>       <br>      <br>      <br>       3, 2, 1<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8389em; vertical-align: -0.1944em;"></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">1</span></span></span></span></span>（连续3天共1种）、<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        3<br>       <br>       <br>        ,<br>       <br>       <br>        2<br>       <br>      <br>      <br>       3, 2<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8389em; vertical-align: -0.1944em;"></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">2</span></span></span></span></span>、<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        2<br>       <br>       <br>        ,<br>       <br>       <br>        1<br>       <br>      <br>      <br>       2, 1<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8389em; vertical-align: -0.1944em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">1</span></span></span></span></span>（连续2天共2种）、<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        3<br>       <br>      <br>      <br>       3<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">3</span></span></span></span></span>、<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        2<br>       <br>      <br>      <br>       2<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">2</span></span></span></span></span>、<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        1<br>       <br>      <br>      <br>       1<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>（连续1天共3种）这共计<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        1<br>       <br>       <br>        +<br>       <br>       <br>        2<br>       <br>       <br>        +<br>       <br>       <br>        3<br>       <br>       <br>        =<br>       <br>       <br>        <br>         <br>          3<br>         <br>         <br>          (<br>         <br>         <br>          3<br>         <br>         <br>          +<br>         <br>         <br>          1<br>         <br>         <br>          )<br>         <br>        <br>        <br>         2<br>        <br>       <br>       <br>        =<br>       <br>       <br>        6<br>       <br>      <br>      <br>       1+2+3=\frac{3(3+1)}{2}=6<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7278em; vertical-align: -0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.7278em; vertical-align: -0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">3</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1.355em; vertical-align: -0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.01em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.485em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mopen mtight">(</span><span class="mord mtight">3</span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">6</span></span></span></span></span>种<code>平滑下降阶段</code>。</p> <br><p>同样的，<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        n<br>       <br>      <br>      <br>       n<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span>个<code>连续下滑天</code>就有<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        <br>         <br>          n<br>         <br>         <br>          (<br>         <br>         <br>          n<br>         <br>         <br>          +<br>         <br>         <br>          1<br>         <br>         <br>          )<br>         <br>        <br>        <br>         2<br>        <br>       <br>      <br>      <br>       \frac{n(n+1)}2<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.355em; vertical-align: -0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.01em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.485em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>种<code>平滑下降阶段</code>。</p> <br><p>因此，我们只需要遍历一遍，看下原始数组中有多少<code>连续下滑天</code>，并将每个连续下滑天的<code>平滑下降阶段</code>种类数求和即可。</p> <br><h4><a id="_56"></a>具体做法</h4> <br><p>具体而言，可以使用两个变量：<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        l<br>       <br>       <br>        a<br>       <br>       <br>        s<br>       <br>       <br>        t<br>       <br>      <br>      <br>       last<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">a</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span>和<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        c<br>       <br>       <br>        n<br>       <br>       <br>        t<br>       <br>      <br>      <br>       cnt<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span></span></span></span></span>分别记录上一天的价格和当前<code>连续下滑天</code>，遇到<code>连续下滑天</code>中断的情况就计算一次<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        a<br>       <br>       <br>        n<br>       <br>       <br>        s<br>       <br>      <br>      <br>       ans<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">an</span><span class="mord mathnormal">s</span></span></span></span></span>，最后返回前也计算一次<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        a<br>       <br>       <br>        n<br>       <br>       <br>        s<br>       <br>      <br>      <br>       ans<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">an</span><span class="mord mathnormal">s</span></span></span></span></span>。</p> <br><h4><a id="_60"></a>时空复杂度</h4> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         l<br>        <br>        <br>         e<br>        <br>        <br>         n<br>        <br>        <br>         (<br>        <br>        <br>         p<br>        <br>        <br>         r<br>        <br>        <br>         i<br>        <br>        <br>         c<br>        <br>        <br>         e<br>        <br>        <br>         s<br>        <br>        <br>         )<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(len(prices))<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mord mathnormal">i</span><span class="mord mathnormal">ces</span><span class="mclose">))</span></span></span></span></span></li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         1<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(1)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></li></ul> <br><h4><a id="AC_65"></a>AC代码</h4> <br><h5><a id="C_67"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @LastEditTime: 2025-12-15 18:52:23<br> */</span><br><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ll<span class="token punctuation">;</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    ll <span class="token function">getDescentPeriods</span><span class="token punctuation">(</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> prices<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        ll ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">int</span> last <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> t <span class="token operator">:</span> prices<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">!=</span> last <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                ans <span class="token operator">+=</span> cnt <span class="token operator">*</span> <span class="token punctuation">(</span>cnt <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span><br>                <span class="token comment">// printf("t = %d, cnt = %lld\n", t, cnt);</span><br>                cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            last <span class="token operator">=</span> t<span class="token punctuation">;</span><br>            cnt<span class="token operator">++</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans <span class="token operator">+</span> cnt <span class="token operator">*</span> <span class="token punctuation">(</span>cnt <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><h5><a id="Python_93"></a>Python</h5> <br><pre><code class="prism language-python"><span class="token triple-quoted-string string">'''<br>LastEditTime: 2025-12-15 18:54:39<br>'''</span><br><span class="token keyword">from</span> typing <span class="token keyword">import</span> List<br><br><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span><br>    <span class="token keyword">def</span> <span class="token function">getDescentPeriods</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> prices<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span><br>        ans <span class="token operator">=</span> last <span class="token operator">=</span> cnt <span class="token operator">=</span> <span class="token number">0</span><br>        <span class="token keyword">for</span> p <span class="token keyword">in</span> prices<span class="token punctuation">:</span><br>            <span class="token keyword">if</span> p <span class="token operator">!=</span> last <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">:</span><br>                ans <span class="token operator">+=</span> cnt <span class="token operator">*</span> <span class="token punctuation">(</span>cnt <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span><br>                cnt <span class="token operator">=</span> <span class="token number">0</span><br>            cnt <span class="token operator">+=</span> <span class="token number">1</span><br>            last <span class="token operator">=</span> p<br>        <span class="token keyword">return</span> ans <span class="token operator">+</span> cnt <span class="token operator">*</span> <span class="token punctuation">(</span>cnt <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span><br><br></code></pre> <br><h5><a id="Java_114"></a>Java</h5> <br><pre><code class="prism language-java"><span class="token comment">/*<br> * @LastEditTime: 2025-12-15 21:37:22<br> */</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br>    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">getDescentPeriods</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> prices<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">long</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> last <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator"><=</span> prices<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> prices<span class="token punctuation">.</span>length <span class="token operator">||</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> last <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                ans <span class="token operator">+=</span> cnt <span class="token operator">*</span> <span class="token punctuation">(</span>cnt <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span><br>                cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            cnt<span class="token operator">++</span><span class="token punctuation">;</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator"><</span> prices<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                last <span class="token operator">=</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br></code></pre> <br><h5><a id="Go_138"></a>Go</h5> <br><pre><code class="prism language-go"><span class="token comment">/*<br> * @LastEditTime: 2025-12-15 21:35:08<br> */</span><br><span class="token keyword">package</span> main<br><br><span class="token keyword">func</span> <span class="token function">getDescentPeriods</span><span class="token punctuation">(</span>prices <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>ans <span class="token builtin">int64</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>    <span class="token keyword">var</span> cnt <span class="token builtin">int64</span><br>    last <span class="token operator">:=</span> <span class="token number">0</span><br>    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator"><=</span> <span class="token function">len</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token function">len</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span> <span class="token operator">||</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> last <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">{<!-- --></span><br>            ans <span class="token operator">+=</span> cnt <span class="token operator">*</span> <span class="token punctuation">(</span>cnt <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><br>            cnt <span class="token operator">=</span> <span class="token number">0</span><br>        <span class="token punctuation">}</span><br>        cnt<span class="token operator">++</span><br>        <span class="token keyword">if</span> i <span class="token operator"><</span> <span class="token function">len</span><span class="token punctuation">(</span>prices<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            last <span class="token operator">=</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">return</span><br><span class="token punctuation">}</span><br></code></pre> <br><h5><a id="Rust_163"></a>Rust</h5> <br><pre><code class="prism language-rust"><span class="token comment">/*<br> * @LastEditTime: 2025-12-15 21:41:17<br> */</span><br><span class="token keyword">impl</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br>    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">get_descent_periods</span><span class="token punctuation">(</span>prices<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator"><</span><span class="token keyword">i32</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token keyword">i64</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">let</span> <span class="token keyword">mut</span> ans<span class="token punctuation">:</span> <span class="token keyword">i64</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">let</span> <span class="token keyword">mut</span> cnt<span class="token punctuation">:</span> <span class="token keyword">i64</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">let</span> <span class="token keyword">mut</span> last<span class="token punctuation">:</span> <span class="token keyword">i32</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> p <span class="token keyword">in</span> prices <span class="token punctuation">{<!-- --></span>  <span class="token comment">// 一借不还</span><br>            <span class="token keyword">if</span> p <span class="token operator">!=</span> last <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">{<!-- --></span><br>                ans <span class="token operator">+=</span> cnt <span class="token operator">*</span> <span class="token punctuation">(</span>cnt <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span><br>                cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            cnt <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span><br>            last <span class="token operator">=</span> p<span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        ans <span class="token operator">+</span> cnt <span class="token operator">*</span> <span class="token punctuation">(</span>cnt <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br></code></pre> <br><h3><a id="End_187"></a>End</h3> <br><p><span title="2025.12.15">今天跌得可不轻啊</span></p> <br><center><br> <font size="6px" face="Ink Free">The Real End, Thanks!</font><br></center> <br><blockquote> <br> <p>同步发文于<a href="https://letmefly.blog.csdn.net/article/details/155951986" rel="nofollow">CSDN</a>和我的<a href="https://blog.letmefly.xyz/" rel="nofollow">个人博客</a>，原创不易，转载经作者同意后请附上<a href="https://blog.letmefly.xyz/2025/12/15/LeetCode%202110.%E8%82%A1%E7%A5%A8%E5%B9%B3%E6%BB%91%E4%B8%8B%E8%B7%8C%E9%98%B6%E6%AE%B5%E7%9A%84%E6%95%B0%E7%9B%AE/" rel="nofollow">原文链接</a>哦~</p> <br> <p>千篇源码题解<a href="https://github.com/LetMeFly666/LeetCode">已开源</a></p> <br></blockquote>