<h2><a id="LetMeFly2412Python_1"></a>【LetMeFly】2412.完成所有交易的初始最少钱数：【年度巨献】举例说明(讲明白)，由难至简(手脚不乱)，附Python一行版</h2> <br><p></p> <br><div class="toc"> <br> <h4>文章目录</h4> <br> <ul><li><a href="#LetMeFly2412Python_1" rel="nofollow">【LetMeFly】2412.完成所有交易的初始最少钱数：【年度巨献】举例说明(讲明白)，由难至简(手脚不乱)，附Python一行版</a></li><li><ul><li><a href="#_5" rel="nofollow">问题描述</a></li><li><a href="#_50" rel="nofollow">解题方法：贪心</a></li><li><ul><li><a href="#_58" rel="nofollow">那行，我们先选赔钱的</a></li><li><a href="#_71" rel="nofollow">到了能赚钱时候也不容易</a></li><li><a href="#_81" rel="nofollow">解法来了</a></li></ul> <br>   </li><li><a href="#_227" rel="nofollow">写法上的优化</a></li><li><a href="#_330" rel="nofollow">时空复杂度分析</a></li><li><a href="#AC_335" rel="nofollow">AC代码（简化写法）</a></li><li><ul><li><a href="#C_337" rel="nofollow">C++</a></li><li><a href="#Python_362" rel="nofollow">Python</a></li><li><a href="#Java_378" rel="nofollow">Java</a></li><li><a href="#Go_400" rel="nofollow">Go</a></li></ul> <br>  </li></ul> <br> </li></ul> <br></div> <br><p></p> <br><h3><a id="_5"></a>问题描述</h3> <br><p>力扣题目链接：<a href="https://leetcode.cn/problems/minimum-money-required-before-transactions/" rel="nofollow">https://leetcode.cn/problems/minimum-money-required-before-transactions/</a></p> <br><p>给你一个下标从 <strong>0</strong> 开始的二维整数数组 <code><font face="monospace">transactions</font></code>，其中<code>transactions[i] = [cost<sub>i</sub>, cashback<sub>i</sub>]</code> 。</p> <br><p>数组描述了若干笔交易。其中每笔交易必须以 <strong>某种顺序</strong> 恰好完成一次。在任意一个时刻，你有一定数目的钱 <code>money</code> ，为了完成交易 <code>i</code> ，<code>money >= cost<sub>i</sub></code> 这个条件必须为真。执行交易后，你的钱数 <code>money</code> 变成 <code>money - cost<sub>i</sub> + cashback<sub>i</sub></code><sub> </sub>。</p> <br><p>请你返回 <strong>任意一种</strong> 交易顺序下，你都能完成所有交易的最少钱数<em> </em><code>money</code> 是多少。</p> <br><p> </p> <br><p><strong>示例 1：</strong></p> <br><pre><b>输入：</b>transactions = [[2,1],[5,0],[4,2]]<br><b>输出：</b>10<br><strong>解释：<br></strong>刚开始 money = 10 ，交易可以以任意顺序进行。<br>可以证明如果 money < 10 ，那么某些交易无法进行。<br></pre> <br><p><strong>示例 2：</strong></p> <br><pre><strong>输入：</strong>transactions = [[3,0],[0,3]]<br><b>输出：</b>3<br><strong>解释：</strong><br>- 如果交易执行的顺序是 [[3,0],[0,3]] ，完成所有交易需要的最少钱数是 3 。<br>- 如果交易执行的顺序是 [[0,3],[3,0]] ，完成所有交易需要的最少钱数是 0 。<br>所以，刚开始钱数为 3 ，任意顺序下交易都可以全部完成。<br></pre> <br><p> </p> <br><p><strong>提示：</strong></p> <br><ul><li><code>1 <= transactions.length <= 10<sup>5</sup></code></li><li><code>transactions[i].length == 2</code></li><li><code>0 <= cost<sub>i</sub>, cashback<sub>i</sub> <= 10<sup>9</sup></code></li></ul> <br><h3><a id="_50"></a>解题方法：贪心</h3> <br><blockquote> <br> <p>“在运气和实力面前，我选择了实力”——小T如是说。</p> <br> <p>不论机遇多么坏，我都必将不负债。</p> <br></blockquote> <br><p>那么，最“坏”的机遇是什么？当然是先亏钱（<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>     <br>      <br>       <br>       <br>         c <br>        <br>       <br>         o <br>        <br>       <br>         s <br>        <br>       <br>         t <br>        <br>       <br>         < <br>        <br>       <br>         c <br>        <br>       <br>         a <br>        <br>       <br>         s <br>        <br>       <br>         n <br>        <br>       <br>         b <br>        <br>       <br>         a <br>        <br>       <br>         c <br>        <br>       <br>         k <br>        <br>       <br>      <br>        cost \lt casnback <br>       <br>      <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6542em; vertical-align: -0.0391em;"></span><span class="mord mathnormal">cos</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel"><</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal">a</span><span class="mord mathnormal">s</span><span class="mord mathnormal">nba</span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right: 0.0315em;">k</span></span></span></span></span>）再赚钱，主打一个完事开头难。</p> <br><h4><a id="_58"></a>那行，我们先选赔钱的</h4> <br><p>对于两笔赔钱投资<code>[[6, 4], [3, 2]]</code>，有两种选择方案：</p> <br><ol><li>先选<code>[6, 4]</code>，那么我们需要初始资金<code>max(6, 6 + 3 - 4) = 5 = max(6, (6 - 4) + (3 - 2) + 2)</code></li><li>先选<code>[3, 2]</code>，那么我们需要初始资金<code>max(3, 3 + 6 - 2) = 7 = (3 - 2) + (6 - 4) + 4</code></li></ol> <br><p>有没有发现，不论选择方案如何，初始资金都为<code>max(cost, 赔钱总额 + 最后一次投资的cashback)</code>。</p> <br><blockquote> <br> <p>想要初始资金最大，那么我们就最后选“cashback”最大的那次投资。</p> <br></blockquote> <br><p>赔钱投资的最大初始资金要求为<code>赔钱总额 + max(cashback_赔)</code>，最终剩余<code>max(cashback_赔)</code>开始进行赚钱投资。</p> <br><h4><a id="_71"></a>到了能赚钱时候也不容易</h4> <br><p>好了，现在开始赚钱投资，钱开始越来越多了。但是，能赚钱不等于容易赚钱。<strong>想要赚钱，你得有那个资本。</strong></p> <br><p>既然接下来每一笔都会赚钱，也就是说每经过一笔交易所需的负担就会减小一些，所以我们不如上来就选最难的那个。</p> <br><blockquote> <br> <p>上来就选cost最大的那个，所需金额为<code>max(cost_赚)</code>。</p> <br></blockquote> <br><p>别忘了，赔钱阶段虽然赔钱，但是最终我们还剩下了<code>max(cashback_赔)</code>。因此还需要资金<code>max(0, max(cashback_赔) - max(cost_赚))</code>。</p> <br><h4><a id="_81"></a>解法来了</h4> <br><p>总结：两次遍历，第一次只遍历赔钱的交易，第二次遍历不赔钱的交易。</p> <br><ul><li>对于赔钱的交易，所需初始资金<code>ans = 赔钱总额 + max(cashback_赔)</code></li><li>对于不赔钱交易，还需初始资金加上<code>max(0, max(cashback_赔) - max(cost_赚))</code></li></ul> <br><p>下面先贴一个完整版代码，再放一个核心代码。</p> <br><p>完整版代码：</p> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-01-25 08:08:05<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-01-25 09:53:23<br> */</span><br><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">_WIN32</span></span><br><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"_[1,2]toVector.h"</span></span><br><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><br><br><span class="token comment">/*<br>先选赔的<br>    [[6, 4], [3, 2]]：<br>        先[6, 4]的话需要初始资金max(6, 6+3-4)=max(6, 5)=6=max(6, (6-4)+(3-2)+2)<br>        先[3, 2]的话需要初始资金max(3, 6+3-2)=max(3, 7)=7=(3-2)+(6-4)+4<br>    对于赔的：<br>        初始资金：赔钱总额+最大cashback<br>        结束资金：最大cashback<br>后选不赔的<br>    赚的一样：[[1, 2], [2, 3]]，先[2, 3]再[1, 2]<br>    赚的不同：<br>        [[3, 5], [7, 8]]：<br>            先[3, 5]的话需要初始资金7-(5-3)=5<br>            先[7, 8]的话需要初始资金7<br>    反正就是只要钱到了最大的“cost”，钱就够了。<br>    如果先投资“cost”比较小的话，一定会赚，本金加上赚的钱达到最大cost就行，所以初始值所需较小。<br>*/</span><br><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ll<span class="token punctuation">;</span><br><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    ll <span class="token function">minimumMoney</span><span class="token punctuation">(</span>vector<span class="token operator"><</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">>></span><span class="token operator">&</span> transactions<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        ll ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">int</span> M_pei <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token comment">// 先算赔的</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> transaction <span class="token operator">:</span> transactions<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>transaction<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator"><</span> transaction<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                ans <span class="token operator">+=</span> transaction<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> transaction<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>                M_pei <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>M_pei<span class="token punctuation">,</span> transaction<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        ans <span class="token operator">+=</span> M_pei<span class="token punctuation">;</span><br>        <span class="token comment">// 再算赚的，初始资金M_pei</span><br>        <span class="token keyword">int</span> M_zhuan <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> transaction <span class="token operator">:</span> transactions<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>transaction<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">>=</span> transaction<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                M_zhuan <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>M_zhuan<span class="token punctuation">,</span> transaction<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        ans <span class="token operator">+=</span> <span class="token function">max</span><span class="token punctuation">(</span>M_zhuan <span class="token operator">-</span> M_pei<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">_WIN32</span></span><br><span class="token comment">/*<br>[[2,1],[5,0],[4,2]]<br><br>10<br>*/</span><br><span class="token comment">/*<br>[[36,79],[94,94],[12,54],[71,25],[34,78],[89,66],[66,25],[7,29],[5,58],[2,25],[10,83],[62,62],[11,52],[40,5],[10,79],[74,53],[33,90],[91,81],[30,84]]<br><br>270<br>*/</span><br><br><span class="token comment">// 暴力验证一个答案是否正确，复杂度O(len(t)!)，对于10以内的数据还算可行</span><br><span class="token keyword">bool</span> <span class="token function">isok_baoliYanzheng</span><span class="token punctuation">(</span>vector<span class="token operator"><</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">>></span><span class="token operator">&</span> t<span class="token punctuation">,</span> ll init<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>    <span class="token function">sort</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">auto</span> isok <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>vector<span class="token operator"><</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">>></span><span class="token operator">&</span> t<span class="token punctuation">,</span> ll init<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> t0 <span class="token operator">:</span> t<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>init <span class="token operator"><</span> t0<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            init <span class="token operator">+=</span> t0<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> t0<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><span class="token punctuation">;</span><br>    <span class="token keyword">do</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> t0 <span class="token operator">:</span> t<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            cout <span class="token operator"><<</span> <span class="token char">'('</span> <span class="token operator"><<</span> t0<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator"><<</span> <span class="token string">", "</span> <span class="token operator"><<</span> t0<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator"><<</span> <span class="token string">"), "</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        cout <span class="token operator"><<</span> endl<span class="token punctuation">;</span><br>        <span class="token keyword">bool</span> isThisOk <span class="token operator">=</span> <span class="token function">isok</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> init<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isThisOk<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">next_permutation</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>    string s<span class="token punctuation">;</span><br>    Solution sol<span class="token punctuation">;</span><br>    <span class="token keyword">while</span> <span class="token punctuation">(</span>cin <span class="token operator">>></span> s<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        vector<span class="token operator"><</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">>></span> v <span class="token operator">=</span> <span class="token function">stringToVectorVector</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token function">debug</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        ll ans <span class="token operator">=</span> sol<span class="token punctuation">.</span><span class="token function">minimumMoney</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token function">dbg</span><span class="token punctuation">(</span>ans<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator"><=</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            cout <span class="token operator"><<</span> <span class="token string">"ifOk: "</span><span class="token punctuation">;</span><br>            <span class="token function">fflush</span><span class="token punctuation">(</span><span class="token constant">stdout</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            cout <span class="token operator"><<</span> <span class="token function">isok_baoliYanzheng</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> ans<span class="token punctuation">)</span> <span class="token operator"><<</span> endl<span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><br></code></pre> <br><p>核心代码：</p> <br><pre><code class="prism language-cpp">ll ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br><span class="token keyword">int</span> M_pei <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br><span class="token comment">// 先算赔的</span><br><span class="token keyword">for</span> <span class="token punctuation">(</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> transaction <span class="token operator">:</span> transactions<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>transaction<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator"><</span> transaction<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        ans <span class="token operator">+=</span> transaction<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> transaction<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>        M_pei <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>M_pei<span class="token punctuation">,</span> transaction<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br>ans <span class="token operator">+=</span> M_pei<span class="token punctuation">;</span><br><span class="token comment">// 再算赚的，初始资金M_pei</span><br><span class="token keyword">int</span> M_zhuan <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br><span class="token keyword">for</span> <span class="token punctuation">(</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> transaction <span class="token operator">:</span> transactions<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>transaction<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">>=</span> transaction<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        M_zhuan <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>M_zhuan<span class="token punctuation">,</span> transaction<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br>ans <span class="token operator">+=</span> <span class="token function">max</span><span class="token punctuation">(</span>M_zhuan <span class="token operator">-</span> M_pei<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">return</span> ans<span class="token punctuation">;</span><br></code></pre> <br><h3><a id="_227"></a>写法上的优化</h3> <br><p>上述代码的伪代码为：</p> <br><pre><code class="prism language-cpp">ans <span class="token operator">=</span> <span class="token number">0</span><br>M_pei <span class="token operator">=</span> <span class="token number">0</span><br><span class="token keyword">for</span> 赔钱交易 <span class="token punctuation">{<!-- --></span><br>    ans <span class="token operator">+=</span> 赔钱总额<br>    M_pei <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>cashback<span class="token punctuation">)</span><br><span class="token punctuation">}</span><br>ans <span class="token operator">+=</span> M_pei<br>M_zhuan <span class="token operator">=</span> <span class="token number">0</span><br><span class="token keyword">for</span> 不赔钱交易 <span class="token punctuation">{<!-- --></span><br>    M_zhuan <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>cost<span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><span class="token keyword">if</span> M_zhuan <span class="token operator">></span> M_pei <span class="token punctuation">{<!-- --></span><br>    ans <span class="token operator">+=</span> M_zhuan <span class="token operator">-</span> M_pei<br><span class="token punctuation">}</span><br></code></pre> <br><p>我们不妨调换个顺序：</p> <br><pre><code class="prism language-cpp">ans <span class="token operator">=</span> <span class="token number">0</span><br>M_pei <span class="token operator">=</span> <span class="token number">0</span><br><span class="token keyword">for</span> 赔钱交易 <span class="token punctuation">{<!-- --></span><br>    ans <span class="token operator">+=</span> 赔钱总额<br>    M_pei <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>cashback<span class="token punctuation">)</span><br><span class="token punctuation">}</span><br>M_zhuan <span class="token operator">=</span> <span class="token number">0</span><br><span class="token keyword">for</span> 不赔钱交易 <span class="token punctuation">{<!-- --></span><br>    M_zhuan <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>cost<span class="token punctuation">)</span><br><span class="token punctuation">}</span><br>ans <span class="token operator">+=</span> M_pei  <span class="token comment">// 将这一行调换到这里</span><br><span class="token keyword">if</span> M_zhuan <span class="token operator">></span> M_pei <span class="token punctuation">{<!-- --></span><br>    ans <span class="token operator">+=</span> M_zhuan <span class="token operator">-</span> M_pei<br><span class="token punctuation">}</span><br></code></pre> <br><p>那么，最后4行的：</p> <br><pre><code class="prism language-cpp">ans <span class="token operator">+=</span> M_pei<br><span class="token keyword">if</span> M_zhuan <span class="token operator">></span> M_pei <span class="token punctuation">{<!-- --></span><br>    ans <span class="token operator">+=</span> M_zhuan <span class="token operator">-</span> M_pei<br><span class="token punctuation">}</span><br></code></pre> <br><p>就可以简写为：</p> <br><pre><code class="prism language-cpp">ans <span class="token operator">+=</span> <span class="token function">max</span><span class="token punctuation">(</span>M_zhuan<span class="token punctuation">,</span> M_pei<span class="token punctuation">)</span><br></code></pre> <br><p>同时，前面10行的：</p> <br><pre><code class="prism language-cpp">ans <span class="token operator">=</span> <span class="token number">0</span><br>M_pei <span class="token operator">=</span> <span class="token number">0</span><br><span class="token keyword">for</span> 赔钱交易 <span class="token punctuation">{<!-- --></span><br>    ans <span class="token operator">+=</span> 赔钱总额<br>    M_pei <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>cashback<span class="token punctuation">)</span><br><span class="token punctuation">}</span><br>M_zhuan <span class="token operator">=</span> <span class="token number">0</span><br><span class="token keyword">for</span> 不赔钱交易 <span class="token punctuation">{<!-- --></span><br>    M_zhuan <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>cost<span class="token punctuation">)</span><br><span class="token punctuation">}</span><br></code></pre> <br><p>就可以缩减为一次遍历：</p> <br><pre><code class="prism language-cpp">ans <span class="token operator">=</span> <span class="token number">0</span><br>M_pei <span class="token operator">=</span> <span class="token number">0</span><br>M_zhuan <span class="token operator">=</span> <span class="token number">0</span><br><span class="token keyword">for</span> 交易 <span class="token punctuation">{<!-- --></span><br>    <span class="token keyword">if</span> cost <span class="token operator">></span> cashback <span class="token punctuation">{<!-- --></span>  <span class="token comment">// 赔钱</span><br>        ans <span class="token operator">+=</span> 赔钱总额<br>        M_pei <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>cashback<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span><br>        M_zhuan <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>cost<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br></code></pre> <br><p>不难发现，如果赔钱则<code>cashback</code>更小，如果不赔钱则<code>cost</code>更小。也就是说<code>M_pei</code>和<code>M_zhuan</code>其实都是<code>min(cost, cashback)</code>的最大值。</p> <br><p>因此上述代码还可以简写为：</p> <br><pre><code class="prism language-cpp">ans <span class="token operator">=</span> <span class="token number">0</span><br>M <span class="token operator">=</span> <span class="token number">0</span><br><span class="token keyword">for</span> 交易 <span class="token punctuation">{<!-- --></span><br>    ans <span class="token operator">+=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> cost <span class="token operator">-</span> cashback<span class="token punctuation">)</span><br>    M <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>M<span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>cost<span class="token punctuation">,</span> cashback<span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span><br></code></pre> <br><p><strong>也就是说：</strong></p> <br><p>最终答案为：<code>赔钱总额 + 最大的“min(cost, cashback)”</code></p> <br><h3><a id="_330"></a>时空复杂度分析</h3> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          l <br>         <br>        <br>          e <br>         <br>        <br>          n <br>         <br>        <br>          ( <br>         <br>        <br>          t <br>         <br>        <br>          r <br>         <br>        <br>          a <br>         <br>        <br>          n <br>         <br>        <br>          s <br>         <br>        <br>          a <br>         <br>        <br>          c <br>         <br>        <br>          t <br>         <br>        <br>          i <br>         <br>        <br>          o <br>         <br>        <br>          n <br>         <br>        <br>          s <br>         <br>        <br>          ) <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(len(transactions)) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mord mathnormal">an</span><span class="mord mathnormal">s</span><span class="mord mathnormal">a</span><span class="mord mathnormal">c</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mclose">))</span></span></span></span></span></li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          1 <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(1) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></li></ul> <br><h3><a id="AC_335"></a>AC代码（简化写法）</h3> <br><h4><a id="C_337"></a>C++</h4> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-01-25 09:58:52<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-01-25 09:59:57<br> */</span><br><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ll<span class="token punctuation">;</span><br><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    ll <span class="token function">minimumMoney</span><span class="token punctuation">(</span>vector<span class="token operator"><</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">>></span><span class="token operator">&</span> transactions<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        ll ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">int</span> M <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> t <span class="token operator">:</span> transactions<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            ans <span class="token operator">+=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            M <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>M<span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans <span class="token operator">+</span> M<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><h4><a id="Python_362"></a>Python</h4> <br><pre><code class="prism language-python"><span class="token triple-quoted-string string">'''<br>Author: LetMeFly<br>Date: 2025-01-25 10:00:39<br>LastEditors: LetMeFly.xyz<br>LastEditTime: 2025-01-25 10:02:46<br>'''</span><br><span class="token keyword">from</span> typing <span class="token keyword">import</span> List<br><br><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span><br>    <span class="token keyword">def</span> <span class="token function">minimumMoney</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> transactions<span class="token punctuation">:</span> List<span class="token punctuation">[</span>List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">:</span><br>        <span class="token keyword">return</span> <span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> c <span class="token operator">-</span> e<span class="token punctuation">)</span> <span class="token keyword">for</span> c<span class="token punctuation">,</span> e <span class="token keyword">in</span> transactions<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token builtin">max</span><span class="token punctuation">(</span><span class="token builtin">min</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token keyword">for</span> t <span class="token keyword">in</span> transactions<span class="token punctuation">)</span><br></code></pre> <br><h4><a id="Java_378"></a>Java</h4> <br><pre><code class="prism language-java"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-01-25 10:05:00<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-01-25 10:06:21<br> */</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br>    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">minimumMoney</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> transactions<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">long</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">int</span> <span class="token class-name">M</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> t <span class="token operator">:</span> transactions<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            ans <span class="token operator">+=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token class-name">M</span> <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token class-name">M</span><span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans <span class="token operator">+</span> <span class="token class-name">M</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br></code></pre> <br><h4><a id="Go_400"></a>Go</h4> <br><pre><code class="prism language-go"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-01-25 10:07:19<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-01-25 10:12:39<br> */</span><br><span class="token keyword">package</span> main<br><br><span class="token keyword">func</span> max_MMRBT<span class="token punctuation">[</span>T <span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">(</span>a T<span class="token punctuation">,</span> b T<span class="token punctuation">)</span> T <span class="token punctuation">{<!-- --></span><br>    <span class="token keyword">if</span> a <span class="token operator">></span> b <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">return</span> a<br>    <span class="token punctuation">}</span><br>    <span class="token keyword">return</span> b<br><span class="token punctuation">}</span><br><br><span class="token keyword">func</span> <span class="token function">min_MMRBT</span><span class="token punctuation">(</span>a <span class="token builtin">int</span><span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{<!-- --></span><br>    <span class="token keyword">if</span> a <span class="token operator"><</span> b <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">return</span> a<br>    <span class="token punctuation">}</span><br>    <span class="token keyword">return</span> b<br><span class="token punctuation">}</span><br><br><span class="token keyword">func</span> <span class="token function">minimumMoney</span><span class="token punctuation">(</span>transactions <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>ans <span class="token builtin">int64</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>    M <span class="token operator">:=</span> <span class="token number">0</span><br>    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> t <span class="token operator">:=</span> <span class="token keyword">range</span> transactions <span class="token punctuation">{<!-- --></span><br>        ans <span class="token operator">+=</span> <span class="token function">int64</span><span class="token punctuation">(</span><span class="token function">max_MMRBT</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>        M <span class="token operator">=</span> <span class="token function">max_MMRBT</span><span class="token punctuation">(</span>M<span class="token punctuation">,</span> <span class="token function">min_MMRBT</span><span class="token punctuation">(</span>t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br>    ans <span class="token operator">+=</span> <span class="token function">int64</span><span class="token punctuation">(</span>M<span class="token punctuation">)</span><br>    <span class="token keyword">return</span><br><span class="token punctuation">}</span><br></code></pre> <br><blockquote> <br> <p>同步发文于CSDN和我的<a href="https://blog.letmefly.xyz/" rel="nofollow">个人博客</a>，原创不易，转载经作者同意后请附上<a href="https://blog.letmefly.xyz/2025/01/25/LeetCode%202412.%E5%AE%8C%E6%88%90%E6%89%80%E6%9C%89%E4%BA%A4%E6%98%93%E7%9A%84%E5%88%9D%E5%A7%8B%E6%9C%80%E5%B0%91%E9%92%B1%E6%95%B0/" rel="nofollow">原文链接</a>哦~</p> <br> <p>Tisfy：<a href="https://letmefly.blog.csdn.net/article/details/145352577" rel="nofollow">https://letmefly.blog.csdn.net/article/details/145352577</a></p> <br></blockquote>