<h2><a id="LetMeFly2300lowerupper_bound_1"></a>【LetMeFly】2300.咒语和药水的成功对数：二分查找（附(lower/upper)_bound库函数大于小于个数查找表）</h2> <br><p>力扣题目链接：<a href="https://leetcode.cn/problems/successful-pairs-of-spells-and-potions/" rel="nofollow">https://leetcode.cn/problems/successful-pairs-of-spells-and-potions/</a></p> <br><p>给你两个正整数数组 <code>spells</code> 和 <code>potions</code> ，长度分别为 <code>n</code> 和 <code>m</code> ，其中 <code>spells[i]</code> 表示第 <code>i</code> 个咒语的能量强度，<code>potions[j]</code> 表示第 <code>j</code> 瓶药水的能量强度。</p> <br><p>同时给你一个整数 <code>success</code> 。一个咒语和药水的能量强度 <strong>相乘</strong> 如果 <strong>大于等于</strong> <code>success</code> ，那么它们视为一对 <strong>成功</strong> 的组合。</p> <br><p>请你返回一个长度为 <code>n</code> 的整数数组<em> </em><code>pairs</code>，其中<em> </em><code>pairs[i]</code> 是能跟第 <code>i</code> 个咒语成功组合的 <b>药水</b> 数目。</p> <br><p> </p> <br><p><strong>示例 1：</strong></p> <br><pre><b>输入：</b>spells = [5,1,3], potions = [1,2,3,4,5], success = 7<br><b>输出：</b>[4,0,3]<br><strong>解释：</strong><br>- 第 0 个咒语：5 * [1,2,3,4,5] = [5,<em><strong>10</strong></em>,<em><strong>15</strong></em>,<em><strong>20</strong></em>,<em><strong>25</strong></em>] 。总共 4 个成功组合。<br>- 第 1 个咒语：1 * [1,2,3,4,5] = [1,2,3,4,5] 。总共 0 个成功组合。<br>- 第 2 个咒语：3 * [1,2,3,4,5] = [3,6,<em><strong>9</strong></em>,<em><strong>12</strong></em>,<em><strong>15</strong></em>] 。总共 3 个成功组合。<br>所以返回 [4,0,3] 。<br></pre> <br><p><strong>示例 2：</strong></p> <br><pre><b>输入：</b>spells = [3,1,2], potions = [8,5,8], success = 16<br><b>输出：</b>[2,0,2]<br><strong>解释：</strong><br>- 第 0 个咒语：3 * [8,5,8] = [<em><strong>24</strong></em>,15,<em><strong>24</strong></em>] 。总共 2 个成功组合。<br>- 第 1 个咒语：1 * [8,5,8] = [8,5,8] 。总共 0 个成功组合。<br>- 第 2 个咒语：2 * [8,5,8] = [<em><strong>16</strong></em>,10,<em><strong>16</strong></em>] 。总共 2 个成功组合。<br>所以返回 [2,0,2] 。<br></pre> <br><p> </p> <br><p><strong>提示：</strong></p> <br><ul><li><code>n == spells.length</code></li><li><code>m == potions.length</code></li><li><code>1 <= n, m <= 10<sup>5</sup></code></li><li><code>1 <= spells[i], potions[i] <= 10<sup>5</sup></code></li><li><code>1 <= success <= 10<sup>10</sup></code></li></ul> <br><h3><a id="_49"></a>解题方法：二分查找</h3> <br><p>我们首先将“毒药”数组从小到大排序，那么对于咒语<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        i<br>       <br>      <br>      <br>       i<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span>，计算出其想要达到<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        s<br>       <br>       <br>        u<br>       <br>       <br>        c<br>       <br>       <br>        c<br>       <br>       <br>        e<br>       <br>       <br>        s<br>       <br>       <br>        s<br>       <br>      <br>      <br>       success<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">u</span><span class="mord mathnormal">ccess</span></span></span></span></span>所需的最小毒药强度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        t<br>       <br>       <br>        o<br>       <br>       <br>        F<br>       <br>       <br>        i<br>       <br>       <br>        n<br>       <br>       <br>        d<br>       <br>      <br>      <br>       toFind<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right: 0.1389em;">F</span><span class="mord mathnormal">in</span><span class="mord mathnormal">d</span></span></span></span></span>，接着二分查找<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>    <br>     <br>      <br>       <br>        t<br>       <br>       <br>        o<br>       <br>       <br>        F<br>       <br>       <br>        i<br>       <br>       <br>        n<br>       <br>       <br>        d<br>       <br>      <br>      <br>       toFind<br>      <br>     <br>    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right: 0.1389em;">F</span><span class="mord mathnormal">in</span><span class="mord mathnormal">d</span></span></span></span></span>的位置即可。</p> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         n<br>        <br>        <br>         log<br>        <br>        <br>         ⁡<br>        <br>        <br>         n<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(n\log n)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mop">lo<span style="margin-right: 0.0139em;">g</span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>，其中<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         n<br>        <br>        <br>         =<br>        <br>        <br>         l<br>        <br>        <br>         e<br>        <br>        <br>         n<br>        <br>        <br>         (<br>        <br>        <br>         p<br>        <br>        <br>         o<br>        <br>        <br>         t<br>        <br>        <br>         i<br>        <br>        <br>         o<br>        <br>        <br>         n<br>        <br>        <br>         s<br>        <br>        <br>         )<br>        <br>       <br>       <br>        n=len(potions)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mord mathnormal">o</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></span></li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         l<br>        <br>        <br>         o<br>        <br>        <br>         g<br>        <br>        <br>         n<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(log n)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></li></ul> <br><h4><a id="AC_56"></a>AC代码</h4> <br><h5><a id="C_58"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2023-11-10 14:17:25<br> * @LastEditors: LetMeFly<br> * @LastEditTime: 2023-11-10 14:23:41<br> */</span><br><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ll<span class="token punctuation">;</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">successfulPairs</span><span class="token punctuation">(</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> spells<span class="token punctuation">,</span> vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> potions<span class="token punctuation">,</span> ll success<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token function">sort</span><span class="token punctuation">(</span>potions<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> potions<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">&</span> t <span class="token operator">:</span> spells<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            ll toFind <span class="token operator">=</span> success <span class="token operator">/</span> t<span class="token punctuation">;</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>toFind <span class="token operator">*</span> t <span class="token operator"><</span> success<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                toFind<span class="token operator">++</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            t <span class="token operator">=</span> potions<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">lower_bound</span><span class="token punctuation">(</span>potions<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> potions<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> toFind<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> spells<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><h5><a id="Python_84"></a>Python</h5> <br><pre><code class="prism language-python"><span class="token triple-quoted-string string">'''<br>Author: LetMeFly<br>Date: 2023-11-10 14:25:21<br>LastEditors: LetMeFly<br>LastEditTime: 2023-11-10 14:28:30<br>'''</span><br><span class="token comment"># from typing import List</span><br><span class="token comment"># from bisect import bisect_left</span><br><br><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span><br>    <span class="token keyword">def</span> <span class="token function">successfulPairs</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> spells<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> potions<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">,</span> success<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span><br>        potions<span class="token punctuation">.</span>sort<span class="token punctuation">(</span><span class="token punctuation">)</span><br>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>spells<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span><br>            toFind <span class="token operator">=</span> success <span class="token operator">//</span> spells<span class="token punctuation">[</span>i<span class="token punctuation">]</span><br>            <span class="token keyword">if</span> toFind <span class="token operator">*</span> spells<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator"><</span> success<span class="token punctuation">:</span><br>                toFind <span class="token operator">+=</span> <span class="token number">1</span><br>            spells<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>potions<span class="token punctuation">)</span> <span class="token operator">-</span> bisect_left<span class="token punctuation">(</span>potions<span class="token punctuation">,</span> toFind<span class="token punctuation">)</span><br>        <span class="token keyword">return</span> spells<br><br></code></pre> <br><h3><a id="_108"></a>查找范围小优化+不进行类型转换小优化</h3> <br><p>上述有两个可以优化的地方：</p> <br><ol><li>确定<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         t<br>        <br>        <br>         o<br>        <br>        <br>         F<br>        <br>        <br>         i<br>        <br>        <br>         n<br>        <br>        <br>         d<br>        <br>       <br>       <br>        toFind<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right: 0.1389em;">F</span><span class="mord mathnormal">in</span><span class="mord mathnormal">d</span></span></span></span></span>的值，实质上就是<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         ⌈<br>        <br>        <br>         s<br>        <br>        <br>         u<br>        <br>        <br>         c<br>        <br>        <br>         c<br>        <br>        <br>         e<br>        <br>        <br>         s<br>        <br>        <br>         s<br>        <br>        <br>         /<br>        <br>        <br>         t<br>        <br>        <br>         ⌉<br>        <br>       <br>       <br>        \lceil success / t\rceil<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">⌈</span><span class="mord mathnormal">s</span><span class="mord mathnormal">u</span><span class="mord mathnormal">ccess</span><span class="mord">/</span><span class="mord mathnormal">t</span><span class="mclose">⌉</span></span></span></span></span></li><li><code>lower_bound(vector<int>::iterator, vector<int>::iterator, long long)</code>会在比较的过程中将每个int自动转为<code>long long</code>类型，有一丢丢耗时；可以在<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         t<br>        <br>        <br>         o<br>        <br>        <br>         F<br>        <br>        <br>         i<br>        <br>        <br>         n<br>        <br>        <br>         d<br>        <br>       <br>       <br>        toFind<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right: 0.1389em;">F</span><span class="mord mathnormal">in</span><span class="mord mathnormal">d</span></span></span></span></span>明显超出毒药毒性数据范围时直接返回<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         0<br>        <br>       <br>       <br>        0<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">0</span></span></span></span></span>。</li></ol> <br><p>以上。</p> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         n<br>        <br>        <br>         log<br>        <br>        <br>         ⁡<br>        <br>        <br>         n<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(n\log n)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mop">lo<span style="margin-right: 0.0139em;">g</span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>，其中<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         n<br>        <br>        <br>         =<br>        <br>        <br>         l<br>        <br>        <br>         e<br>        <br>        <br>         n<br>        <br>        <br>         (<br>        <br>        <br>         p<br>        <br>        <br>         o<br>        <br>        <br>         t<br>        <br>        <br>         i<br>        <br>        <br>         o<br>        <br>        <br>         n<br>        <br>        <br>         s<br>        <br>        <br>         )<br>        <br>       <br>       <br>        n=len(potions)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mord mathnormal">o</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></span></li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         l<br>        <br>        <br>         o<br>        <br>        <br>         g<br>        <br>        <br>         n<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(log n)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></li></ul> <br><h4><a id="AC_120"></a>AC代码</h4> <br><h5><a id="C_122"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-10-08 21:37:50<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-10-08 22:17:48<br> */</span><br><span class="token comment">/*<br>a * b >= success<br>a >= success/b<br>s b s/b a<br>6 2  3  3<br>6 3  2  2<br>6 4 1.5 2<br>6 5 1.x 2<br>a >= ⌈s/b⌉<br>a >= ⌊(s+b-1)/b⌋<br>*/</span><br><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ll<span class="token punctuation">;</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">successfulPairs</span><span class="token punctuation">(</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> spells<span class="token punctuation">,</span> vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> potions<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">long</span> success<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token function">sort</span><span class="token punctuation">(</span>potions<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> potions<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">&</span> s <span class="token operator">:</span> spells<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            ll toFind <span class="token operator">=</span> <span class="token punctuation">(</span>success <span class="token operator">+</span> s <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> s<span class="token punctuation">;</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>toFind <span class="token operator">></span> <span class="token number">100000</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span><br>                s <span class="token operator">=</span> potions<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">lower_bound</span><span class="token punctuation">(</span>potions<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> potions<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> toFind<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> spells<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><h3><a id="_160"></a>查找范围小优化</h3> <br><p>上述有一个可以优化的地方：</p> <br><blockquote> <br> <p><span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         ≥<br>        <br>        <br>         ⌈<br>        <br>        <br>         <br>          <br>           s<br>          <br>          <br>           u<br>          <br>          <br>           c<br>          <br>          <br>           c<br>          <br>          <br>           e<br>          <br>          <br>           s<br>          <br>          <br>           s<br>          <br>         <br>         <br>          t<br>         <br>        <br>        <br>         ⌉<br>        <br>       <br>       <br>        \geq\lceil \frac{success}{t}\rceil<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7719em; vertical-align: -0.136em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1.095em; vertical-align: -0.345em;"></span><span class="mopen">⌈</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.6954em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">ccess</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">⌉</span></span></span></span></span> ⇔ <span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         ≥<br>        <br>        <br>         ⌊<br>        <br>        <br>         <br>          <br>           s<br>          <br>          <br>           u<br>          <br>          <br>           c<br>          <br>          <br>           c<br>          <br>          <br>           e<br>          <br>          <br>           s<br>          <br>          <br>           s<br>          <br>          <br>           +<br>          <br>          <br>           t<br>          <br>          <br>           −<br>          <br>          <br>           1<br>          <br>         <br>         <br>          t<br>         <br>        <br>        <br>         ⌋<br>        <br>       <br>       <br>        \geq\lfloor\frac{success+t-1}{t}\rfloor<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7719em; vertical-align: -0.136em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1.1901em; vertical-align: -0.345em;"></span><span class="mopen">⌊</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8451em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">ccess</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight">t</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">⌋</span></span></span></span></span> ⇔ <span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         ≥<br>        <br>        <br>         ⌊<br>        <br>        <br>         <br>          <br>           s<br>          <br>          <br>           u<br>          <br>          <br>           c<br>          <br>          <br>           c<br>          <br>          <br>           e<br>          <br>          <br>           s<br>          <br>          <br>           s<br>          <br>          <br>           −<br>          <br>          <br>           1<br>          <br>         <br>         <br>          t<br>         <br>        <br>        <br>         ⌋<br>        <br>        <br>         +<br>        <br>        <br>         1<br>        <br>       <br>       <br>        \geq\lfloor\frac{success-1}{t}\rfloor+1<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7719em; vertical-align: -0.136em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1.1901em; vertical-align: -0.345em;"></span><span class="mopen">⌊</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8451em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">ccess</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">⌋</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span></p> <br> <p>由于所涉及的数据都是整数，所以有<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         ≥<br>        <br>        <br>         ⌊<br>        <br>        <br>         <br>          <br>           s<br>          <br>          <br>           u<br>          <br>          <br>           c<br>          <br>          <br>           c<br>          <br>          <br>           e<br>          <br>          <br>           s<br>          <br>          <br>           s<br>          <br>          <br>           −<br>          <br>          <br>           1<br>          <br>         <br>         <br>          t<br>         <br>        <br>        <br>         ⌋<br>        <br>        <br>         +<br>        <br>        <br>         1<br>        <br>       <br>       <br>        \geq\lfloor\frac{success-1}{t}\rfloor+1<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7719em; vertical-align: -0.136em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1.1901em; vertical-align: -0.345em;"></span><span class="mopen">⌊</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8451em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">ccess</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">⌋</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span> ⇔ <span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         ><br>        <br>        <br>         ⌊<br>        <br>        <br>         <br>          <br>           s<br>          <br>          <br>           u<br>          <br>          <br>           c<br>          <br>          <br>           c<br>          <br>          <br>           e<br>          <br>          <br>           s<br>          <br>          <br>           s<br>          <br>          <br>           −<br>          <br>          <br>           1<br>          <br>         <br>         <br>          t<br>         <br>        <br>        <br>         ⌋<br>        <br>       <br>       <br>        \gt \lfloor\frac{success-1}{t}\rfloor<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.5782em; vertical-align: -0.0391em;"></span><span class="mrel">></span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1.1901em; vertical-align: -0.345em;"></span><span class="mopen">⌊</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8451em;"><span class="" style="top: -2.655em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.394em;"><span class="pstrut" style="height: 3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">ccess</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.345em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">⌋</span></span></span></span></span></p> <br></blockquote> <br><p>以上。</p> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         n<br>        <br>        <br>         log<br>        <br>        <br>         ⁡<br>        <br>        <br>         n<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(n\log n)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mop">lo<span style="margin-right: 0.0139em;">g</span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>，其中<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         n<br>        <br>        <br>         =<br>        <br>        <br>         l<br>        <br>        <br>         e<br>        <br>        <br>         n<br>        <br>        <br>         (<br>        <br>        <br>         p<br>        <br>        <br>         o<br>        <br>        <br>         t<br>        <br>        <br>         i<br>        <br>        <br>         o<br>        <br>        <br>         n<br>        <br>        <br>         s<br>        <br>        <br>         )<br>        <br>       <br>       <br>        n=len(potions)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mord mathnormal">o</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></span></li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"><br>     <br>      <br>       <br>        <br>         O<br>        <br>        <br>         (<br>        <br>        <br>         l<br>        <br>        <br>         o<br>        <br>        <br>         g<br>        <br>        <br>         n<br>        <br>        <br>         )<br>        <br>       <br>       <br>        O(log n)<br>       <br>      <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></li></ul> <br><h4><a id="AC_173"></a>AC代码</h4> <br><h5><a id="C_175"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2025-10-08 21:37:50<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2025-10-08 22:21:04<br> */</span><br><span class="token comment">/*<br>a * b >= success<br>a >= success/b<br>s b s/b a<br>6 2  3  3<br>6 3  2  2<br>6 4 1.5 2<br>6 5 1.x 2<br>a >= ⌈s/b⌉<br>a >= ⌊(s+b-1)/b⌋<br>a >= ⌊(s-1)/b⌋+1<br>a > ⌊(s-1)/b⌋<br>*/</span><br><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ll<span class="token punctuation">;</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">successfulPairs</span><span class="token punctuation">(</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> spells<span class="token punctuation">,</span> vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> potions<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">long</span> success<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token function">sort</span><span class="token punctuation">(</span>potions<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> potions<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        success <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">// 提前-1后面不用每次都-1了</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">&</span> s <span class="token operator">:</span> spells<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            ll target <span class="token operator">=</span> success <span class="token operator">/</span> s<span class="token punctuation">;</span><br>            <span class="token keyword">if</span> <span class="token punctuation">(</span>target <span class="token operator">></span> <span class="token number">100000</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span><br>                s <span class="token operator">=</span> potions<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">upper_bound</span><span class="token punctuation">(</span>potions<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> potions<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> spells<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><h3><a id="lowerupper_bound_216"></a>(lower/upper)_bound库函数含义、大于小于个数查找表</h3> <br><h4><a id="lowerupper_bound_218"></a>(lower/upper)_bound库函数含义</h4> <br><table><thead><tr><th>函数</th><th>返回的位置含义</th></tr></thead><tbody><tr><td><code>lower_bound(a.begin(), a.end(), x)</code></td><td>第一个 <strong>≥ x</strong> 的元素的位置</td></tr><tr><td><code>upper_bound(a.begin(), a.end(), x)</code></td><td>第一个 <strong>> x</strong> 的元素的位置</td></tr></tbody></table><br><h4><a id="x_225"></a>查找(大于等于/大于/小于/小于等于)x的元素的个数</h4> <br><table><thead><tr><th>条件</th><th>表达式</th><th>含义</th></tr></thead><tbody><tr><td><strong>≥ x</strong></td><td><code>a.end() - lower_bound(a.begin(), a.end(), x)</code></td><td>从 ≥x 开始到末尾</td></tr><tr><td><strong>> x</strong></td><td><code>a.end() - upper_bound(a.begin(), a.end(), x)</code></td><td>从 >x 开始到末尾</td></tr><tr><td><strong>≤ x</strong></td><td><code>upper_bound(a.begin(), a.end(), x) - a.begin()</code></td><td>从开头到 ≤x 结束</td></tr><tr><td><strong>< x</strong></td><td><code>lower_bound(a.begin(), a.end(), x) - a.begin()</code></td><td>从开头到 <x 结束</td></tr></tbody></table><br><h3><a id="End_234"></a>End</h3> <br><blockquote> <br> <p>同步发文于<a href="https://letmefly.blog.csdn.net/article/details/134332611" rel="nofollow">CSDN</a>和我的<a href="https://blog.letmefly.xyz/" rel="nofollow">个人博客</a>，原创不易，转载经作者同意后请附上<a href="https://blog.letmefly.xyz/2023/11/10/LeetCode%202300.%E5%92%92%E8%AF%AD%E5%92%8C%E8%8D%AF%E6%B0%B4%E7%9A%84%E6%88%90%E5%8A%9F%E5%AF%B9%E6%95%B0/" rel="nofollow">原文链接</a>哦~</p> <br> <p>千篇源码题解<a href="https://github.com/LetMeFly666/LeetCode">已开源</a></p> <br></blockquote>