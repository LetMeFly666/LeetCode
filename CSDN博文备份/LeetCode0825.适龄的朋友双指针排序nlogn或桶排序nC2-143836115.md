<h2><a id="LetMeFly825nlog_n__n__C2_1"></a>【LetMeFly】825.适龄的朋友：双指针(排序nlog n) 或 桶排序(n + C^2)</h2> <br><p>力扣题目链接：<a href="https://leetcode.cn/problems/friends-of-appropriate-ages/" rel="nofollow">https://leetcode.cn/problems/friends-of-appropriate-ages/</a></p> <br><p>在社交媒体网站上有 <code>n</code> 个用户。给你一个整数数组 <code>ages</code> ，其中 <code>ages[i]</code> 是第 <code>i</code> 个用户的年龄。</p> <br><p>如果下述任意一个条件为真，那么用户 <code>x</code> 将不会向用户 <code>y</code>（<code>x != y</code>）发送好友请求：</p> <br><ul><li><code>ages[y] <= 0.5 * ages[x] + 7</code></li><li><code>ages[y] > ages[x]</code></li><li><code>ages[y] > 100 && ages[x] < 100</code></li></ul> <br><p>否则，<code>x</code> 将会向 <code>y</code> 发送一条好友请求。</p> <br><p>注意，如果 <code>x</code> 向 <code>y</code> 发送一条好友请求，<code>y</code> 不必也向 <code>x</code> 发送一条好友请求。另外，用户不会向自己发送好友请求。</p> <br><p>返回在该社交媒体网站上产生的好友请求总数。</p> <br><p> </p> <br><p><strong>示例 1：</strong></p> <br><pre><strong>输入：</strong>ages = [16,16]<br><strong>输出：</strong>2<br><strong>解释：</strong>2 人互发好友请求。<br></pre> <br><p><strong>示例 2：</strong></p> <br><pre><strong>输入：</strong>ages = [16,17,18]<br><strong>输出：</strong>2<br><strong>解释：</strong>产生的好友请求为 17 -> 16 ，18 -> 17 。<br></pre> <br><p><strong>示例 3：</strong></p> <br><pre><strong>输入：</strong>ages = [20,30,100,110,120]<br><strong>输出：</strong>3<br><strong>解释：</strong>产生的好友请求为 110 -> 100 ，120 -> 110 ，120 -> 100 。<br></pre> <br><p> </p> <br><p><strong>提示：</strong></p> <br><ul><li><code>n == ages.length</code></li><li><code>1 <= n <= 2 * 10<sup>4</sup></code></li><li><code>1 <= ages[i] <= 120</code></li></ul> <br><h3><a id="_59"></a>方法一：双指针</h3> <br><p>如果满足第三条<code>ages[y] > 100 && ages[x] < 100</code>，那么一定满足第二条<code>ages[y] > ages[x]</code>，因此第三条可以忽略（只要满足第二条，不需要看是否满足第三条就一定不会受到邀请）。</p> <br><p>由第一条和第二条可知，当<code>y</code>满足<code>0.5x+7 < y <= x</code>时<code>y</code>才会收到来自<code>x</code>的邀请。由<code>0.5x+7 < x</code>可得只有<code>>= 15</code>的<code>x</code>才会有可能发送邀请。</p> <br><p>对于邀请发送者<code>x</code>，<code>y</code>的最小值需要满足<code>y > 0.5x+7</code>，<code>y</code>的最大值需要满足<code>y <= x</code>。</p> <br><p>假设<code>y_l</code>是第一个满足<code>> 0.5x+7</code>的<code>y</code>下标，<code>y_r</code>是最后一个满足<code><= x</code>的<code>y</code>下标，那么对于区间<code>[y_l, y_r]</code>，只有<code>x</code>自身不会收到<code>x</code>的邀请，其他用户都会收到<code>x</code>的邀请。因此<code>x</code>的邀请发送数量为<code>区间长度 - 1 = y_r - y_l</code>。</p> <br><p>不难发现随着<code>x</code>的非递减，<code>y</code>区间的左右端点<code>y_l</code>和<code>y_r</code>也是非递减的，因此就可以使用双指针来实现每个元素只被遍历数次。</p> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          n <br>         <br>        <br>          log <br>         <br>        <br>          ⁡ <br>         <br>        <br>          n <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(n\log n) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mop">lo<span style="margin-right: 0.0139em;">g</span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>：排序时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          n <br>         <br>        <br>          log <br>         <br>        <br>          ⁡ <br>         <br>        <br>          n <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(n\log n) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mop">lo<span style="margin-right: 0.0139em;">g</span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>，双指针时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          n <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(n) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          log <br>         <br>        <br>          ⁡ <br>         <br>        <br>          n <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(\log n) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right: 0.0139em;">g</span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span></li></ul> <br><h4><a id="AC_74"></a>AC代码</h4> <br><h5><a id="C_76"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2024-11-17 17:39:44<br> * @LastEditors: LetMeFly.xyz<br> * @LastEditTime: 2024-11-17 18:11:18<br> */</span><br><span class="token comment">/*<br>对于x：x要加：<br>0.5x+7 < y <= x<br>x + 7 < 2y<br>也就是说<br>0.5x+7 < x 可得 x>14 才能有朋友<br>*/</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    <span class="token keyword">int</span> <span class="token function">numFriendRequests</span><span class="token punctuation">(</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> ages<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token function">sort</span><span class="token punctuation">(</span>ages<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ages<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">int</span> y_l <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">while</span> <span class="token punctuation">(</span>y_l <span class="token operator"><</span> ages<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&&</span> ages<span class="token punctuation">[</span>y_l<span class="token punctuation">]</span> <span class="token operator"><=</span> <span class="token number">14</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            y_l<span class="token operator">++</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> y_r <span class="token operator">=</span> y_l<span class="token punctuation">,</span> x <span class="token operator">=</span> y_l<span class="token punctuation">;</span> x <span class="token operator"><</span> ages<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">while</span> <span class="token punctuation">(</span>ages<span class="token punctuation">[</span>y_l<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator"><=</span> ages<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">14</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                y_l<span class="token operator">++</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            <span class="token keyword">while</span> <span class="token punctuation">(</span>y_r <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator"><</span> ages<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&&</span> ages<span class="token punctuation">[</span>y_r <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator"><=</span> ages<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                y_r<span class="token operator">++</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>            ans <span class="token operator">+=</span> y_r <span class="token operator">-</span> y_l<span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><h3><a id="_115"></a>方法二：桶排序</h3> <br><p>有没有一种办法避免方法一的时间瓶颈——排序呢？当然有。</p> <br><p>不难发现每个人的年龄范围是<code>1</code>到<code>120</code>，因此我们只需要统计一下每个年龄段分别有多少人，再枚举<code>x</code>和<code>y</code>的年龄判定是否符合第一第二两个条件就好了。</p> <br><ul><li>时间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          n <br>         <br>        <br>          + <br>         <br>         <br>         <br>           C <br>          <br>         <br>           2 <br>          <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(n + C^2) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1.0641em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0715em;">C</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>：其中<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          C <br>         <br>        <br>          = <br>         <br>        <br>          120 <br>         <br>        <br>       <br>         C=120 <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.0715em;">C</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">120</span></span></span></span></span></li><li>空间复杂度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> <br>      <br>       <br>        <br>        <br>          O <br>         <br>        <br>          ( <br>         <br>        <br>          C <br>         <br>        <br>          ) <br>         <br>        <br>       <br>         O(C) <br>        <br>       <br>     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0715em;">C</span><span class="mclose">)</span></span></span></span></span></li></ul> <br><h4><a id="AC_124"></a>AC代码</h4> <br><h5><a id="C_126"></a>C++</h5> <br><pre><code class="prism language-cpp"><span class="token comment">/*<br> * @Author: LetMeFly<br> * @Date: 2021-12-27 09:00:07<br> * @LastEditors: LetMeFly<br> * @LastEditTime: 2021-12-27 09:07:32<br> */</span><br><span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token number">121</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{<!-- --></span><br><span class="token keyword">public</span><span class="token operator">:</span><br>    <span class="token comment">// age[y] * 2 <= age[x] + 14</span><br>    <span class="token keyword">int</span> <span class="token function">numFriendRequests</span><span class="token punctuation">(</span>vector<span class="token operator"><</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&</span> ages<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator"><</span> <span class="token number">121</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><br>            a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">&</span> t <span class="token operator">:</span> ages<span class="token punctuation">)</span><br>            a<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span><br>        <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> y <span class="token operator"><=</span> <span class="token number">120</span><span class="token punctuation">;</span> y<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> y<span class="token punctuation">;</span> x <span class="token operator"><=</span> <span class="token number">120</span><span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><br>                <span class="token keyword">if</span> <span class="token punctuation">(</span>y <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator"><=</span> x <span class="token operator">+</span> <span class="token number">14</span> <span class="token operator">||</span> <span class="token punctuation">(</span>y <span class="token operator">></span> <span class="token number">100</span> <span class="token operator">&&</span> x <span class="token operator"><</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>                    <span class="token keyword">continue</span><span class="token punctuation">;</span><br>                ans <span class="token operator">+=</span> x <span class="token operator">==</span> y <span class="token operator">?</span> a<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">:</span> a<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">*</span> a<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br></code></pre> <br><blockquote> <br> <p>同步发文于CSDN和我的<a href="https://blog.letmefly.xyz/" rel="nofollow">个人博客</a>，原创不易，转载经作者同意后请附上<a href="https://blog.letmefly.xyz/2024/11/17/LeetCode%200825.%E9%80%82%E9%BE%84%E7%9A%84%E6%9C%8B%E5%8F%8B/" rel="nofollow">原文链接</a>哦~</p> <br> <p>Tisfy：<a href="https://letmefly.blog.csdn.net/article/details/143836115" rel="nofollow">https://letmefly.blog.csdn.net/article/details/143836115</a></p> <br></blockquote>