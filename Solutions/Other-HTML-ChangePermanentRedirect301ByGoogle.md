---
title: HTML - 网站永久重定向301修改了之后，Google浏览器如何重新定位到新地址
date: 2023-04-05 15:50:44
tags: [其他, HTML, 301, 重定向, nginx, Google]
---

# HTML - 网站永久重定向301修改了之后，Google浏览器如何重新定位到新地址

## 前言

我网站的域名是```a.com```，某天，我决定永久改用```b.com```作为新的域名。但是为了防止```a.com```的老用户不知道域名更改的事情，所以当用户访问```a.com```时，会自动重定向到```b.com```对应的路径下。

使用nginx也很好实现：

```nginx
server {
    listen 443, 80;
    server_name a.com;

    location / {
        rewrite ^/(.*) https://b.com/$1 permanent;
    }
}
```

这样，对```a.com```的请求就会被永久重定向到```b.com```

但是事情总是不那么地一帆风顺，在编写nginx代码时，不小心将```b.com```写成了一个不存在的```c.com```

当我使用谷歌浏览器去访问```a.com```时，被重定向到了```c.com```

发现这个问题后，我立刻修改了nginx的配置，将```c.com```修改为了```b.com```

这时，使用新的设备/浏览器访问```a.com```，能够正常地被重定向到```b.com```了。

但是有一个问题，我访问```a.com```时，服务器返回的是**永久重定向**301，这时我的谷歌浏览器记录下了这个结果，每当我再次访问```a.com```时，浏览器直接跳过了重定向这一步，直接访问了```c.com```。这就导致我在```a.com```上的更改无法被我的谷歌浏览器获取。

重启浏览器、重启计算机、等待数日等都无效。在网上查阅后得知，谷歌浏览器会永久记录这一结果。

怎么办呢？忽然想到了一个办法：

```F12打开控制台 -> 选中“网络”栏 -> 勾选“停用缓存”复选框 -> 访问a.com```

大功告成！

停用缓存的话，浏览器就不会使用之前的“永久重定向到了c.com”的缓存，而是真正地再访问了一次```a.com```

这次浏览器得到了新的“永久重定向到```b.com```的通知”，以后都会直接重定向到```b.com```了

但是还有一个问题：假设我在设置为“重定向到```c.com```”后访问过```a.com/a.js```，那么```a.com/a.js```会被永久重定向到```c.com/a.js```，但是我上述操作只是重新加载了```a.com```，并未刷新```a.com/a.js```，因此对已经访问过的```a.com/a.js```不生效！！貌似除非手动采用上面的方法才可以。

## 总结

这就告诉我们，不要轻易使用301！！！除非已经测试好了，并且真的考虑了接近所有的情况，真的不准备改了，再使用301。。。

> 原创不易，转载请附上[原文链接](https://blog.tisfy.eu.org/2023/04/05/Other-HTML-ChangePermanentRedirect301ByGoogle/)哦~
> 原文链接：[https://blog.tisfy.eu.org/2023/04/05/Other-HTML-ChangePermanentRedirect301ByGoogle/](https://blog.tisfy.eu.org/2023/04/05/Other-HTML-ChangePermanentRedirect301ByGoogle/)
