<!DOCTYPE html><html lang="zh-CN" theme-mode="dark"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>ç½‘ç«™è®¿é—®è€—æ—¶ä¼˜åŒ– - ä»æ•°åç§’åˆ°å‡ ç™¾æ¯«ç§’çš„â€œé›¶æˆæœ¬â€ä¼˜åŒ–è¿‡ç¨‹ - é˜¿é‡Œäº‘å­åŸŸGeoDNSå›½å†…å¤–åˆ†æµ | Tisfyçš„LeetCodeé¢˜è§£ç­‰åšå®¢</title><link rel="canonical" href="https://blog.letmefly.xyz/_posts/Other-Website-ZeroCostLatencyOptimization.html"><link rel="icon" type="image/x-icon" href="https://web.letmefly.xyz/favicon.ico"><link rel="preload" as="font" crossorigin="anonymous" href="/theme/arknights/font/Bender.ttf"><link rel="preload" as="font" crossorigin="anonymous" href="/theme/arknights/font/BenderLight.ttf"><link rel="preload" as="font" crossorigin="anonymous" href="/theme/arknights/font/JetBrainsMono-Regular.woff2"><link rel="stylesheet" href="/theme/arknights/css/arknights.css"><style>@font-face {
  font-family: Bender;
  src: local('Bender'), url("/theme/arknights/font/Bender.ttf"), url("/theme/arknights/font/Bender.otf");
}
@font-face {
  font-family: BenderLight;
  src: local('BenderLight'), url("/theme/arknights/font/BenderLight.ttf");
}
@font-face {
  font-family: 'JetBrains Mono';
  src: local('JetBrains Mono'), url('/theme/arknights/font/JetBrainsMono-Regular.woff2') format('woff2');
}
</style><script>var config = {"root":"/theme/arknights/","search":{"preload":false,"activeHolder":"é”®å…¥ä»¥ç»§ç»­","blurHolder":"æ•°æ®æ£€ç´¢","noResult":"æ—  $0 ç›¸å…³æ•°æ®"},"code":{"codeInfo":"$0 - $1 è¡Œ","copy":"å¤åˆ¶"}}</script><link type="text/css" rel="stylesheet" href="/theme/arknights/lib/encrypt/hbe.style.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lightgallery.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-zoom.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-thumbnail.css"><link type="text/css" rel="stylesheet" href="/theme/arknights/lib/fontawesome/css/all.min.css"><script>if (window.localStorage.getItem('theme-mode') === 'light')
 document.documentElement.setAttribute('theme-mode', 'light')
if (window.localStorage.getItem('theme-mode') === 'dark')
 document.documentElement.setAttribute('theme-mode', 'dark')</script><style>:root {
 --dark-background: url('https://ak.hypergryph.com/assets/index/images/ak/pc/bk.jpg');
 --light-background: url('/theme/arknights/img/bk.jpg');
 --theme-encrypt-confirm: 'ç¡®è®¤'
}</style><script defer src="/theme/arknights/js/arknights.js"></script><script defer type="module">window.MathJax = { tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], }, chtml: { scale: 0.8 }};
</script><script defer src="https://letmefly.xyz/Links/JS/MathJax/tex-mml-chtml.js"></script><script defer src="/theme/arknights/js/search.js"></script><script defer type="module">import mermaid from '//unpkg.com/mermaid@10.5.0/dist/mermaid.esm.mjs';
window.mermaid = mermaid;
code.paintMermaid();
</script><script defer src="https://letmefly.xyz/Links/Common.js"></script><script async src="//unpkg.com/lightgallery@2.7.1/lightgallery.min.js"></script><script async src="//unpkg.com/lightgallery@2.7.1/plugins/zoom/lg-zoom.min.js"></script><script async src="//unpkg.com/lightgallery@2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script><script async src="/theme/arknights/lib/encrypt/hbe.js"></script><script async src="/theme/arknights/js/pjax.js"></script><script class="pjax-js">reset= () => {document.querySelector('.lg-container')?.remove()
lightGallery(document.getElementById('post-bg'), {
  plugins: [lgZoom,lgThumbnail],
  selector: '.item-img'})}</script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js','data-pjax','.busuanzi'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);reset()})</script><meta name="generator" content="Hexo 8.1.1"></head><body><div class="loading" style="opacity: 0;"><div class="loadingBar left"></div><div class="loadingBar right"></div></div><main><header class="closed"><div class="navBtn"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><nav><div class="navItem" id="search-header"><span class="navItemTitle"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="æ•°æ®æ£€ç´¢" spellcheck="false" maxlength="50" type="text" id="search-input"></span></div><div class="navItem" id="search-holder"></div><div class="search-popup" tabindex="0"><div id="search-result"></div></div><ol class="navContent"><li class="navItem"><a class="navBlock" href="/theme/arknights/"><span class="navItemTitle">Home</span></a></li><li class="navItem" matchdata="categories,tags"><a class="navBlock" href="/theme/arknights/archives/"><span class="navItemTitle">Archives</span></a></li></ol></nav></header><article><div id="post-bg"><div id="post-title"><h1>ç½‘ç«™è®¿é—®è€—æ—¶ä¼˜åŒ– - ä»æ•°åç§’åˆ°å‡ ç™¾æ¯«ç§’çš„â€œé›¶æˆæœ¬â€ä¼˜åŒ–è¿‡ç¨‹ - é˜¿é‡Œäº‘å­åŸŸGeoDNSå›½å†…å¤–åˆ†æµ</h1><div id="post-info"><span>æ–‡ç« å‘å¸ƒæ—¶é—´: <div class="control"><time datetime="2026-01-10T01:53:54.000Z" id="date"> 2026-01-10</time></div></span></div></div><hr><div id="post-content"><h1 id="ç½‘ç«™è®¿é—®è€—æ—¶ä¼˜åŒ–-ä»æ•°åç§’åˆ°å‡ ç™¾æ¯«ç§’çš„â€œé›¶æˆæœ¬â€ä¼˜åŒ–è¿‡ç¨‹-é˜¿é‡Œäº‘å­åŸŸGeoDNSå›½å†…å¤–åˆ†æµ"><a href="#ç½‘ç«™è®¿é—®è€—æ—¶ä¼˜åŒ–-ä»æ•°åç§’åˆ°å‡ ç™¾æ¯«ç§’çš„â€œé›¶æˆæœ¬â€ä¼˜åŒ–è¿‡ç¨‹-é˜¿é‡Œäº‘å­åŸŸGeoDNSå›½å†…å¤–åˆ†æµ" class="headerlink" title="ç½‘ç«™è®¿é—®è€—æ—¶ä¼˜åŒ– - ä»æ•°åç§’åˆ°å‡ ç™¾æ¯«ç§’çš„â€œé›¶æˆæœ¬â€ä¼˜åŒ–è¿‡ç¨‹ - é˜¿é‡Œäº‘å­åŸŸGeoDNSå›½å†…å¤–åˆ†æµ"></a>ç½‘ç«™è®¿é—®è€—æ—¶ä¼˜åŒ– - ä»æ•°åç§’åˆ°å‡ ç™¾æ¯«ç§’çš„â€œé›¶æˆæœ¬â€ä¼˜åŒ–è¿‡ç¨‹ - é˜¿é‡Œäº‘å­åŸŸGeoDNSå›½å†…å¤–åˆ†æµ</h1><blockquote>
<ul>
<li>Website Latency Optimization: A Zero-Cost Journey from Tens of Seconds to Hundreds of Milliseconds</li>
<li>From 30 Seconds to 300 Milliseconds: Zero-Cost Website Performance Optimization</li>
</ul>
</blockquote>
<h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>ä¹‹å‰ä¸ºäº†ä¿æŠ¤æˆ‘é‚£å°å­±å¼±çš„å°æœåŠ¡å™¨çš„çœŸå®ipå…å—æ”»å‡»ï¼Œæˆ‘å°†æœåŠ¡å™¨çš„æ‰€æœ‰HTTP(s)æœåŠ¡é™åˆ¶ä¸ºä»…èƒ½é€šè¿‡åŸŸåè®¿é—®ï¼Œä¸”æŠŠåŸŸåæ‰˜ç®¡åœ¨äº†<strong>Cloudflare</strong>ä¸Šå¼€å¯äº†ä»£ç†å°äº‘æœµã€‚</p>
<p>å°±è¿™æ ·å‡ å¹´è¿‡å»äº†ï¼Œè¶Šæ¥è¶Šè§‰å¾—ç½‘ç«™è®¿é—®æ˜¯çœŸçš„æ…¢ï¼ˆä¸ç®¡æœ‰æ²¡æœ‰ç‰¹æ®Šç½‘ç»œéƒ½å¾ˆæ…¢ï¼‰ã€‚å¹¶ä¸”æœ‰ğŸ‘‡ï¼Œæ‰€ä»¥å†³å®šä¼˜åŒ–ä¸€æ‰‹ã€‚</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.cloudflare.com/learning/performance/more/website-performance-conversion-rates/">CloudFlare: ç½‘ç«™æ€§èƒ½å¦‚ä½•å½±å“è½¬åŒ–ç‡</a></p>
<p>æ²ƒå°”ç›å‘ç°ï¼Œé¡µé¢åŠ è½½æ—¶é—´æ¯å‡å°‘ 1 ç§’ï¼Œè½¬åŒ–æ•°å°±ä¼šå¢åŠ  2ï¼…â€¦</p>
</blockquote>
<p><strong>æœ€ç»ˆï¼Œä»æ¯æ¬¡è®¿é—®â€œå¿«åˆ™å¥½å‡ ç§’å¹³å‡åæ¥ç§’æ…¢åˆ™å¥½å‡ åç§’â€åˆ°â€œç²—ç•¥ç»Ÿè®¡å…¨çƒè®¿é—®å¹³å‡å‡ ç™¾æ¯«ç§’â€çš„æ€§èƒ½ä¼˜åŒ–ï¼Œå¹¶ä¸”å‡ ä¹æ²¡æœ‰ä¿®æ”¹ä»£ç ã€‚</strong>ï¼ˆç†æƒ³çŠ¶æ€å¹³å‡å‡ åæ¯«ç§’ï¼‰</p>
<h2 id="è€—æ—¶åŸå› åˆ†æ"><a href="#è€—æ—¶åŸå› åˆ†æ" class="headerlink" title="è€—æ—¶åŸå› åˆ†æ"></a>è€—æ—¶åŸå› åˆ†æ</h2><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œæ­£å¸¸æƒ…å†µä¸‹é”…å†…å¤–çš„ç½‘ç»œä¼ è¾“éƒ½è¦ä¸å¯é¿å…åœ°ç»è¿‡TheGreatWallï¼Œæ¥ä¿éšœå›½æ°‘çš„ç½‘ç»œä¿¡æ¯å®‰å…¨ã€‚</p>
<p>ä¸ºä»€ä¹ˆCDNæœåŠ¡å™¨éå¸ƒå…¨çƒçš„èµ›åšè©è¨Cloudflareåœ¨é”…å†…ä¼šå˜æˆå‡é€ŸCDNå‘¢ï¼Ÿå¤§æ¦‚ç‡æ˜¯ç»è¿‡äº†ä¸Šé¢çš„å®ƒâ†‘ã€‚</p>
<p>ä¸ºäº†å®é”¤ä¸€ä¸‹ï¼Œåœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œå‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..20&#125;; <span class="keyword">do</span> curl -o /dev/null -s -w <span class="string">&quot;%&#123;time_connect&#125; %&#123;time_starttransfer&#125; %&#123;time_total&#125;\n&quot;</span> https://nextcloud.letmefly.xyz; <span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>å¾—åˆ°ç»“æœ20æ¬¡è¯·æ±‚çš„è¿æ¥è€—æ—¶ã€é¦–å­—èŠ‚è¿”å›è€—æ—¶ã€æ€»è€—æ—¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">0.726453 4.388203 4.388237</span><br><span class="line">1.346249 7.263477 7.263509</span><br><span class="line">2.228933 10.111719 10.111752</span><br><span class="line">2.660601 9.483325 9.483393</span><br><span class="line">1.028620 3.424524 3.424555</span><br><span class="line">0.795678 3.197058 3.197130</span><br><span class="line">1.114911 3.688075 3.688237</span><br><span class="line">0.697664 5.477339 5.477411</span><br><span class="line">0.821841 26.322082 26.322112</span><br><span class="line">0.916166 3.698248 3.698305</span><br><span class="line">1.404712 4.999771 4.999802</span><br><span class="line">0.772932 3.323453 3.323484</span><br><span class="line">2.204168 5.768386 5.768476</span><br><span class="line">1.264734 3.941814 3.941846</span><br><span class="line">0.788361 6.344063 6.344097</span><br><span class="line">3.425116 0.000000 72.185861</span><br><span class="line">2.303902 9.694897 9.695196</span><br><span class="line">0.919144 6.506560 6.506636</span><br><span class="line">0.778423 4.272682 4.272722</span><br><span class="line">0.527677 8.258768 8.258819</span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒåˆ—å’Œç¬¬ä¸‰åˆ—å‡ ä¹ç›¸åŒï¼Œè¯´æ˜æœåŠ¡ç«¯æ•°æ®å¤„ç†éå¸¸è¿…é€Ÿï¼Œè€—æ—¶å‡ ä¹ä¸º0ï¼Œè€Œæ•´ä¸ªç½‘ç»œå¼€é”€å‡ ä¹å‡è€—æ—¶åœ¨ç½‘ç»œä¼ è¾“ä¸Šï¼ˆæœåŠ¡å™¨â€“cloudflareâ€“æœåŠ¡å™¨ï¼‰ï¼Œç„¶åå°±æœ‰äº†ç¬¬ä¸‰åˆ—è¿™ç¾éš¾çº§åˆ«çš„è€—æ—¶ã€‚</p>
<h2 id="Geo-DNSåˆ†æµ"><a href="#Geo-DNSåˆ†æµ" class="headerlink" title="Geo-DNSåˆ†æµ"></a>Geo-DNSåˆ†æµ</h2><p>æ—¢ç„¶çŸ¥é“äº†ç½‘ç»œå¼€é”€çš„å·¨å¤§å¤´ä¸»è¦æ¥è‡ªHTTPçš„è·¨å¢ƒè¡Œä¸ºï¼Œæ‰€ä»¥è®©å›½å†…ç”¨æˆ·è®¿é—®æˆ‘çš„å›½å†…æœåŠ¡å™¨ï¼Œå›½å¤–ç”¨æˆ·è®¿é—®å›½å¤–Github Pagesï¼ˆçº¯é™æ€é¡µé¢ï¼‰ä¸å°±å¥½äº†ä¹ˆï¼Œå…·ä½“è®¿é—®çš„å“ªä¸ªIPå¯¹ç”¨æˆ·æ˜¯æ— æ„Ÿçš„ï¼Œä¸”ä¸€ä¸ªåŸŸåå°±èƒ½å®ç°ã€‚</p>
<p>ç”±äºä¸»åŸŸå<a target="_blank" rel="noopener" href="https://letmefly.xyz/"><code>letmefly.xyz</code></a>æ‰˜ç®¡åœ¨cloudflareä¸Šä¸”ä»æœ‰å…¶ç”¨ï¼Œè€Œcloudflareçš„GeoDNSæˆæœ¬å¤§çº¦æ¯ä¸ªæœˆå‡ åç¾å…ƒ(æœªè¯¦ç»†ç»Ÿè®¡ç¡®è®¤)ï¼Œæ¯”å°æœåŠ¡å™¨è´µå¾ˆå¤šï¼Œæ‰€ä»¥å†³å®šå°†<code>blog.letmefly.xyz</code>å­åŸŸæ‰˜ç®¡åˆ°å…è´¹çš„é˜¿é‡Œäº‘DNSæœåŠ¡ä¸Šã€‚ï¼ˆè…¾è®¯äº‘DNSä¹Ÿæœ‰ç±»ä¼¼å…è´¹æœåŠ¡ï¼Œä½†ç”±äºè¯¥åŸŸåè´­ä¹°è‡ªé˜¿é‡Œäº‘ï¼Œæ‰€ä»¥é€‰æ‹©äº†æ‰˜ç®¡åœ¨é˜¿é‡Œäº‘ä¸Šï¼‰</p>
<h3 id="blog-letmefly-xyzå­åŸŸæ‰˜ç®¡"><a href="#blog-letmefly-xyzå­åŸŸæ‰˜ç®¡" class="headerlink" title="blog.letmefly.xyzå­åŸŸæ‰˜ç®¡"></a>blog.letmefly.xyzå­åŸŸæ‰˜ç®¡</h3><p>åœ¨cloudflareæ§åˆ¶é¢æ¿ä¿®æ”¹<a href="https://blog.letmefly.xyz/">blog.letmefly.xyz</a>çš„DNSè®°å½•ä¸º<code>NS</code>ï¼Œå€¼ä¸º<code>ns1.alidns.com</code>ï¼Œå†æ–°å»ºä¸€ä¸ª<code>NS</code>å€¼ä¸º<code>ns2.alidns.com</code>ã€‚</p>
<p>åœ¨é˜¿é‡Œäº‘DNSè§£ææ§åˆ¶å°æ·»åŠ åŸŸå<code>blog.letmefly.xyz</code>ï¼Œè¿›è¡ŒTXTæ ¡éªŒï¼ˆåœ¨cloudflareæ·»åŠ <code>alidnscheck.letmefly.xyz</code>çš„<code>TXT</code>ç±»å‹çš„è®°å½•ï¼‰ã€‚</p>
<p>æ·»åŠ è®°å½•ï¼š</p>
<table>
<thead>
<tr>
<th>ä¸»æœºè®°å½•</th>
<th>è®°å½•ç±»å‹</th>
<th>è§£æè¯·æ±‚æ¥æº</th>
<th>è®°å½•å€¼</th>
</tr>
</thead>
<tbody><tr>
<td>@</td>
<td>AAAA</td>
<td>å¢ƒå¤–</td>
<td>2606:50c:0:8003::153</td>
</tr>
<tr>
<td>@</td>
<td>AAAA</td>
<td>å¢ƒå¤–</td>
<td>2606:50c:0:8002::153</td>
</tr>
<tr>
<td>@</td>
<td>AAAA</td>
<td>å¢ƒå¤–</td>
<td>2606:50c:0:8001::153</td>
</tr>
<tr>
<td>@</td>
<td>AAAA</td>
<td>å¢ƒå¤–</td>
<td>2606:50c:0:8000::153</td>
</tr>
<tr>
<td>@</td>
<td>A</td>
<td>å¢ƒå¤–</td>
<td>185.199.111.153</td>
</tr>
<tr>
<td>@</td>
<td>A</td>
<td>å¢ƒå¤–</td>
<td>185.199.110.153</td>
</tr>
<tr>
<td>@</td>
<td>A</td>
<td>å¢ƒå¤–</td>
<td>185.199.109.153</td>
</tr>
<tr>
<td>@</td>
<td>A</td>
<td>å¢ƒå¤–</td>
<td>185.199.108.153</td>
</tr>
<tr>
<td>@</td>
<td>A</td>
<td>ä¸­å›½åœ°åŒº</td>
<td>39.105.42.186</td>
</tr>
</tbody></table>
<p>å‰é¢8ä¸ªæ˜¯Githubï¼ˆ<a target="_blank" rel="noopener" href="https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site">å®˜æ–¹æ–‡æ¡£</a>ï¼‰ï¼Œæœ€åä¸€ä¸ªæ˜¯æˆ‘çš„æœåŠ¡å™¨ã€‚</p>
<p>æ˜¯çš„ï¼Œå°±è¿™ä¹ˆç®€å•ï¼Œå®Œäº‹äº†ï¼</p>
<h2 id="æœåŠ¡å™¨æ‹‰å–Githubè„šæœ¬"><a href="#æœåŠ¡å™¨æ‹‰å–Githubè„šæœ¬" class="headerlink" title="æœåŠ¡å™¨æ‹‰å–Githubè„šæœ¬"></a>æœåŠ¡å™¨æ‹‰å–Githubè„šæœ¬</h2><p>æœåŠ¡å™¨ä¸Šè®¾è®¡ä¸ºï¼šå¯åŠ¨ä¸€ä¸ªwebhook listenerï¼Œå½“githubä»“åº“websiteåˆ†æ”¯æ›´æ–°æ—¶å‘æœåŠ¡å™¨å‘é€é€šçŸ¥ï¼ŒæœåŠ¡å™¨æ‹‰å–æœ€æ–°æºç ï¼Œå¹¶åŸå­åŒ–é“¾æ¥æ•´ä¸ªç›®å½•åˆ°nginxé…ç½®çš„ç›®å½•ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @LastEditTime: 2026-01-08 18:54:37</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;crypto/hmac&quot;</span></span><br><span class="line">    <span class="string">&quot;crypto/rand&quot;</span></span><br><span class="line">    <span class="string">&quot;crypto/sha256&quot;</span></span><br><span class="line">    <span class="string">&quot;encoding/hex&quot;</span></span><br><span class="line">    <span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">    <span class="string">&quot;io&quot;</span></span><br><span class="line">    <span class="string">&quot;log&quot;</span></span><br><span class="line">    <span class="string">&quot;math/big&quot;</span></span><br><span class="line">    <span class="string">&quot;net/http&quot;</span></span><br><span class="line">    <span class="string">&quot;os&quot;</span></span><br><span class="line">    <span class="string">&quot;os/exec&quot;</span></span><br><span class="line">    <span class="string">&quot;path/filepath&quot;</span></span><br><span class="line">    <span class="string">&quot;regexp&quot;</span></span><br><span class="line">    <span class="string">&quot;strings&quot;</span></span><br><span class="line">    <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    listenAddr = <span class="string">&quot;127.0.0.1:1209&quot;</span></span><br><span class="line">    secretFile = <span class="string">&quot;.secret&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> RepoConfig <span class="keyword">struct</span> &#123;</span><br><span class="line">    BaseDir   <span class="type">string</span></span><br><span class="line">    RepoURL   <span class="type">string</span></span><br><span class="line">    TargetRef <span class="type">string</span></span><br><span class="line">    Branch    <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> repos = <span class="keyword">map</span>[<span class="type">string</span>]RepoConfig&#123;</span><br><span class="line">    <span class="string">&quot;/hook/github/leetcode&quot;</span>: &#123;</span><br><span class="line">        BaseDir:   <span class="string">&quot;/www/blog&quot;</span>,</span><br><span class="line">        RepoURL:   <span class="string">&quot;git@github.com:LetMeFly666/LeetCode.git&quot;</span>,</span><br><span class="line">        TargetRef: <span class="string">&quot;refs/heads/website&quot;</span>,</span><br><span class="line">        Branch:    <span class="string">&quot;website&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;/hook/github/various&quot;</span>: &#123;</span><br><span class="line">        BaseDir:   <span class="string">&quot;/www/various&quot;</span>,</span><br><span class="line">        RepoURL:   <span class="string">&quot;git@github.com:LetMeFly666/various.git&quot;</span>,</span><br><span class="line">        TargetRef: <span class="string">&quot;refs/heads/master&quot;</span>,</span><br><span class="line">        Branch:    <span class="string">&quot;master&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> PushEvent <span class="keyword">struct</span> &#123;</span><br><span class="line">    Ref <span class="type">string</span> <span class="string">`json:&quot;ref&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> secret []<span class="type">byte</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">loadSecret</span><span class="params">()</span></span> &#123;</span><br><span class="line">    data, err := os.ReadFile(secretFile)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Fatal(<span class="string">&quot;read secret failed:&quot;</span>, err)</span><br><span class="line">    &#125;</span><br><span class="line">    secret = []<span class="type">byte</span>(strings.TrimSpace(<span class="type">string</span>(data)))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">verifySignature</span><span class="params">(body []<span class="type">byte</span>, signature <span class="type">string</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">    mac := hmac.New(sha256.New, secret)</span><br><span class="line">    mac.Write(body)</span><br><span class="line">    expected := <span class="string">&quot;sha256=&quot;</span> + hex.EncodeToString(mac.Sum(<span class="literal">nil</span>))</span><br><span class="line">    <span class="keyword">return</span> hmac.Equal([]<span class="type">byte</span>(signature), []<span class="type">byte</span>(expected))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">handler</span><span class="params">(cfg RepoConfig)</span></span> http.HandlerFunc &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">        body, _ := io.ReadAll(r.Body)</span><br><span class="line"></span><br><span class="line">        sig := r.Header.Get(<span class="string">&quot;X-Hub-Signature-256&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> !verifySignature(body, sig) &#123;</span><br><span class="line">            http.Error(w, <span class="string">&quot;invalid signature&quot;</span>, http.StatusForbidden)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> event PushEvent</span><br><span class="line">        <span class="keyword">if</span> err := json.Unmarshal(body, &amp;event); err != <span class="literal">nil</span> &#123;</span><br><span class="line">            http.Error(w, <span class="string">&quot;bad payload&quot;</span>, http.StatusBadRequest)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> event.Ref != cfg.TargetRef &#123;</span><br><span class="line">            w.Write([]<span class="type">byte</span>(<span class="string">&quot;ignored\n&quot;</span>))</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        w.Write([]<span class="type">byte</span>(<span class="string">&quot;accepted\n&quot;</span>))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">go</span> deployWebsite(cfg)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">randomSuffix</span><span class="params">()</span></span> <span class="type">string</span> &#123;</span><br><span class="line">    n, _ := rand.Int(rand.Reader, big.NewInt(<span class="number">1_000_000</span>))</span><br><span class="line">    <span class="keyword">return</span> n.String()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">deployWebsite</span><span class="params">(cfg RepoConfig)</span></span> &#123;</span><br><span class="line">    ts := time.Now().Format(<span class="string">&quot;20060102_150405&quot;</span>)</span><br><span class="line">    newDir := filepath.Join(cfg.BaseDir, <span class="string">&quot;website_&quot;</span>+ts+<span class="string">&quot;_&quot;</span>+randomSuffix())</span><br><span class="line">    currentLink := filepath.Join(cfg.BaseDir, <span class="string">&quot;website&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> err := os.MkdirAll(newDir, <span class="number">0755</span>); err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Println(<span class="string">&quot;mkdir failed:&quot;</span>, err)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cmd := exec.Command(</span><br><span class="line">        <span class="string">&quot;git&quot;</span>, <span class="string">&quot;clone&quot;</span>,</span><br><span class="line">        <span class="string">&quot;-b&quot;</span>, cfg.Branch,</span><br><span class="line">        <span class="string">&quot;--depth=1&quot;</span>,</span><br><span class="line">        cfg.RepoURL,</span><br><span class="line">        newDir,</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">if</span> out, err := cmd.CombinedOutput(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Println(<span class="string">&quot;git clone failed:&quot;</span>, <span class="type">string</span>(out))</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cmd = exec.Command(<span class="string">&quot;ln&quot;</span>, <span class="string">&quot;-sfn&quot;</span>, newDir, currentLink)</span><br><span class="line">    <span class="keyword">if</span> out, err := cmd.CombinedOutput(); err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Println(<span class="string">&quot;ln -sfn failed:&quot;</span>, <span class="type">string</span>(out))</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cleanupOldReleases(cfg.BaseDir, newDir)</span><br><span class="line"></span><br><span class="line">    log.Println(<span class="string">&quot;deploy success:&quot;</span>, newDir)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> releaseRegexp = regexp.MustCompile(<span class="string">`^website_\d&#123;8&#125;_\d&#123;6&#125;_\d+$`</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">cleanupOldReleases</span><span class="params">(baseDir, keepDir <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">    entries, err := os.ReadDir(baseDir)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> _, e := <span class="keyword">range</span> entries &#123;</span><br><span class="line">        <span class="keyword">if</span> !e.IsDir() &#123;</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        &#125;</span><br><span class="line">        name := e.Name()</span><br><span class="line">        <span class="keyword">if</span> !releaseRegexp.MatchString(name) &#123;</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        &#125;</span><br><span class="line">        full := filepath.Join(baseDir, name)</span><br><span class="line">        <span class="keyword">if</span> full == keepDir &#123;</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        &#125;</span><br><span class="line">        _ = os.RemoveAll(full)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    loadSecret()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> path, cfg := <span class="keyword">range</span> repos &#123;</span><br><span class="line">        http.HandleFunc(path, handler(cfg))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    log.Println(<span class="string">&quot;listening on&quot;</span>, listenAddr)</span><br><span class="line">    log.Fatal(http.ListenAndServe(listenAddr, <span class="literal">nil</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨githubå¯¹åº”ä»“åº“â€“settingsâ€“webhookâ€“æ–°å¢â€“è¾“å…¥å¯†é’¥ï¼ˆéšæœºå­—ç¬¦ä¸²ï¼Œå¯ç”±<code>openssl rand -hex 32</code>å‘½ä»¤ç”Ÿæˆï¼‰â€“ç±»å‹é€‰æ‹©jsonâ€“ä¸éœ€è¦é¢å¤–æ•°æ®ã€‚</p>
<p>æœ¬åœ°åœ¨ç¨‹åºæ‰§è¡Œç›®å½•åˆ›å»ºä¸€ä¸ª<code>.secret</code>æ–‡ä»¶å¹¶å†™å…¥ç”Ÿæˆçš„å¯†é’¥ï¼Œåå°è¿è¡Œè¯¥ç›‘å¬è„šæœ¬å³å¯ã€‚ï¼ˆä¸Šé¢æ–¹æ³•ä¿ºè®¾è®¡çš„ï¼Œå˜»å˜»ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">                  letmefly.xyz</span><br><span class="line">                       â”‚</span><br><span class="line">               Cloudflare DNS</span><br><span class="line">                       â”‚</span><br><span class="line">      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">      â”‚                                  â”‚</span><br><span class="line">www.xxx / api.xxx                  blog.letmefly.xyz</span><br><span class="line">   ï¼ˆå…¨ CFï¼‰                      NS å§”æ´¾ â†’ é˜¿é‡Œäº‘ DNS</span><br><span class="line">                                          â”‚</span><br><span class="line">                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br><span class="line">                       â”‚                                     â”‚</span><br><span class="line">                  ä¸­å›½å¤§é™†è®¿é—®                             æµ·å¤–è®¿é—®</span><br><span class="line">                  è¿”å› ECS IP                           è¿”å› Github IP</span><br><span class="line">                                                             â†“</span><br><span class="line">                                                        GitHub Pages</span><br></pre></td></tr></table></figure>

<h2 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h2><h3 id="å›½å†…"><a href="#å›½å†…" class="headerlink" title="å›½å†…"></a>å›½å†…</h3><p>åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ<code>for i in {1..20}; do curl -o /dev/null -s -w &quot;%{time_connect} %{time_starttransfer} %{time_total}\n&quot; https://nextcloud.letmefly.xyz; done</code>ï¼Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">0.007227 0.079349 0.079377</span><br><span class="line">0.005464 0.081657 0.081687</span><br><span class="line">0.005054 0.074545 0.074576</span><br><span class="line">0.456098 0.524839 0.524884</span><br><span class="line">0.469940 0.541030 0.541060</span><br><span class="line">0.006224 0.081239 0.081265</span><br><span class="line">0.005814 0.080448 0.080479</span><br><span class="line">0.006077 0.077889 0.077928</span><br><span class="line">0.005238 0.079339 0.079365</span><br><span class="line">0.004949 0.076759 0.076791</span><br><span class="line">0.005104 0.079881 0.079907</span><br><span class="line">0.005950 0.082108 0.082139</span><br><span class="line">0.006417 0.082243 0.082295</span><br><span class="line">0.005584 0.081760 0.081788</span><br><span class="line">0.455143 0.551400 0.551427</span><br><span class="line">0.005367 0.084855 0.084886</span><br><span class="line">0.455233 0.535178 0.535216</span><br><span class="line">0.005935 0.084052 0.084079</span><br><span class="line">0.004623 0.101036 0.101117</span><br><span class="line">0.005021 0.082109 0.082138</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªåº”è¯¥æ˜¯ç›´æ¥èµ°Localhostäº†?ã€‚</p>
<p>å¼ºåˆ¶èµ°å…¬ç½‘ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..20&#125;; <span class="keyword">do</span> curl -o /dev/null -s --resolve nextcloud.letmefly.xyz:443:39.105.42.186 -w <span class="string">&quot;%&#123;time_connect&#125; %&#123;time_starttransfer&#125; %&#123;time_total&#125;\n&quot;</span> https://nextcloud.letmefly.xyz; <span class="keyword">done</span></span><br><span class="line">tcpdump -i eth0 host 39.105.42.186 and port 443</span><br></pre></td></tr></table></figure>

<p>å¹¶å¦å¤–å¯åŠ¨ä¸€ä¸ªçª—å£æŠ“åŒ…ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump -i eth0 host 39.105.42.186 and port 443</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tisfy.https â†’ 39.105.42.186.38608</span><br><span class="line">39.105.42.186.38608 â†’ tisfy.https</span><br></pre></td></tr></table></figure>

<p>è¯´æ˜èµ°äº†å…¬ç½‘ã€‚</p>
<p>è¯¶ï¼Œè¿˜æ˜¯å¾ˆå¿«ã€‚</p>
<p>ç›´æ¥ä½¿ç”¨ä¸€å°æ‰‹ä¸­çš„è®¾å¤‡æµ‹è¯•ï¼Œä¸åœ¨æœåŠ¡å™¨ä¸Šæµ‹è¯•äº†</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">0.030351 0.122197 0.122252</span><br><span class="line">0.012166 0.094488 0.094556</span><br><span class="line">0.013372 0.118933 0.119127</span><br><span class="line">0.015152 0.121100 0.121195</span><br><span class="line">0.012782 0.093575 0.093694</span><br><span class="line">0.011981 0.090665 0.090767</span><br><span class="line">0.012699 0.092128 0.092318</span><br><span class="line">0.014691 0.167777 0.167850</span><br><span class="line">0.013061 0.207214 0.207498</span><br><span class="line">0.013980 0.273402 0.273721</span><br><span class="line">0.014736 0.186312 0.186655</span><br><span class="line">0.015405 0.170255 0.170587</span><br><span class="line">0.075688 0.263535 0.263765</span><br><span class="line">0.014979 0.154608 0.154884</span><br><span class="line">0.014043 0.276435 0.276624</span><br><span class="line">0.014873 0.180383 0.180700</span><br><span class="line">0.014767 0.260764 0.260981</span><br><span class="line">0.015220 0.166855 0.167178</span><br><span class="line">0.013348 0.176619 0.176928</span><br><span class="line">0.014471 0.171316 0.171636</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸‹æ²¡åŠæ³•äº†ï¼Œèµ°çš„wifiè¿çš„æœåŠ¡å™¨ï¼Œè¿˜æ˜¯å¾ˆå¿«ã€‚</p>
<h3 id="å›½å¤–"><a href="#å›½å¤–" class="headerlink" title="å›½å¤–"></a>å›½å¤–</h3><p>ç”±äºæ²¡æœ‰åœ¨å›½å¤–çš„è®¾å¤‡ï¼Œæ‰€ä»¥ä¸´æ—¶å†™äº†ä¸ªgithub actionæµ‹ä¸‹</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Test</span> <span class="string">blog.letmefly.xyz</span> <span class="string">latency</span> <span class="bullet">-</span> <span class="string">å¢ƒå¤–è®¿é—®å»¶è¿Ÿæµ‹è¯•</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">   <span class="attr">workflow_dispatch:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">latency-test:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Print</span> <span class="string">debug</span> <span class="string">info</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          echo &quot;==== Debug Info ====&quot;</span></span><br><span class="line"><span class="string">          echo &quot;Runner hostname: $(hostname)&quot;</span></span><br><span class="line"><span class="string">          echo &quot;GitHub runner public IP:&quot;</span></span><br><span class="line"><span class="string">          curl -s https://ifconfig.me || echo &quot;Failed to get public IP&quot;</span></span><br><span class="line"><span class="string">          echo &quot;===================&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Resolve</span> <span class="string">target</span> <span class="string">IP</span></span><br><span class="line">        <span class="attr">id:</span> <span class="string">resolve</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          TARGET=blog.letmefly.xyz</span></span><br><span class="line"><span class="string">          IP=$(dig +short $TARGET | head -n1)</span></span><br><span class="line"><span class="string">          echo &quot;Target: $TARGET&quot;</span></span><br><span class="line"><span class="string">          echo &quot;Resolved IP: $IP&quot;</span></span><br><span class="line"><span class="string">          echo &quot;IP=$IP&quot; &gt;&gt; $GITHUB_OUTPUT</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Test</span> <span class="string">latency</span> <span class="number">20</span> <span class="string">times</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          TARGET=blog.letmefly.xyz</span></span><br><span class="line"><span class="string">          IP=$&#123;&#123; steps.resolve.outputs.IP &#125;&#125;</span></span><br><span class="line"><span class="string">          echo &quot;time_connect time_starttransfer time_total&quot;</span></span><br><span class="line"><span class="string"></span>          </span><br><span class="line">          <span class="comment"># åˆå§‹åŒ–ç´¯åŠ å™¨</span></span><br><span class="line">          <span class="string">sum_connect=0</span></span><br><span class="line">          <span class="string">sum_starttransfer=0</span></span><br><span class="line">          <span class="string">sum_total=0</span></span><br><span class="line">          </span><br><span class="line">          <span class="string">for</span> <span class="string">i</span> <span class="string">in</span> &#123;<span class="number">1</span><span class="string">..20</span>&#125;<span class="string">;</span> <span class="string">do</span></span><br><span class="line">            <span class="comment"># å–ä¸‰ä¸ªæ—¶é—´</span></span><br><span class="line">            <span class="string">read</span> <span class="string">connect</span> <span class="string">starttransfer</span> <span class="string">total</span> <span class="string">&lt;&lt;&lt;</span> <span class="string">$(curl</span> <span class="string">-o</span> <span class="string">/dev/null</span> <span class="string">-s</span> <span class="string">\</span></span><br><span class="line">                 <span class="string">--resolve</span> <span class="string">$TARGET:443:$IP</span> <span class="string">\</span></span><br><span class="line">                 <span class="string">-w</span> <span class="string">&quot;<span class="template-variable">%&#123;time_connect&#125;</span> <span class="template-variable">%&#123;time_starttransfer&#125;</span> <span class="template-variable">%&#123;time_total&#125;</span>&quot;</span> <span class="string">\</span></span><br><span class="line">                 <span class="string">https://$TARGET)</span></span><br><span class="line">                 </span><br><span class="line">            <span class="comment"># ç´¯åŠ </span></span><br><span class="line">            <span class="string">sum_connect=$(echo</span> <span class="string">&quot;$sum_connect + $connect&quot;</span> <span class="string">|</span> <span class="string">bc)</span></span><br><span class="line">            <span class="string">sum_starttransfer=$(echo</span> <span class="string">&quot;$sum_starttransfer + $starttransfer&quot;</span> <span class="string">|</span> <span class="string">bc)</span></span><br><span class="line">            <span class="string">sum_total=$(echo</span> <span class="string">&quot;$sum_total + $total&quot;</span> <span class="string">|</span> <span class="string">bc)</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># è¾“å‡º</span></span><br><span class="line">            <span class="string">echo</span> <span class="string">&quot;$connect $starttransfer $total&quot;</span></span><br><span class="line">          <span class="string">done</span></span><br><span class="line">          </span><br><span class="line">          <span class="comment"># è®¡ç®—å¹³å‡</span></span><br><span class="line">          <span class="string">avg_connect=$(echo</span> <span class="string">&quot;scale=4; $sum_connect/20&quot;</span> <span class="string">|</span> <span class="string">bc)</span></span><br><span class="line">          <span class="string">avg_starttransfer=$(echo</span> <span class="string">&quot;scale=4; $sum_starttransfer/20&quot;</span> <span class="string">|</span> <span class="string">bc)</span></span><br><span class="line">          <span class="string">avg_total=$(echo</span> <span class="string">&quot;scale=4; $sum_total/20&quot;</span> <span class="string">|</span> <span class="string">bc)</span></span><br><span class="line">          </span><br><span class="line">          <span class="string">echo</span> <span class="string">&quot;AVERAGE $avg_connect $avg_starttransfer $avg_total&quot;</span></span><br></pre></td></tr></table></figure>

<p>Githubä¸Šæµ‹Github Pagesä¼¼ä¹æœ‰ç‚¹å°ä½œå¼Š(bushi)ï¼Œä½†æ²¡åŠæ³•äº†ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Runner hostname: runnervmi13qx</span><br><span class="line">GitHub runner public IP:</span><br><span class="line">172.212.165.69</span><br><span class="line"></span><br><span class="line">Target: blog.letmefly.xyz</span><br><span class="line">Resolved IP: 185.199.110.153</span><br><span class="line"></span><br><span class="line">time_connect time_starttransfer time_total</span><br><span class="line">0.013474 0.096664 0.101290</span><br><span class="line">0.011528 0.091032 0.095257</span><br><span class="line">0.012259 0.053301 0.058006</span><br><span class="line">0.011481 0.049095 0.053492</span><br><span class="line">0.009328 0.046950 0.050534</span><br><span class="line">0.008894 0.042994 0.047134</span><br><span class="line">0.013758 0.056136 0.061113</span><br><span class="line">0.011655 0.059527 0.063557</span><br><span class="line">0.014356 0.054987 0.060360</span><br><span class="line">0.011576 0.049023 0.053552</span><br><span class="line">0.011710 0.049211 0.053547</span><br><span class="line">0.011660 0.048587 0.052985</span><br><span class="line">0.011670 0.057137 0.061753</span><br><span class="line">0.008896 0.045748 0.049883</span><br><span class="line">0.014311 0.053899 0.059477</span><br><span class="line">0.013615 0.053529 0.059438</span><br><span class="line">0.011551 0.049421 0.053476</span><br><span class="line">0.013896 0.060151 0.065085</span><br><span class="line">0.014129 0.090222 0.095611</span><br><span class="line">0.013318 0.052731 0.057438</span><br><span class="line">AVERAGE .0121 .0580 .0626</span><br></pre></td></tr></table></figure>

<h3 id="å›½å†…å¤–"><a href="#å›½å†…å¤–" class="headerlink" title="å›½å†…å¤–"></a>å›½å†…å¤–</h3><p>ä¹Ÿå¯ä»¥åœ¨<a target="_blank" rel="noopener" href="https://www.itdog.cn/">itdog</a>ä¸Šæµ‹è¯•å›½å†…å¤–è®¿é—®ï¼Œç½‘ç»œè´¨é‡åŠå…¶ä¸ç¡®å®šå› ç´ ä¼šå¢å¤šï¼Œè€—æ—¶ç»“æœç¨é«˜ã€‚</p>
<p>ä½†HTTPè¯·æ±‚åªè¦ä¸ç»è¿‡å¢™å¢™ï¼Œå¹³å‡è¿˜æ˜¯æ¯”è¾ƒå¿«çš„ã€‚</p>
<p>å›½å†…å¤–è®¿é—®è‰¯æ°‘ç½‘ç«™çš„DNSæœåŠ¡ï¼Œä¹Ÿå¾ˆå¿«ï¼ˆå¹¶ä¸”è¿˜æœ‰ç¼“å­˜ï¼‰ï¼›å›½å¤–è®¿é—®Github(Anycast)æœ¬æ¥å°±å¾ˆå¿«ã€‚</p>
<h2 id="End"><a href="#End" class="headerlink" title="End"></a>End</h2><p>Whatâ€™s moreï¼š</p>
<blockquote>
<p>è¿™æ¬¡ä¼°è®¡è§¦å‘äº†å…³é”®è¯ï¼Œåœ¨CSDNä¸Šå‘å¸ƒæ—¶ä¸æ˜¯å…ˆå‘åå®¡äº†ã€‚</p>
</blockquote>
<center><font size="6px" face="Ink Free">The Real End, Thanks!</font></center>

<blockquote>
<p>åŒæ­¥å‘æ–‡äº<a target="_blank" rel="noopener" href="https://letmefly.blog.csdn.net/article/details/156789088">CSDN</a>å’Œæˆ‘çš„<a href="https://blog.letmefly.xyz/">ä¸ªäººåšå®¢</a>ï¼ŒåŸåˆ›ä¸æ˜“ï¼Œè½¬è½½ç»ä½œè€…åŒæ„åè¯·é™„ä¸Š<a href="https://blog.letmefly.xyz/2026/01/10/Other-Website-ZeroCostLatencyOptimization/">åŸæ–‡é“¾æ¥</a>å“¦~</p>
<p>åƒç¯‡æºç é¢˜è§£<a target="_blank" rel="noopener" href="https://github.com/LetMeFly666/LeetCode">å·²å¼€æº</a></p>
</blockquote>
<div id="paginator"></div></div><div id="post-footer"></div></div><div class="bottom-btn"><div><a class="i-top" id="to-top" onClick="scrolls.scrolltop();" title="å›åˆ°é¡¶éƒ¨" style="opacity: 0; display: none;">âˆ§ </a><a class="i-index" id="to-index" href="#toc-div" title="æ–‡ç« ç›®å½•">â‰¡</a><a class="i-color" id="color-mode" onClick="colorMode.change()" title="åˆ‡æ¢ä¸»é¢˜"></a></div></div></article><aside><div id="about"><a href="/theme/arknights/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a href="/">&lt;a href=&quot;https://letmefly.xyz&quot;&gt;Tisfy&lt;/a&gt;</a></h1><div id="description"><p>LeetCode é¢˜è§£ã€è§£é¢˜æŠ€å·§ åŠ›æ‰£é¢˜è§£ æŠ€æœ¯åšå®¢</p></div><div id="social-links"><a class="social" target="_blank" rel="noopener" href="https://github.com/LetMeFly666"><i class="fab fa-github" alt="GitHub"></i></a><a class="social" target="_blank" rel="noopener" href="https://space.bilibili.com/440206990"><i class="fa-brands fa-bilibili" alt="BiliBili"></i></a></div></div><div id="aside-block"><div id="toc-div"><h1>ç›®å½•</h1><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BD%91%E7%AB%99%E8%AE%BF%E9%97%AE%E8%80%97%E6%97%B6%E4%BC%98%E5%8C%96-%E4%BB%8E%E6%95%B0%E5%8D%81%E7%A7%92%E5%88%B0%E5%87%A0%E7%99%BE%E6%AF%AB%E7%A7%92%E7%9A%84%E2%80%9C%E9%9B%B6%E6%88%90%E6%9C%AC%E2%80%9D%E4%BC%98%E5%8C%96%E8%BF%87%E7%A8%8B-%E9%98%BF%E9%87%8C%E4%BA%91%E5%AD%90%E5%9F%9FGeoDNS%E5%9B%BD%E5%86%85%E5%A4%96%E5%88%86%E6%B5%81"><span class="toc-number">1.</span> <span class="toc-text">ç½‘ç«™è®¿é—®è€—æ—¶ä¼˜åŒ– - ä»æ•°åç§’åˆ°å‡ ç™¾æ¯«ç§’çš„â€œé›¶æˆæœ¬â€ä¼˜åŒ–è¿‡ç¨‹ - é˜¿é‡Œäº‘å­åŸŸGeoDNSå›½å†…å¤–åˆ†æµ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%83%8C%E6%99%AF"><span class="toc-number">1.1.</span> <span class="toc-text">èƒŒæ™¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%80%97%E6%97%B6%E5%8E%9F%E5%9B%A0%E5%88%86%E6%9E%90"><span class="toc-number">1.2.</span> <span class="toc-text">è€—æ—¶åŸå› åˆ†æ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Geo-DNS%E5%88%86%E6%B5%81"><span class="toc-number">1.3.</span> <span class="toc-text">Geo-DNSåˆ†æµ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#blog-letmefly-xyz%E5%AD%90%E5%9F%9F%E6%89%98%E7%AE%A1"><span class="toc-number">1.3.1.</span> <span class="toc-text">blog.letmefly.xyzå­åŸŸæ‰˜ç®¡</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8B%89%E5%8F%96Github%E8%84%9A%E6%9C%AC"><span class="toc-number">1.4.</span> <span class="toc-text">æœåŠ¡å™¨æ‹‰å–Githubè„šæœ¬</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E6%9E%9C"><span class="toc-number">1.5.</span> <span class="toc-text">ç»“æœ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BD%E5%86%85"><span class="toc-number">1.5.1.</span> <span class="toc-text">å›½å†…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BD%E5%A4%96"><span class="toc-number">1.5.2.</span> <span class="toc-text">å›½å¤–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BD%E5%86%85%E5%A4%96"><span class="toc-number">1.5.3.</span> <span class="toc-text">å›½å†…å¤–</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#End"><span class="toc-number">1.6.</span> <span class="toc-text">End</span></a></li></ol></li></ol></div></div><footer><nobr><span class="icp-title">ICP</span><a class="icp-content" target="_blank" rel="noopener" href="https://beian.miit.gov.cn/">äº¬ICPå¤‡2021029766å·-1</a></nobr><br><nobr><span class="icp-title">copyright</span><a class="icp-content" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a></nobr><br><nobr><a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a><span>'s </span><a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknights</a></nobr><wbr><nobr>ALL atricles by<a target="_blank" rel="noopener" href="https://letmefly.xyz/">Tisfy</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas></body></html>