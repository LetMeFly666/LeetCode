<!--
 * @Author: LetMeFly
 * @Date: 2023-08-06 18:20:04
 * @LastEditors: LetMeFly
 * @LastEditTime: 2023-08-06 22:35:40
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id='forCharacterDiv'>can remove</div>
    <!-- https://api-static.mihoyo.com/common/blackboard/ys_obc/v1/home/map?app_sn=ys_obc -->
    <script>
        // const queryForAllCharacter = new XMLHttpRequest();
        // queryForAllCharacter.open('GET', 'https://api-static.mihoyo.com/common/blackboard/ys_obc/v1/home/map?app_sn=ys_obc', false);
        // queryForAllCharacter.send();
        // const response = queryForAllCharacter.response;
        // const data = JSON.parse(response);
        // function getCharacterInfo(data) {
        //     for (var i = 0; i < data.data.list.length; i++) {
        //         if (data.data.list[i].name == '图鉴' || data.data.list[i].id == 189) {
        //             const tuJian = data.data.list[i];
        //             for (var j = 0; j < tuJian.children.length; j++) {
        //                 if (tuJian.children[j].name == '角色' || tuJian.children[j].id == 25) {
        //                     return tuJian.children[j].list;
        //                 }
        //             }
        //         }
        //     }
        //     return [];
        // }
        // const characterList = getCharacterInfo(data);
        // console.log(characterList);

        function getCharacterList() {
            const queryAllCharacter = new XMLHttpRequest();
            queryAllCharacter.open('GET', 'https://api-static.mihoyo.com/common/blackboard/ys_obc/v1/home/content/list?app_sn=ys_obc&channel_id=189', false);
            queryAllCharacter.send();
            const response = queryAllCharacter.response;
            const data = JSON.parse(response);
            const characterList = data.data.list[0].children[0].list;
            return characterList;
        }

        // get 1 character
        var content_id = getCharacterList()[0].content_id;
        query1Character = new XMLHttpRequest();
        query1Character.open('GET', 'https://api-static.mihoyo.com/common/blackboard/ys_obc/v1/content/info?app_sn=ys_obc&content_id=' + content_id, false);
        query1Character.send()
        var response = query1Character.response;
        var data = JSON.parse(response);
        var html = data.data.content.contents[2].text;
        // var div = document.querySelector("#forCharacterDiv");
        // div.innerHTML = html;
        var parser = new DOMParser();
        var htmlDocument = parser.parseFromString(html, 'text/html');
        var h2s = htmlDocument.querySelectorAll('h2');
        console.log(h2s);
        // htmlDocument.querySelector('h2 + ul[data-target="voiceTab.attr"]');
        htmlDocument.querySelectorAll('div[class="obc-tmpl obc-tmpl--col-l2r1"]')[2].querySelectorAll('ul[data-target="voiceTab.attr"]')[1]
    </script>
</body>
</html>