build-a-matrix-with-conditions